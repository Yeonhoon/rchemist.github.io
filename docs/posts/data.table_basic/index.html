<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-01-18">
<meta name="description" content="data.table 문법, 연산자, 함수">

<title>Rchemist - data.table 기초 문법</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Rchemist</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html">
 <span class="menu-text">Posts</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">data.table 기초 문법</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                  <div>
        <div class="description">
          data.table 문법, 연산자, 함수
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data.table</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 18, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data.table-소개" id="toc-data.table-소개" class="nav-link active" data-scroll-target="#data.table-소개">1. data.table 소개</a></li>
  <li><a href="#data.table-함수" id="toc-data.table-함수" class="nav-link" data-scroll-target="#data.table-함수">2. data.table 함수</a></li>
  <li><a href="#i-data.table-행" id="toc-i-data.table-행" class="nav-link" data-scroll-target="#i-data.table-행">3. i: data.table 행</a>
  <ul class="collapse">
  <li><a href="#논리-연산자를-이용한-row-filtering" id="toc-논리-연산자를-이용한-row-filtering" class="nav-link" data-scroll-target="#논리-연산자를-이용한-row-filtering">1) 논리 연산자를 이용한 row filtering</a></li>
  <li><a href="#infix-연산자를-이용한-row-filtering" id="toc-infix-연산자를-이용한-row-filtering" class="nav-link" data-scroll-target="#infix-연산자를-이용한-row-filtering">2) Infix 연산자를 이용한 row filtering</a></li>
  <li><a href="#함수를-이용한-row-filtering" id="toc-함수를-이용한-row-filtering" class="nav-link" data-scroll-target="#함수를-이용한-row-filtering">3) 함수를 이용한 row filtering</a></li>
  <li><a href="#행의-정렬" id="toc-행의-정렬" class="nav-link" data-scroll-target="#행의-정렬">4) 행의 정렬</a></li>
  </ul></li>
  <li><a href="#j-data.table-열" id="toc-j-data.table-열" class="nav-link" data-scroll-target="#j-data.table-열">4. j: data.table 열</a>
  <ul class="collapse">
  <li><a href="#column-선택" id="toc-column-선택" class="nav-link" data-scroll-target="#column-선택">1) column 선택</a></li>
  <li><a href="#column-계산" id="toc-column-계산" class="nav-link" data-scroll-target="#column-계산">2) column 계산</a></li>
  <li><a href="#column-생성-및-변경" id="toc-column-생성-및-변경" class="nav-link" data-scroll-target="#column-생성-및-변경">3) column 생성 및 변경 <code>:=</code></a></li>
  </ul></li>
  <li><a href="#by-그룹-별-분석" id="toc-by-그룹-별-분석" class="nav-link" data-scroll-target="#by-그룹-별-분석">5. by: 그룹 별 분석</a></li>
  <li><a href="#이외-유용한-data.table-전용-함수" id="toc-이외-유용한-data.table-전용-함수" class="nav-link" data-scroll-target="#이외-유용한-data.table-전용-함수">6. 이외 유용한 data.table 전용 함수</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="data.table-소개" class="level2">
<h2 class="anchored" data-anchor-id="data.table-소개">1. data.table 소개</h2>
<p><code>data.table</code>은 R의 <code>data.frame</code>을 상속하여 만들어진 패키지입니다. 그렇기 때문에 대괄호(<code>[]</code>)를 쓰는 등의 문법은 대체로 <code>data.frame</code>과 비슷합니다. 그러나 <code>data.table</code>은 기존의 <code>data.frame</code>과 다른 장점을 갖고 있습니다.</p>
<p><code>data.table</code>의 장점은 다음과 같습니다.</p>
<ul>
<li><p><strong>매우 빠른 속도</strong></p>
<p><code>data.table</code>은 기본 <code>data.frame</code> 구조보다 훨씬 빠르게 데이터를 연산합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(data.table)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(microbenchmark)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">'storms'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>df_test <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate</span>(<span class="at">x=</span>storms[,<span class="fu">c</span>(<span class="st">'wind'</span>,<span class="st">'pressure'</span>)],</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">list</span>(storms<span class="sc">$</span>name,storms<span class="sc">$</span>year, storms<span class="sc">$</span>month,storms<span class="sc">$</span>day),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">FUN =</span> mean)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>dplyr_test <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  storms <span class="sc">%&gt;%</span> </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(name, year, month, day) <span class="sc">%&gt;%</span> </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">wind=</span><span class="fu">mean</span>(wind), <span class="at">pressure=</span><span class="fu">mean</span>(pressure),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>storm_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(storms)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>dt_test <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  storm_dt[,.(<span class="at">wind=</span><span class="fu">mean</span>(wind), <span class="at">pressure=</span><span class="fu">mean</span>(pressure)), by<span class="ot">=</span>.(name, year,month,day)]</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">microbenchmark</span>(<span class="fu">df_test</span>(), <span class="fu">dplyr_test</span>(), <span class="fu">dt_test</span>(), <span class="at">times=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unit: milliseconds
         expr       min        lq      mean    median        uq       max neval
    df_test() 120.43664 120.93960 125.80849 124.19749 132.00733 134.74452    10
 dplyr_test()  71.89158  73.16772  78.08736  76.99503  80.46979  92.22566    10
    dt_test()  17.12720  18.61918  20.04583  19.71196  20.56731  26.60966    10</code></pre>
</div>
</div>
<p>위는 각각 <code>data.frame</code>, <code>dplyr</code>, <code>data.table</code>로 동일한 결과를 불러오도록 실행했을 때 걸린 시간입니다. <code>data.table</code>의 결과가 최소 10배는 더욱 빠른 것을 알 수 있습니다.</p></li>
<li><p><strong>효율적인 메모리 처리</strong></p>
<p><code>data.table</code>은 다른 데이터 패키지보다 효율적으로 데이터연산을 처리합니다. 그렇기 때문에 메모리 사용에 있어서도 더 적은 양으로 더 빠르게 계산을 진행합니다.</p></li>
<li><p><strong>낮은 패키지 의존성</strong></p>
<p>패키지 의존성이라는 것은 특정 패키지를 불러오기 위해 또다른 패키지를 불러오는 것입니다. 우리가 배울 <code>data.table</code>은 R 사용자들에게 자주 활용되는 <code>tidyverse</code> 계열의 <code>dplyr</code>패키지보다 의존성이 훨씬 낮습니다. 그렇기 때문에 번거롭게 하나의 패키지를 사용하기 위해 다른 패키지들을 설치해줄 필요가 없습니다.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pbs.twimg.com/media/FJ5hZ-sXoA0acyu?format=jpg&amp;name=medium.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">dplyr vs data.table 패키지 의존성 비교</figcaption><p></p>
</figure>
</div></li>
</ul>
<hr>
</section>
<section id="data.table-함수" class="level2">
<h2 class="anchored" data-anchor-id="data.table-함수">2. data.table 함수</h2>
<p><code>data.table</code> 패키지에는 <code>data.table</code>에서 사용할 수 있는 고유의 함수들이 존재합니다. 여기서는 우선 앞으로 사용할 데이터를 불러오고 설정하기 위한 함수들을 우선 배워봅시다.</p>
<ul>
<li><code>fread()</code>: f(ast) + read의 의미입니다. 말그대로 빠르게 데이터를 불러오는 것(read)을 의미합니다. <code>.csv</code>, <code>.txt</code> 등의 확장자 이름을 가진 파일들을 불러올 수 있습니다.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(NHANES)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(NHANES)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>fread()</code>를 통해 불러온 파일의 <code>class</code>는 <code>data.table</code>입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.table" "data.frame"</code></pre>
</div>
</div>
<p><code>data.table</code>을 출력했을 때, <code>data.frame</code>과 다른 점은 크게 두 가지가 있습니다.</p>
<p><code>data.table</code>은 우선 모든 column에 대해 첫 5개, 마지막 5개의 행을 출력합니다.</p>
<p>또한 행의 번호에 <code>:</code>가 붙어 출력됩니다.</p>
<ul>
<li><code>fwrite()</code>: f(ast) + write 입니다. 말그대로 빠르게 데이터를 저장(write)합니다. <code>.csv</code>, <code>.txt</code> 등의 확장자 파일로 저장할 수 있습니다.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ID"               "SurveyYr"         "Gender"           "Age"             
 [5] "AgeDecade"        "AgeMonths"        "Race1"            "Race3"           
 [9] "Education"        "MaritalStatus"    "HHIncome"         "HHIncomeMid"     
[13] "Poverty"          "HomeRooms"        "HomeOwn"          "Work"            
[17] "Weight"           "Length"           "HeadCirc"         "Height"          
[21] "BMI"              "BMICatUnder20yrs" "BMI_WHO"          "Pulse"           
[25] "BPSysAve"         "BPDiaAve"         "BPSys1"           "BPDia1"          
[29] "BPSys2"           "BPDia2"           "BPSys3"           "BPDia3"          
[33] "Testosterone"     "DirectChol"       "TotChol"          "UrineVol1"       
[37] "UrineFlow1"       "UrineVol2"        "UrineFlow2"       "Diabetes"        
[41] "DiabetesAge"      "HealthGen"        "DaysPhysHlthBad"  "DaysMentHlthBad" 
[45] "LittleInterest"   "Depressed"        "nPregnancies"     "nBabies"         
[49] "Age1stBaby"       "SleepHrsNight"    "SleepTrouble"     "PhysActive"      
[53] "PhysActiveDays"   "TVHrsDay"         "CompHrsDay"       "TVHrsDayChild"   
[57] "CompHrsDayChild"  "Alcohol12PlusYr"  "AlcoholDay"       "AlcoholYear"     
[61] "SmokeNow"         "Smoke100"         "Smoke100n"        "SmokeAge"        
[65] "Marijuana"        "AgeFirstMarij"    "RegularMarij"     "AgeRegMarij"     
[69] "HardDrugs"        "SexEver"          "SexAge"           "SexNumPartnLife" 
[73] "SexNumPartYear"   "SameSex"          "SexOrientation"   "PregnantNow"     </code></pre>
</div>
</div>
<ul>
<li><code>setnames()</code>: column 이름을 사용자가 알아보기 쉽게끔 변경해야 할 때가 있습니다. <code>setnames()</code>는 column의 이름을 변경하는 함수입니다. column의 이름을 하나만 바꾸고 싶은 경우에는 문자열 하나만 넣어주면 되고, 여러 개의 column 이름을 동시에 변경할 때는 문자 벡터를 넣어주면 됩니다.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 하나의 column 이름을 변경할 때</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(dt, <span class="at">old=</span><span class="st">'Gender'</span>, <span class="at">new=</span><span class="st">'gender'</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 여러 개의 column 이름을 동시에 변경할 때</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(dt,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">old =</span> <span class="fu">c</span>(<span class="st">'Age'</span>,<span class="st">'Race1'</span>,<span class="st">'Education'</span>),<span class="co"># 바꿔줄 기존의 column 이름</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">new =</span> <span class="fu">c</span>(<span class="st">'age'</span>,<span class="st">'race'</span>,<span class="st">'education'</span>) <span class="co"># 새로운 column 이름</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>data.frame</code> 등을 <code>data.table</code>로 변경하기</p>
<p>새롭게 파일을 불러오는 것 뿐만 아니라 기존의 <code>data.frame</code>을 <code>data.table</code> 형태로 변경해줄 수 있습니다.</p>
<ul>
<li><p><code>setDT()</code> : 영구적으로 <code>data.table</code> 형태로 <strong>저장</strong>합니다. 저장된 값을 따로 출력하지는 않습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># setDT()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p><code>as.data.table()</code> : 일시적으로 <code>data.table</code> 형태로 <strong>출력</strong>합니다. 출력된 데이터가 저장되지는 않습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(data.table)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.table</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
            &lt;num&gt;       &lt;num&gt;        &lt;num&gt;       &lt;num&gt;    &lt;fctr&gt;
  1:          5.1         3.5          1.4         0.2    setosa
  2:          4.9         3.0          1.4         0.2    setosa
  3:          4.7         3.2          1.3         0.2    setosa
  4:          4.6         3.1          1.5         0.2    setosa
  5:          5.0         3.6          1.4         0.2    setosa
 ---                                                            
146:          6.7         3.0          5.2         2.3 virginica
147:          6.3         2.5          5.0         1.9 virginica
148:          6.5         3.0          5.2         2.0 virginica
149:          6.2         3.4          5.4         2.3 virginica
150:          5.9         3.0          5.1         1.8 virginica</code></pre>
</div>
</div></li>
</ul></li>
</ul>
<hr>
</section>
<section id="i-data.table-행" class="level2">
<h2 class="anchored" data-anchor-id="i-data.table-행">3. i: data.table 행</h2>
<p><code>data.table</code>에서 행(row)을 다루는 부분을 <code>i</code> 라고 부릅니다 (왜 i가 된건지는 모르겠습니다).</p>
<p><code>data.table</code>에서 행을 다룬다는 것은 <u>특정한 조건을 만족하는 행들을 추출 또는 선택</u>(filtering)한다는 것과 같습니다.</p>
<p>자, 이제 <code>data.table</code>에서 행을 다루는 방법을 살펴보겠습니다.</p>
<section id="논리-연산자를-이용한-row-filtering" class="level3">
<h3 class="anchored" data-anchor-id="논리-연산자를-이용한-row-filtering">1) 논리 연산자를 이용한 row filtering</h3>
<p><code>data.frame</code> 의 행을 다루는 부분에서도 배웠지만, 기본적으로 i에서는 논리 연산자를 이용해 행을 선택합니다. 논리 연산자의 조건을 만족하는 행들, 즉 논리 연산자의 실행 결과가 <code>TRUE</code> 인 행들만 추출하는 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dt[age<span class="sc">&gt;=</span><span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   2: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   3: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   4: 51630  2009_10 female    49     40-49       596  White   &lt;NA&gt;
   5: 51647  2009_10 female    45     40-49       541  White   &lt;NA&gt;
  ---                                                              
5875: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
5876: 71908  2011_12 female    66     60-69        NA  White  White
5877: 71908  2011_12 female    66     60-69        NA  White  White
5878: 71915  2011_12   male    60     60-69        NA  White  White
5879: 71915  2011_12   male    60     60-69        NA  White  White
         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
            &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:  High School       Married 25000-34999       30000    1.36         6
   2:  High School       Married 25000-34999       30000    1.36         6
   3:  High School       Married 25000-34999       30000    1.36         6
   4: Some College   LivePartner 35000-44999       40000    1.91         5
   5: College Grad       Married 75000-99999       87500    5.00         6
  ---                                                                     
5875:  High School       Married 55000-64999       60000    4.08         6
5876: College Grad       Widowed 65000-74999       70000    4.55         8
5877: College Grad       Widowed 65000-74999       70000    4.55         8
5878: College Grad  NeverMarried 65000-74999       70000    5.00         4
5879: College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             &lt;NA&gt;
   5:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
  ---                                                                        
5875:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
5876:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
5877:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
5878:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
5879:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    70      113       85    114     88    114     88    112
   2:    30.0_plus    70      113       85    114     88    114     88    112
   3:    30.0_plus    70      113       85    114     88    114     88    112
   4:    30.0_plus    86      112       75    118     82    108     74    116
   5: 25.0_to_29.9    62      118       64    106     62    118     68    118
  ---                                                                        
5875: 18.5_to_24.9    54      148       70    150     72    150     70    146
5876:    30.0_plus    76      114       70    110     74    114     68    114
5877:    30.0_plus    76      114       70    110     74    114     68    114
5878: 25.0_to_29.9    76      147       73    150     72    148     74    146
5879: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     82           NA       1.29    3.49       352         NA        NA
   2:     82           NA       1.29    3.49       352         NA        NA
   3:     82           NA       1.29    3.49       352         NA        NA
   4:     76           NA       1.16    6.70        77      0.094        NA
   5:     60           NA       2.12    5.82       106      1.116        NA
  ---                                                                      
5875:     70       402.90       1.27    4.37        61      1.052        NA
5876:     72        26.00       1.86    6.47        29      0.659        94
5877:     72        26.00       1.86    6.47        29      0.659        94
5878:     72       505.13       0.93    4.94       218      1.253        NA
5879:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              15
   2:         NA       No          NA      Good               0              15
   3:         NA       No          NA      Good               0              15
   4:         NA       No          NA      Good               0              10
   5:         NA       No          NA     Vgood               0               3
  ---                                                                          
5875:         NA       No          NA      Good               0               0
5876:      0.627       No          NA Excellent               0               0
5877:      0.627       No          NA Excellent               0               0
5878:         NA      Yes          56      Good               0               2
5879:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           Most   Several           NA      NA         NA             4
   2:           Most   Several           NA      NA         NA             4
   3:           Most   Several           NA      NA         NA             4
   4:        Several   Several            2       2         27             8
   5:           None      None            1      NA         NA             8
  ---                                                                       
5875:           None      None           NA      NA         NA             5
5876:           None      None            2       2         22             6
5877:           None      None            2       2         22             6
5878:           None      None           NA      NA         NA             6
5879:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   4:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   5:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                         
5875:           No        Yes              7     3_hr      0_hrs            NA
5876:           No         No              5     2_hr  0_to_1_hr            NA
5877:           No         No             NA     2_hr  0_to_1_hr            NA
5878:           No         No              1     2_hr       1_hr            NA
5879:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes         NA           0       No      Yes
   2:              NA             Yes         NA           0       No      Yes
   3:              NA             Yes         NA           0       No      Yes
   4:              NA             Yes          2          20      Yes      Yes
   5:              NA             Yes          3          52     &lt;NA&gt;       No
  ---                                                                         
5875:              NA             Yes         NA           0     &lt;NA&gt;       No
5876:              NA              No          1           5     &lt;NA&gt;       No
5877:              NA              No          1           5     &lt;NA&gt;       No
5878:              NA             Yes         NA           0     &lt;NA&gt;       No
5879:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       18       Yes            17           No          NA
   2:     Smoker       18       Yes            17           No          NA
   3:     Smoker       18       Yes            17           No          NA
   4:     Smoker       38       Yes            18           No          NA
   5: Non-Smoker       NA       Yes            13           No          NA
  ---                                                                     
5875: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5876: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5877: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5878: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5879: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     16               8              1      No
   2:       Yes     Yes     16               8              1      No
   3:       Yes     Yes     16               8              1      No
   4:       Yes     Yes     12              10              1     Yes
   5:        No     Yes     13              20              0     Yes
  ---                                                                
5875:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
5876:        No     Yes     18               1             NA      No
5877:        No     Yes     18               1             NA      No
5878:        No     Yes     19               2             NA      No
5879:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:   Heterosexual        &lt;NA&gt;
   5:       Bisexual        &lt;NA&gt;
  ---                           
5875:           &lt;NA&gt;        &lt;NA&gt;
5876:           &lt;NA&gt;        &lt;NA&gt;
5877:           &lt;NA&gt;        &lt;NA&gt;
5878:           &lt;NA&gt;        &lt;NA&gt;
5879:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dt[gender<span class="sc">==</span><span class="st">'male'</span> <span class="sc">&amp;</span> age<span class="sc">&gt;=</span><span class="dv">45</span>] <span class="co"># 남성이고 45세 이상</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51654  2009_10   male    66     60-69       795  White   &lt;NA&gt;
   2: 51656  2009_10   male    58     50-59       707  White   &lt;NA&gt;
   3: 51657  2009_10   male    54     50-59       654  White   &lt;NA&gt;
   4: 51667  2009_10   male    50     50-59       603  White   &lt;NA&gt;
   5: 51678  2009_10   male    60     60-69       721  White   &lt;NA&gt;
  ---                                                              
1839: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
1840: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
1841: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
1842: 71915  2011_12   male    60     60-69        NA  White  White
1843: 71915  2011_12   male    60     60-69        NA  White  White
           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
              &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:   Some College       Married 25000-34999       30000    2.20         5
   2:   College Grad      Divorced  more 99999      100000    5.00        10
   3: 9 - 11th Grade       Married 65000-74999       70000    2.20         6
   4:   Some College  NeverMarried 15000-19999       17500    1.24         4
   5:    High School       Married 15000-19999       17500    1.03         5
  ---                                                                       
1839:    High School       Married 55000-64999       60000    4.08         6
1840:    High School       Married 55000-64999       60000    4.08         6
1841:    High School       Married 55000-64999       60000    4.08         6
1842:   College Grad  NeverMarried 65000-74999       70000    5.00         4
1843:   College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   68.0     NA       NA  169.5 23.67             &lt;NA&gt;
   2:    Rent    Working   78.4     NA       NA  181.9 23.69             &lt;NA&gt;
   3:    Rent    Working   74.7     NA       NA  169.4 26.03             &lt;NA&gt;
   4:    Rent    Looking   84.1     NA       NA  177.8 26.60             &lt;NA&gt;
   5:     Own    Working   74.6     NA       NA  169.9 25.84             &lt;NA&gt;
  ---                                                                        
1839:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
1840:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
1841:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
1842:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
1843:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1: 18.5_to_24.9    60      111       63    124     64    108     62    114
   2: 18.5_to_24.9    62      104       74    108     76    104     72    104
   3: 25.0_to_29.9    76      134       85    136     86    132     88    136
   4: 25.0_to_29.9    74      142       68    138     66    142     74    142
   5: 25.0_to_29.9    84      152      100    154     98    150     98    154
  ---                                                                        
1839: 18.5_to_24.9    54      148       70    150     72    150     70    146
1840: 18.5_to_24.9    54      148       70    150     72    150     70    146
1841: 18.5_to_24.9    54      148       70    150     72    150     70    146
1842: 25.0_to_29.9    76      147       73    150     72    148     74    146
1843: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     64           NA       0.67    4.99       113      0.489        NA
   2:     76           NA       0.96    4.24       163         NA        NA
   3:     82           NA       1.16    6.41       215      0.903        NA
   4:     62           NA       1.06    5.22        64      0.190        NA
   5:    102           NA       1.34    6.39       238         NA        NA
  ---                                                                      
1839:     70       402.90       1.27    4.37        61      1.052        NA
1840:     70       402.90       1.27    4.37        61      1.052        NA
1841:     70       402.90       1.27    4.37        61      1.052        NA
1842:     72       505.13       0.93    4.94       218      1.253        NA
1843:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA     Vgood              10               0
   2:         NA       No          NA     Vgood               0               0
   3:         NA       No          NA      Fair               4               0
   4:         NA       No          NA      Good               0               0
   5:         NA       No          NA     Vgood               7               0
  ---                                                                          
1839:         NA       No          NA      Good               0               0
1840:         NA       No          NA      Good               0               0
1841:         NA       No          NA      Good               0               0
1842:         NA      Yes          56      Good               0               2
1843:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           None      None           NA      NA         NA             7
   2:           None      None           NA      NA         NA             5
   3:           None      None           NA      NA         NA             4
   4:           None      None           NA      NA         NA             7
   5:           None      None           NA      NA         NA             6
  ---                                                                       
1839:           None      None           NA      NA         NA             5
1840:           None      None           NA      NA         NA             5
1841:           None      None           NA      NA         NA             5
1842:           None      None           NA      NA         NA             6
1843:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:           No        Yes              7     &lt;NA&gt;       &lt;NA&gt;            NA
   2:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes        Yes              1     &lt;NA&gt;       &lt;NA&gt;            NA
   4:           No        Yes              7     &lt;NA&gt;       &lt;NA&gt;            NA
   5:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                         
1839:           No        Yes             NA     3_hr      0_hrs            NA
1840:           No        Yes              4     3_hr      0_hrs            NA
1841:           No        Yes              7     3_hr      0_hrs            NA
1842:           No         No              1     2_hr       1_hr            NA
1843:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes          1         100       No      Yes
   2:              NA             Yes          2         104     &lt;NA&gt;       No
   3:              NA             Yes          6         364     &lt;NA&gt;       No
   4:              NA              No         NA           0     &lt;NA&gt;       No
   5:              NA             Yes          6          36       No      Yes
  ---                                                                         
1839:              NA             Yes         NA           0     &lt;NA&gt;       No
1840:              NA             Yes         NA           0     &lt;NA&gt;       No
1841:              NA             Yes         NA           0     &lt;NA&gt;       No
1842:              NA             Yes         NA           0     &lt;NA&gt;       No
1843:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       13      &lt;NA&gt;            NA         &lt;NA&gt;          NA
   2: Non-Smoker       NA       Yes            19          Yes          20
   3: Non-Smoker       NA       Yes            15          Yes          15
   4: Non-Smoker       NA        No            NA           No          NA
   5:     Smoker       16      &lt;NA&gt;            NA         &lt;NA&gt;          NA
  ---                                                                     
1839: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
1840: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
1841: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
1842: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
1843: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:        No     Yes     17              15             NA      No
   2:       Yes     Yes     22               7              1      No
   3:       Yes     Yes     12             100              1      No
   4:        No     Yes     NA               9              1      No
   5:        No     Yes     20               1             NA      No
  ---                                                                
1839:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
1840:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
1841:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
1842:        No     Yes     19               2             NA      No
1843:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:           &lt;NA&gt;        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:   Heterosexual        &lt;NA&gt;
   5:           &lt;NA&gt;        &lt;NA&gt;
  ---                           
1839:           &lt;NA&gt;        &lt;NA&gt;
1840:           &lt;NA&gt;        &lt;NA&gt;
1841:           &lt;NA&gt;        &lt;NA&gt;
1842:           &lt;NA&gt;        &lt;NA&gt;
1843:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dt[gender<span class="sc">==</span><span class="st">'female'</span> <span class="sc">|</span> age<span class="sc">&gt;=</span><span class="dv">50</span>] <span class="co">#여성 또는 50세 이상</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51630  2009_10 female    49     40-49       596  White   &lt;NA&gt;
   2: 51647  2009_10 female    45     40-49       541  White   &lt;NA&gt;
   3: 51647  2009_10 female    45     40-49       541  White   &lt;NA&gt;
   4: 51647  2009_10 female    45     40-49       541  White   &lt;NA&gt;
   5: 51654  2009_10   male    66     60-69       795  White   &lt;NA&gt;
  ---                                                              
6515: 71908  2011_12 female    66     60-69        NA  White  White
6516: 71908  2011_12 female    66     60-69        NA  White  White
6517: 71910  2011_12 female     0       0-9         5  White  White
6518: 71915  2011_12   male    60     60-69        NA  White  White
6519: 71915  2011_12   male    60     60-69        NA  White  White
         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
            &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1: Some College   LivePartner 35000-44999       40000    1.91         5
   2: College Grad       Married 75000-99999       87500    5.00         6
   3: College Grad       Married 75000-99999       87500    5.00         6
   4: College Grad       Married 75000-99999       87500    5.00         6
   5: Some College       Married 25000-34999       30000    2.20         5
  ---                                                                     
6515: College Grad       Widowed 65000-74999       70000    4.55         8
6516: College Grad       Widowed 65000-74999       70000    4.55         8
6517:         &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    3.37        10
6518: College Grad  NeverMarried 65000-74999       70000    5.00         4
6519: College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:    Rent NotWorking   86.7     NA       NA  168.4 30.57             &lt;NA&gt;
   2:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
   3:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
   4:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
   5:     Own NotWorking   68.0     NA       NA  169.5 23.67             &lt;NA&gt;
  ---                                                                        
6515:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
6516:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
6517:     Own       &lt;NA&gt;    6.7   67.6     42.2     NA    NA             &lt;NA&gt;
6518:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
6519:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    86      112       75    118     82    108     74    116
   2: 25.0_to_29.9    62      118       64    106     62    118     68    118
   3: 25.0_to_29.9    62      118       64    106     62    118     68    118
   4: 25.0_to_29.9    62      118       64    106     62    118     68    118
   5: 18.5_to_24.9    60      111       63    124     64    108     62    114
  ---                                                                        
6515:    30.0_plus    76      114       70    110     74    114     68    114
6516:    30.0_plus    76      114       70    110     74    114     68    114
6517:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
6518: 25.0_to_29.9    76      147       73    150     72    148     74    146
6519: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     76           NA       1.16    6.70        77      0.094        NA
   2:     60           NA       2.12    5.82       106      1.116        NA
   3:     60           NA       2.12    5.82       106      1.116        NA
   4:     60           NA       2.12    5.82       106      1.116        NA
   5:     64           NA       0.67    4.99       113      0.489        NA
  ---                                                                      
6515:     72        26.00       1.86    6.47        29      0.659        94
6516:     72        26.00       1.86    6.47        29      0.659        94
6517:     NA           NA         NA      NA        NA         NA        NA
6518:     72       505.13       0.93    4.94       218      1.253        NA
6519:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              10
   2:         NA       No          NA     Vgood               0               3
   3:         NA       No          NA     Vgood               0               3
   4:         NA       No          NA     Vgood               0               3
   5:         NA       No          NA     Vgood              10               0
  ---                                                                          
6515:      0.627       No          NA Excellent               0               0
6516:      0.627       No          NA Excellent               0               0
6517:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA              NA
6518:         NA      Yes          56      Good               0               2
6519:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:        Several   Several            2       2         27             8
   2:           None      None            1      NA         NA             8
   3:           None      None            1      NA         NA             8
   4:           None      None            1      NA         NA             8
   5:           None      None           NA      NA         NA             7
  ---                                                                       
6515:           None      None            2       2         22             6
6516:           None      None            2       2         22             6
6517:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
6518:           None      None           NA      NA         NA             6
6519:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
   3:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
   4:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
   5:           No        Yes              7     &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                         
6515:           No         No              5     2_hr  0_to_1_hr            NA
6516:           No         No             NA     2_hr  0_to_1_hr            NA
6517:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;            NA
6518:           No         No              1     2_hr       1_hr            NA
6519:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes          2          20      Yes      Yes
   2:              NA             Yes          3          52     &lt;NA&gt;       No
   3:              NA             Yes          3          52     &lt;NA&gt;       No
   4:              NA             Yes          3          52     &lt;NA&gt;       No
   5:              NA             Yes          1         100       No      Yes
  ---                                                                         
6515:              NA              No          1           5     &lt;NA&gt;       No
6516:              NA              No          1           5     &lt;NA&gt;       No
6517:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
6518:              NA             Yes         NA           0     &lt;NA&gt;       No
6519:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       38       Yes            18           No          NA
   2: Non-Smoker       NA       Yes            13           No          NA
   3: Non-Smoker       NA       Yes            13           No          NA
   4: Non-Smoker       NA       Yes            13           No          NA
   5:     Smoker       13      &lt;NA&gt;            NA         &lt;NA&gt;          NA
  ---                                                                     
6515: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6516: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6517:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6518: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6519: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     12              10              1     Yes
   2:        No     Yes     13              20              0     Yes
   3:        No     Yes     13              20              0     Yes
   4:        No     Yes     13              20              0     Yes
   5:        No     Yes     17              15             NA      No
  ---                                                                
6515:        No     Yes     18               1             NA      No
6516:        No     Yes     18               1             NA      No
6517:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
6518:        No     Yes     19               2             NA      No
6519:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:       Bisexual        &lt;NA&gt;
   3:       Bisexual        &lt;NA&gt;
   4:       Bisexual        &lt;NA&gt;
   5:           &lt;NA&gt;        &lt;NA&gt;
  ---                           
6515:           &lt;NA&gt;        &lt;NA&gt;
6516:           &lt;NA&gt;        &lt;NA&gt;
6517:           &lt;NA&gt;        &lt;NA&gt;
6518:           &lt;NA&gt;        &lt;NA&gt;
6519:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
<p>이처럼 <code>&amp;</code>나 <code>|</code>를 붙여주면, 여러 조건을 사용하여 원하는 행들을 추출할 수 있습니다.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
행을 다룰 때 data.table과 data.frame의 차이점
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>data.frame</code>과 달리 <code>data.table</code> 문법에서는, 대괄호 안에서 column을 <code>df$var</code> 양식으로 사용하지 않아도 됩니다. 그냥 column의 이름만 사용하면 됩니다.</p>
<p>또한 <code>data.frame</code>에서는 행 부분을 입력할 때, 꼭 <code>,</code> 를 붙여줘야 했습니다. 그러나 <code>data.table</code>의 경우 행만 filtering 할 때, 굳이 <code>,</code>을 붙여줄 필요가 없습니다.</p>
<p>어떤가요? <code>data.table</code>이 훨씬 더 간단하죠? 😃</p>
</div>
</div>
</section>
<section id="infix-연산자를-이용한-row-filtering" class="level3">
<h3 class="anchored" data-anchor-id="infix-연산자를-이용한-row-filtering">2) Infix 연산자를 이용한 row filtering</h3>
<p><code>data.table</code>에서는 논리 연산자 뿐만 아니라 infix 연산자를 이용하여, 조건을 충족시키는 행을 선택할 수 있습니다. 파이프 연산자 역시 조건을 만족하는 경우인 <code>TRUE</code> 에 해당하는 값들만 선택합니다.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Infix 연산자란?
</div>
</div>
<div class="callout-body-container callout-body">
<p>infix 연산자는 함수 피연산자의 양쪽에 있는 인수에 계산을 적용하는 기능을 제공합니다.</p>
</div>
</div>
<ul>
<li><p><code>A %in% B</code>: A가 B 안에 있는지 확인합니다. 이 때 B는 <code>vector</code>가 옵니다. 문자를 확인하는 경우에는 <code>%chin%</code> 을 이용해 더욱 빠르게 계산할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dt[race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'Black'</span>,<span class="st">'White'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   2: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   3: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   4: 51630  2009_10 female    49     40-49       596  White   &lt;NA&gt;
   5: 51638  2009_10   male     9       0-9       115  White   &lt;NA&gt;
  ---                                                              
7565: 71908  2011_12 female    66     60-69        NA  White  White
7566: 71908  2011_12 female    66     60-69        NA  White  White
7567: 71910  2011_12 female     0       0-9         5  White  White
7568: 71915  2011_12   male    60     60-69        NA  White  White
7569: 71915  2011_12   male    60     60-69        NA  White  White
         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
            &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:  High School       Married 25000-34999       30000    1.36         6
   2:  High School       Married 25000-34999       30000    1.36         6
   3:  High School       Married 25000-34999       30000    1.36         6
   4: Some College   LivePartner 35000-44999       40000    1.91         5
   5:         &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    1.84         6
  ---                                                                     
7565: College Grad       Widowed 65000-74999       70000    4.55         8
7566: College Grad       Widowed 65000-74999       70000    4.55         8
7567:         &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    3.37        10
7568: College Grad  NeverMarried 65000-74999       70000    5.00         4
7569: College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             &lt;NA&gt;
   5:    Rent       &lt;NA&gt;   29.8     NA       NA  133.1 16.82             &lt;NA&gt;
  ---                                                                        
7565:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
7566:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
7567:     Own       &lt;NA&gt;    6.7   67.6     42.2     NA    NA             &lt;NA&gt;
7568:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
7569:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    70      113       85    114     88    114     88    112
   2:    30.0_plus    70      113       85    114     88    114     88    112
   3:    30.0_plus    70      113       85    114     88    114     88    112
   4:    30.0_plus    86      112       75    118     82    108     74    116
   5:    12.0_18.5    82       86       47     84     50     84     50     88
  ---                                                                        
7565:    30.0_plus    76      114       70    110     74    114     68    114
7566:    30.0_plus    76      114       70    110     74    114     68    114
7567:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
7568: 25.0_to_29.9    76      147       73    150     72    148     74    146
7569: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     82           NA       1.29    3.49       352         NA        NA
   2:     82           NA       1.29    3.49       352         NA        NA
   3:     82           NA       1.29    3.49       352         NA        NA
   4:     76           NA       1.16    6.70        77      0.094        NA
   5:     44           NA       1.34    4.86       123      1.538        NA
  ---                                                                      
7565:     72        26.00       1.86    6.47        29      0.659        94
7566:     72        26.00       1.86    6.47        29      0.659        94
7567:     NA           NA         NA      NA        NA         NA        NA
7568:     72       505.13       0.93    4.94       218      1.253        NA
7569:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              15
   2:         NA       No          NA      Good               0              15
   3:         NA       No          NA      Good               0              15
   4:         NA       No          NA      Good               0              10
   5:         NA       No          NA      &lt;NA&gt;              NA              NA
  ---                                                                          
7565:      0.627       No          NA Excellent               0               0
7566:      0.627       No          NA Excellent               0               0
7567:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA              NA
7568:         NA      Yes          56      Good               0               2
7569:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           Most   Several           NA      NA         NA             4
   2:           Most   Several           NA      NA         NA             4
   3:           Most   Several           NA      NA         NA             4
   4:        Several   Several            2       2         27             8
   5:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
  ---                                                                       
7565:           None      None            2       2         22             6
7566:           None      None            2       2         22             6
7567:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
7568:           None      None           NA      NA         NA             6
7569:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   4:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   5:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;             5
  ---                                                                         
7565:           No         No              5     2_hr  0_to_1_hr            NA
7566:           No         No             NA     2_hr  0_to_1_hr            NA
7567:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;            NA
7568:           No         No              1     2_hr       1_hr            NA
7569:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes         NA           0       No      Yes
   2:              NA             Yes         NA           0       No      Yes
   3:              NA             Yes         NA           0       No      Yes
   4:              NA             Yes          2          20      Yes      Yes
   5:               0            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
  ---                                                                         
7565:              NA              No          1           5     &lt;NA&gt;       No
7566:              NA              No          1           5     &lt;NA&gt;       No
7567:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
7568:              NA             Yes         NA           0     &lt;NA&gt;       No
7569:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       18       Yes            17           No          NA
   2:     Smoker       18       Yes            17           No          NA
   3:     Smoker       18       Yes            17           No          NA
   4:     Smoker       38       Yes            18           No          NA
   5:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
  ---                                                                     
7565: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7566: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7567:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7568: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7569: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     16               8              1      No
   2:       Yes     Yes     16               8              1      No
   3:       Yes     Yes     16               8              1      No
   4:       Yes     Yes     12              10              1     Yes
   5:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
  ---                                                                
7565:        No     Yes     18               1             NA      No
7566:        No     Yes     18               1             NA      No
7567:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
7568:        No     Yes     19               2             NA      No
7569:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:   Heterosexual        &lt;NA&gt;
   5:           &lt;NA&gt;        &lt;NA&gt;
  ---                           
7565:           &lt;NA&gt;        &lt;NA&gt;
7566:           &lt;NA&gt;        &lt;NA&gt;
7567:           &lt;NA&gt;        &lt;NA&gt;
7568:           &lt;NA&gt;        &lt;NA&gt;
7569:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div></li>
<li><p><code>A %like% B</code>: A가 B와 비슷한지 확인합니다. 이 때 B에는 보통 문자열(<code>character</code>)이 옵니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dt[MaritalStatus <span class="sc">%like%</span> <span class="st">'Married'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths    race   Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt;  &lt;fctr&gt;  &lt;fctr&gt;
   1: 51624  2009_10   male    34     30-39       409   White    &lt;NA&gt;
   2: 51624  2009_10   male    34     30-39       409   White    &lt;NA&gt;
   3: 51624  2009_10   male    34     30-39       409   White    &lt;NA&gt;
   4: 51647  2009_10 female    45     40-49       541   White    &lt;NA&gt;
   5: 51647  2009_10 female    45     40-49       541   White    &lt;NA&gt;
  ---                                                                
5321: 71909  2011_12   male    28     20-29        NA Mexican Mexican
5322: 71909  2011_12   male    28     20-29        NA Mexican Mexican
5323: 71911  2011_12   male    27     20-29        NA Mexican Mexican
5324: 71915  2011_12   male    60     60-69        NA   White   White
5325: 71915  2011_12   male    60     60-69        NA   White   White
           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
              &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:    High School       Married 25000-34999       30000    1.36         6
   2:    High School       Married 25000-34999       30000    1.36         6
   3:    High School       Married 25000-34999       30000    1.36         6
   4:   College Grad       Married 75000-99999       87500    5.00         6
   5:   College Grad       Married 75000-99999       87500    5.00         6
  ---                                                                       
5321: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3
5322: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3
5323:   College Grad       Married 75000-99999       87500    3.25        10
5324:   College Grad  NeverMarried 65000-74999       70000    5.00         4
5325:   College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   4:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
   5:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
  ---                                                                        
5321:    Rent    Working   92.3     NA       NA  177.3 29.40             &lt;NA&gt;
5322:    Rent    Working   92.3     NA       NA  177.3 29.40             &lt;NA&gt;
5323:     Own    Working   96.7     NA       NA  175.8 31.30             &lt;NA&gt;
5324:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
5325:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    70      113       85    114     88    114     88    112
   2:    30.0_plus    70      113       85    114     88    114     88    112
   3:    30.0_plus    70      113       85    114     88    114     88    112
   4: 25.0_to_29.9    62      118       64    106     62    118     68    118
   5: 25.0_to_29.9    62      118       64    106     62    118     68    118
  ---                                                                        
5321: 25.0_to_29.9    68      124       65    124     62    126     64    122
5322: 25.0_to_29.9    68      124       65    124     62    126     64    122
5323:    30.0_plus    74      133       74    122     76    132     82    134
5324: 25.0_to_29.9    76      147       73    150     72    148     74    146
5325: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     82           NA       1.29    3.49       352         NA        NA
   2:     82           NA       1.29    3.49       352         NA        NA
   3:     82           NA       1.29    3.49       352         NA        NA
   4:     60           NA       2.12    5.82       106      1.116        NA
   5:     60           NA       2.12    5.82       106      1.116        NA
  ---                                                                      
5321:     66       490.43       1.22    3.90        97      0.942        NA
5322:     66       490.43       1.22    3.90        97      0.942        NA
5323:     66       509.00       1.06    5.72        63      0.600        NA
5324:     72       505.13       0.93    4.94       218      1.253        NA
5325:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              15
   2:         NA       No          NA      Good               0              15
   3:         NA       No          NA      Good               0              15
   4:         NA       No          NA     Vgood               0               3
   5:         NA       No          NA     Vgood               0               3
  ---                                                                          
5321:         NA       No          NA      &lt;NA&gt;              NA              NA
5322:         NA       No          NA      &lt;NA&gt;              NA              NA
5323:         NA       No          NA      Good               0               2
5324:         NA      Yes          56      Good               0               2
5325:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           Most   Several           NA      NA         NA             4
   2:           Most   Several           NA      NA         NA             4
   3:           Most   Several           NA      NA         NA             4
   4:           None      None            1      NA         NA             8
   5:           None      None            1      NA         NA             8
  ---                                                                       
5321:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             6
5322:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             6
5323:           None      None           NA      NA         NA             6
5324:           None      None           NA      NA         NA             6
5325:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   4:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
   5:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                         
5321:           No        Yes             NA     1_hr       2_hr            NA
5322:           No        Yes             NA     1_hr       2_hr            NA
5323:           No         No              3     1_hr  0_to_1_hr            NA
5324:           No         No              1     2_hr       1_hr            NA
5325:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes         NA           0       No      Yes
   2:              NA             Yes         NA           0       No      Yes
   3:              NA             Yes         NA           0       No      Yes
   4:              NA             Yes          3          52     &lt;NA&gt;       No
   5:              NA             Yes          3          52     &lt;NA&gt;       No
  ---                                                                         
5321:              NA            &lt;NA&gt;         NA          NA      Yes      Yes
5322:              NA            &lt;NA&gt;         NA          NA      Yes      Yes
5323:              NA             Yes          5           4     &lt;NA&gt;       No
5324:              NA             Yes         NA           0     &lt;NA&gt;       No
5325:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       18       Yes            17           No          NA
   2:     Smoker       18       Yes            17           No          NA
   3:     Smoker       18       Yes            17           No          NA
   4: Non-Smoker       NA       Yes            13           No          NA
   5: Non-Smoker       NA       Yes            13           No          NA
  ---                                                                     
5321:     Smoker       18      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5322:     Smoker       18      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5323: Non-Smoker       NA       Yes            22           No          NA
5324: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5325: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     16               8              1      No
   2:       Yes     Yes     16               8              1      No
   3:       Yes     Yes     16               8              1      No
   4:        No     Yes     13              20              0     Yes
   5:        No     Yes     13              20              0     Yes
  ---                                                                
5321:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
5322:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
5323:        No     Yes     21               1              1      No
5324:        No     Yes     19               2             NA      No
5325:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:       Bisexual        &lt;NA&gt;
   5:       Bisexual        &lt;NA&gt;
  ---                           
5321:           &lt;NA&gt;        &lt;NA&gt;
5322:           &lt;NA&gt;        &lt;NA&gt;
5323:   Heterosexual        &lt;NA&gt;
5324:           &lt;NA&gt;        &lt;NA&gt;
5325:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div></li>
<li><p><code>A %between% B</code>: A가 B 사이에 있는지 확인합니다. 이 때 B는 <code>c(0,10)</code>과 같은 범위로 지정합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dt[BMI <span class="sc">%between%</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">25</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51646  2009_10   male     8       0-9       101  White   &lt;NA&gt;
   2: 51654  2009_10   male    66     60-69       795  White   &lt;NA&gt;
   3: 51656  2009_10   male    58     50-59       707  White   &lt;NA&gt;
   4: 51679  2009_10   male    16     10-19       194  Other   &lt;NA&gt;
   5: 51691  2009_10 female    57     50-59       694  White   &lt;NA&gt;
  ---                                                              
2493: 71857  2011_12   male    39     30-39        NA  White  White
2494: 71879  2011_12   male    24     20-29        NA  Black  Black
2495: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
2496: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
2497: 71907  2011_12   male    80      &lt;NA&gt;        NA  White  White
         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
            &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:         &lt;NA&gt;          &lt;NA&gt; 55000-64999       60000    2.33         7
   2: Some College       Married 25000-34999       30000    2.20         5
   3: College Grad      Divorced  more 99999      100000    5.00        10
   4:         &lt;NA&gt;          &lt;NA&gt;        &lt;NA&gt;          NA      NA         7
   5:  High School       Married        &lt;NA&gt;          NA      NA         9
  ---                                                                     
2493: College Grad       Married  more 99999      100000    5.00         9
2494: Some College  NeverMarried   5000-9999        7500    0.51         1
2495:  High School       Married 55000-64999       60000    4.08         6
2496:  High School       Married 55000-64999       60000    4.08         6
2497:  High School       Married 55000-64999       60000    4.08         6
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own       &lt;NA&gt;   35.2     NA       NA  130.6 20.64             &lt;NA&gt;
   2:     Own NotWorking   68.0     NA       NA  169.5 23.67             &lt;NA&gt;
   3:    Rent    Working   78.4     NA       NA  181.9 23.69             &lt;NA&gt;
   4:     Own NotWorking   73.2     NA       NA  172.0 24.74             &lt;NA&gt;
   5:     Own    Working   51.0     NA       NA  157.1 20.66             &lt;NA&gt;
  ---                                                                        
2493:     Own    Working   73.4     NA       NA  175.7 23.80             &lt;NA&gt;
2494:    Rent NotWorking   76.0     NA       NA  184.1 22.40             &lt;NA&gt;
2495:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
2496:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
2497:     Own NotWorking   71.5     NA       NA  175.4 23.20             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1: 18.5_to_24.9    72      107       37    114     46    108     36    106
   2: 18.5_to_24.9    60      111       63    124     64    108     62    114
   3: 18.5_to_24.9    62      104       74    108     76    104     72    104
   4: 18.5_to_24.9    76      126       72    132     74    126     68    126
   5: 18.5_to_24.9    70      122       89    122     82    128     88    116
  ---                                                                        
2493: 18.5_to_24.9    70      118       81    120     80    118     80    118
2494: 18.5_to_24.9    88      129       61    122     62    126     60    132
2495: 18.5_to_24.9    54      148       70    150     72    150     70    146
2496: 18.5_to_24.9    54      148       70    150     72    150     70    146
2497: 18.5_to_24.9    54      148       70    150     72    150     70    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     38           NA       1.55    4.09       238      1.322        NA
   2:     64           NA       0.67    4.99       113      0.489        NA
   3:     76           NA       0.96    4.24       163         NA        NA
   4:     76           NA       1.14    3.00       345      1.742        NA
   5:     90           NA       1.53    5.04       133      2.293        NA
  ---                                                                      
2493:     82       360.15       1.50    4.19        25      0.676        82
2494:     62       485.69       1.68    5.51        74      0.679        NA
2495:     70       402.90       1.27    4.37        61      1.052        NA
2496:     70       402.90       1.27    4.37        61      1.052        NA
2497:     70       402.90       1.27    4.37        61      1.052        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      &lt;NA&gt;              NA              NA
   2:         NA       No          NA     Vgood              10               0
   3:         NA       No          NA     Vgood               0               0
   4:         NA       No          NA      Fair               0              20
   5:         NA       No          NA Excellent               0               0
  ---                                                                          
2493:       0.55       No          NA Excellent               0               5
2494:         NA       No          NA      &lt;NA&gt;              NA              NA
2495:         NA       No          NA      Good               0               0
2496:         NA       No          NA      Good               0               0
2497:         NA       No          NA      Good               0               0
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
   2:           None      None           NA      NA         NA             7
   3:           None      None           NA      NA         NA             5
   4:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             6
   5:           None      None            2       2         32             8
  ---                                                                       
2493:           None      None           NA      NA         NA             7
2494:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             8
2495:           None      None           NA      NA         NA             5
2496:           None      None           NA      NA         NA             5
2497:           None      None           NA      NA         NA             5
      SleepTrouble PhysActive PhysActiveDays  TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;    &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:         &lt;NA&gt;       &lt;NA&gt;             NA      &lt;NA&gt;       &lt;NA&gt;             1
   2:           No        Yes              7      &lt;NA&gt;       &lt;NA&gt;            NA
   3:           No        Yes              5      &lt;NA&gt;       &lt;NA&gt;            NA
   4:           No        Yes              3      &lt;NA&gt;       &lt;NA&gt;            NA
   5:           No        Yes              3      &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                          
2493:           No        Yes             NA More_4_hr  0_to_1_hr            NA
2494:           No         No             NA More_4_hr       4_hr            NA
2495:           No        Yes             NA      3_hr      0_hrs            NA
2496:           No        Yes              4      3_hr      0_hrs            NA
2497:           No        Yes              7      3_hr      0_hrs            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:               6            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
   2:              NA             Yes          1         100       No      Yes
   3:              NA             Yes          2         104     &lt;NA&gt;       No
   4:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
   5:              NA             Yes          1         312       No      Yes
  ---                                                                         
2493:              NA             Yes          2          52     &lt;NA&gt;       No
2494:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;       No
2495:              NA             Yes         NA           0     &lt;NA&gt;       No
2496:              NA             Yes         NA           0     &lt;NA&gt;       No
2497:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
   2:     Smoker       13      &lt;NA&gt;            NA         &lt;NA&gt;          NA
   3: Non-Smoker       NA       Yes            19          Yes          20
   4:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
   5:     Smoker       18       Yes            18           No          NA
  ---                                                                     
2493: Non-Smoker       NA       Yes            19           No          NA
2494: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
2495: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
2496: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
2497: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
   2:        No     Yes     17              15             NA      No
   3:       Yes     Yes     22               7              1      No
   4:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
   5:        No     Yes     18               5              1      No
  ---                                                                
2493:        No     Yes     17               5              1      No
2494:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
2495:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
2496:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
2497:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:           &lt;NA&gt;        &lt;NA&gt;
   2:           &lt;NA&gt;        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:           &lt;NA&gt;        &lt;NA&gt;
   5:   Heterosexual        &lt;NA&gt;
  ---                           
2493:   Heterosexual        &lt;NA&gt;
2494:           &lt;NA&gt;        &lt;NA&gt;
2495:           &lt;NA&gt;        &lt;NA&gt;
2496:           &lt;NA&gt;        &lt;NA&gt;
2497:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
파이프 연산자 대신 함수 이용하기
</div>
</div>
<div class="callout-body-container callout-body">
<p>위에서 소개해드린 %%을 이용한 파이프 연산자 말고도 data.table 패키지 내의 함수를 이용할 수도 있습니다.</p>
<p><code>%between%</code>은 <code>between()</code></p>
<p><code>%like%</code> 는 <code>like()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="fu">like</span>(race,<span class="st">'ite'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   2: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   3: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   4: 51630  2009_10 female    49     40-49       596  White   &lt;NA&gt;
   5: 51638  2009_10   male     9       0-9       115  White   &lt;NA&gt;
  ---                                                              
6368: 71908  2011_12 female    66     60-69        NA  White  White
6369: 71908  2011_12 female    66     60-69        NA  White  White
6370: 71910  2011_12 female     0       0-9         5  White  White
6371: 71915  2011_12   male    60     60-69        NA  White  White
6372: 71915  2011_12   male    60     60-69        NA  White  White
         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
            &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:  High School       Married 25000-34999       30000    1.36         6
   2:  High School       Married 25000-34999       30000    1.36         6
   3:  High School       Married 25000-34999       30000    1.36         6
   4: Some College   LivePartner 35000-44999       40000    1.91         5
   5:         &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    1.84         6
  ---                                                                     
6368: College Grad       Widowed 65000-74999       70000    4.55         8
6369: College Grad       Widowed 65000-74999       70000    4.55         8
6370:         &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    3.37        10
6371: College Grad  NeverMarried 65000-74999       70000    5.00         4
6372: College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             &lt;NA&gt;
   5:    Rent       &lt;NA&gt;   29.8     NA       NA  133.1 16.82             &lt;NA&gt;
  ---                                                                        
6368:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
6369:     Own    Working   88.7     NA       NA  159.0 35.10             &lt;NA&gt;
6370:     Own       &lt;NA&gt;    6.7   67.6     42.2     NA    NA             &lt;NA&gt;
6371:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
6372:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    70      113       85    114     88    114     88    112
   2:    30.0_plus    70      113       85    114     88    114     88    112
   3:    30.0_plus    70      113       85    114     88    114     88    112
   4:    30.0_plus    86      112       75    118     82    108     74    116
   5:    12.0_18.5    82       86       47     84     50     84     50     88
  ---                                                                        
6368:    30.0_plus    76      114       70    110     74    114     68    114
6369:    30.0_plus    76      114       70    110     74    114     68    114
6370:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
6371: 25.0_to_29.9    76      147       73    150     72    148     74    146
6372: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     82           NA       1.29    3.49       352         NA        NA
   2:     82           NA       1.29    3.49       352         NA        NA
   3:     82           NA       1.29    3.49       352         NA        NA
   4:     76           NA       1.16    6.70        77      0.094        NA
   5:     44           NA       1.34    4.86       123      1.538        NA
  ---                                                                      
6368:     72        26.00       1.86    6.47        29      0.659        94
6369:     72        26.00       1.86    6.47        29      0.659        94
6370:     NA           NA         NA      NA        NA         NA        NA
6371:     72       505.13       0.93    4.94       218      1.253        NA
6372:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              15
   2:         NA       No          NA      Good               0              15
   3:         NA       No          NA      Good               0              15
   4:         NA       No          NA      Good               0              10
   5:         NA       No          NA      &lt;NA&gt;              NA              NA
  ---                                                                          
6368:      0.627       No          NA Excellent               0               0
6369:      0.627       No          NA Excellent               0               0
6370:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA              NA
6371:         NA      Yes          56      Good               0               2
6372:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           Most   Several           NA      NA         NA             4
   2:           Most   Several           NA      NA         NA             4
   3:           Most   Several           NA      NA         NA             4
   4:        Several   Several            2       2         27             8
   5:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
  ---                                                                       
6368:           None      None            2       2         22             6
6369:           None      None            2       2         22             6
6370:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
6371:           None      None           NA      NA         NA             6
6372:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   4:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   5:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;             5
  ---                                                                         
6368:           No         No              5     2_hr  0_to_1_hr            NA
6369:           No         No             NA     2_hr  0_to_1_hr            NA
6370:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;            NA
6371:           No         No              1     2_hr       1_hr            NA
6372:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes         NA           0       No      Yes
   2:              NA             Yes         NA           0       No      Yes
   3:              NA             Yes         NA           0       No      Yes
   4:              NA             Yes          2          20      Yes      Yes
   5:               0            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
  ---                                                                         
6368:              NA              No          1           5     &lt;NA&gt;       No
6369:              NA              No          1           5     &lt;NA&gt;       No
6370:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
6371:              NA             Yes         NA           0     &lt;NA&gt;       No
6372:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       18       Yes            17           No          NA
   2:     Smoker       18       Yes            17           No          NA
   3:     Smoker       18       Yes            17           No          NA
   4:     Smoker       38       Yes            18           No          NA
   5:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
  ---                                                                     
6368: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6369: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6370:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6371: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
6372: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     16               8              1      No
   2:       Yes     Yes     16               8              1      No
   3:       Yes     Yes     16               8              1      No
   4:       Yes     Yes     12              10              1     Yes
   5:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
  ---                                                                
6368:        No     Yes     18               1             NA      No
6369:        No     Yes     18               1             NA      No
6370:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
6371:        No     Yes     19               2             NA      No
6372:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:   Heterosexual        &lt;NA&gt;
   5:           &lt;NA&gt;        &lt;NA&gt;
  ---                           
6368:           &lt;NA&gt;        &lt;NA&gt;
6369:           &lt;NA&gt;        &lt;NA&gt;
6370:           &lt;NA&gt;        &lt;NA&gt;
6371:           &lt;NA&gt;        &lt;NA&gt;
6372:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="함수를-이용한-row-filtering" class="level3">
<h3 class="anchored" data-anchor-id="함수를-이용한-row-filtering">3) 함수를 이용한 row filtering</h3>
<p>논리 연산자나 infix 연산자 뿐만 아니라 <code>TRUE</code>/<code>FALSE</code>를 반환하는 다른 함수들도 행을 선택하는 데 활용할 수 있습니다. 가장 대표적인 함수가 바로 <code>is.na()</code> 입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="fu">is.na</span>(Testosterone)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt; &lt;fctr&gt; &lt;fctr&gt;
   1: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   2: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   3: 51624  2009_10   male    34     30-39       409  White   &lt;NA&gt;
   4: 51625  2009_10   male     4       0-9        49  Other   &lt;NA&gt;
   5: 51630  2009_10 female    49     40-49       596  White   &lt;NA&gt;
  ---                                                              
5870: 71869  2011_12   male    69     60-69        NA  White  White
5871: 71869  2011_12   male    69     60-69        NA  White  White
5872: 71869  2011_12   male    69     60-69        NA  White  White
5873: 71882  2011_12 female    60     60-69        NA  Black  Black
5874: 71910  2011_12 female     0       0-9         5  White  White
           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
              &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:    High School       Married 25000-34999       30000    1.36         6
   2:    High School       Married 25000-34999       30000    1.36         6
   3:    High School       Married 25000-34999       30000    1.36         6
   4:           &lt;NA&gt;          &lt;NA&gt; 20000-24999       22500    1.07         9
   5:   Some College   LivePartner 35000-44999       40000    1.91         5
  ---                                                                       
5870:   College Grad       Married 45000-54999       50000    2.70         9
5871:   College Grad       Married 45000-54999       50000    2.70         9
5872:   College Grad       Married 45000-54999       50000    2.70         9
5873: 9 - 11th Grade       Married 10000-14999       12500    0.75         5
5874:           &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    3.37        10
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   4:     Own       &lt;NA&gt;   17.0     NA       NA  105.4 15.30             &lt;NA&gt;
   5:    Rent NotWorking   86.7     NA       NA  168.4 30.57             &lt;NA&gt;
  ---                                                                        
5870:     Own NotWorking  113.9     NA       NA  173.6 37.80             &lt;NA&gt;
5871:     Own NotWorking  113.9     NA       NA  173.6 37.80             &lt;NA&gt;
5872:     Own NotWorking  113.9     NA       NA  173.6 37.80             &lt;NA&gt;
5873:    Rent NotWorking   72.4     NA       NA  162.9 27.30             &lt;NA&gt;
5874:     Own       &lt;NA&gt;    6.7   67.6     42.2     NA    NA             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    70      113       85    114     88    114     88    112
   2:    30.0_plus    70      113       85    114     88    114     88    112
   3:    30.0_plus    70      113       85    114     88    114     88    112
   4:    12.0_18.5    NA       NA       NA     NA     NA     NA     NA     NA
   5:    30.0_plus    86      112       75    118     82    108     74    116
  ---                                                                        
5870:    30.0_plus    64      108       63    110     66    112     62    104
5871:    30.0_plus    64      108       63    110     66    112     62    104
5872:    30.0_plus    64      108       63    110     66    112     62    104
5873: 25.0_to_29.9    56      116       77    102     78    112     74    120
5874:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     82           NA       1.29    3.49       352         NA        NA
   2:     82           NA       1.29    3.49       352         NA        NA
   3:     82           NA       1.29    3.49       352         NA        NA
   4:     NA           NA         NA      NA        NA         NA        NA
   5:     76           NA       1.16    6.70        77      0.094        NA
  ---                                                                      
5870:     64           NA       0.88    4.01       296      1.839        NA
5871:     64           NA       0.88    4.01       296      1.839        NA
5872:     64           NA       0.88    4.01       296      1.839        NA
5873:     80           NA         NA      NA       128      0.955        NA
5874:     NA           NA         NA      NA        NA         NA        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              15
   2:         NA       No          NA      Good               0              15
   3:         NA       No          NA      Good               0              15
   4:         NA       No          NA      &lt;NA&gt;              NA              NA
   5:         NA       No          NA      Good               0              10
  ---                                                                          
5870:         NA       No          NA      Fair               3               0
5871:         NA       No          NA      Fair               3               0
5872:         NA       No          NA      Fair               3               0
5873:         NA       No          NA      Fair              30               3
5874:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA              NA
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           Most   Several           NA      NA         NA             4
   2:           Most   Several           NA      NA         NA             4
   3:           Most   Several           NA      NA         NA             4
   4:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
   5:        Several   Several            2       2         27             8
  ---                                                                       
5870:           None      None           NA      NA         NA             8
5871:           None      None           NA      NA         NA             8
5872:           None      None           NA      NA         NA             8
5873:        Several   Several            2       2         18             8
5874:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA            NA
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   4:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;             4
   5:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                         
5870:           No         No             NA     1_hr  More_4_hr            NA
5871:           No         No             NA     1_hr  More_4_hr            NA
5872:           No         No              3     1_hr  More_4_hr            NA
5873:           No         No             NA     1_hr  0_to_1_hr            NA
5874:         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes         NA           0       No      Yes
   2:              NA             Yes         NA           0       No      Yes
   3:              NA             Yes         NA           0       No      Yes
   4:               1            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
   5:              NA             Yes          2          20      Yes      Yes
  ---                                                                         
5870:              NA              No         NA           0      Yes      Yes
5871:              NA              No         NA           0      Yes      Yes
5872:              NA              No         NA           0      Yes      Yes
5873:              NA             Yes         NA           0     &lt;NA&gt;       No
5874:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       18       Yes            17           No          NA
   2:     Smoker       18       Yes            17           No          NA
   3:     Smoker       18       Yes            17           No          NA
   4:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
   5:     Smoker       38       Yes            18           No          NA
  ---                                                                     
5870:     Smoker       19      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5871:     Smoker       19      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5872:     Smoker       19      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5873: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
5874:       &lt;NA&gt;       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     16               8              1      No
   2:       Yes     Yes     16               8              1      No
   3:       Yes     Yes     16               8              1      No
   4:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
   5:       Yes     Yes     12              10              1     Yes
  ---                                                                
5870:        No     Yes     18               3             NA      No
5871:        No     Yes     18               3             NA      No
5872:        No     Yes     18               3             NA      No
5873:        No     Yes     18               3             NA      No
5874:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:           &lt;NA&gt;        &lt;NA&gt;
   5:   Heterosexual        &lt;NA&gt;
  ---                           
5870:           &lt;NA&gt;        &lt;NA&gt;
5871:           &lt;NA&gt;        &lt;NA&gt;
5872:           &lt;NA&gt;        &lt;NA&gt;
5873:           &lt;NA&gt;        &lt;NA&gt;
5874:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
<p><code>NA</code>가 아닌 데이터를 출력하는 방법은 <code>!is.na()</code> 입니다. Chapter 2의 논리 연산자 부분에서 <code>NOT</code>을 의미하는 기호는 <code>!</code>라고 배웠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="sc">!</span><span class="fu">is.na</span>(SleepHrsNight)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         ID SurveyYr gender   age AgeDecade AgeMonths    race   Race3
      &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt;  &lt;fctr&gt;  &lt;fctr&gt;
   1: 51624  2009_10   male    34     30-39       409   White    &lt;NA&gt;
   2: 51624  2009_10   male    34     30-39       409   White    &lt;NA&gt;
   3: 51624  2009_10   male    34     30-39       409   White    &lt;NA&gt;
   4: 51630  2009_10 female    49     40-49       596   White    &lt;NA&gt;
   5: 51647  2009_10 female    45     40-49       541   White    &lt;NA&gt;
  ---                                                                
7751: 71909  2011_12   male    28     20-29        NA Mexican Mexican
7752: 71909  2011_12   male    28     20-29        NA Mexican Mexican
7753: 71911  2011_12   male    27     20-29        NA Mexican Mexican
7754: 71915  2011_12   male    60     60-69        NA   White   White
7755: 71915  2011_12   male    60     60-69        NA   White   White
           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
              &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
   1:    High School       Married 25000-34999       30000    1.36         6
   2:    High School       Married 25000-34999       30000    1.36         6
   3:    High School       Married 25000-34999       30000    1.36         6
   4:   Some College   LivePartner 35000-44999       40000    1.91         5
   5:   College Grad       Married 75000-99999       87500    5.00         6
  ---                                                                       
7751: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3
7752: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3
7753:   College Grad       Married 75000-99999       87500    3.25        10
7754:   College Grad  NeverMarried 65000-74999       70000    5.00         4
7755:   College Grad  NeverMarried 65000-74999       70000    5.00         4
      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
       &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             &lt;NA&gt;
   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             &lt;NA&gt;
   5:     Own    Working   75.7     NA       NA  166.7 27.24             &lt;NA&gt;
  ---                                                                        
7751:    Rent    Working   92.3     NA       NA  177.3 29.40             &lt;NA&gt;
7752:    Rent    Working   92.3     NA       NA  177.3 29.40             &lt;NA&gt;
7753:     Own    Working   96.7     NA       NA  175.8 31.30             &lt;NA&gt;
7754:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
7755:     Own    Working   78.4     NA       NA  168.8 27.50             &lt;NA&gt;
           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
            &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
   1:    30.0_plus    70      113       85    114     88    114     88    112
   2:    30.0_plus    70      113       85    114     88    114     88    112
   3:    30.0_plus    70      113       85    114     88    114     88    112
   4:    30.0_plus    86      112       75    118     82    108     74    116
   5: 25.0_to_29.9    62      118       64    106     62    118     68    118
  ---                                                                        
7751: 25.0_to_29.9    68      124       65    124     62    126     64    122
7752: 25.0_to_29.9    68      124       65    124     62    126     64    122
7753:    30.0_plus    74      133       74    122     76    132     82    134
7754: 25.0_to_29.9    76      147       73    150     72    148     74    146
7755: 25.0_to_29.9    76      147       73    150     72    148     74    146
      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
       &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
   1:     82           NA       1.29    3.49       352         NA        NA
   2:     82           NA       1.29    3.49       352         NA        NA
   3:     82           NA       1.29    3.49       352         NA        NA
   4:     76           NA       1.16    6.70        77      0.094        NA
   5:     60           NA       2.12    5.82       106      1.116        NA
  ---                                                                      
7751:     66       490.43       1.22    3.90        97      0.942        NA
7752:     66       490.43       1.22    3.90        97      0.942        NA
7753:     66       509.00       1.06    5.72        63      0.600        NA
7754:     72       505.13       0.93    4.94       218      1.253        NA
7755:     72       505.13       0.93    4.94       218      1.253        NA
      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
           &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
   1:         NA       No          NA      Good               0              15
   2:         NA       No          NA      Good               0              15
   3:         NA       No          NA      Good               0              15
   4:         NA       No          NA      Good               0              10
   5:         NA       No          NA     Vgood               0               3
  ---                                                                          
7751:         NA       No          NA      &lt;NA&gt;              NA              NA
7752:         NA       No          NA      &lt;NA&gt;              NA              NA
7753:         NA       No          NA      Good               0               2
7754:         NA      Yes          56      Good               0               2
7755:         NA      Yes          56      Good               0               2
      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
              &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
   1:           Most   Several           NA      NA         NA             4
   2:           Most   Several           NA      NA         NA             4
   3:           Most   Several           NA      NA         NA             4
   4:        Several   Several            2       2         27             8
   5:           None      None            1      NA         NA             8
  ---                                                                       
7751:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             6
7752:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             6
7753:           None      None           NA      NA         NA             6
7754:           None      None           NA      NA         NA             6
7755:           None      None           NA      NA         NA             6
      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild
            &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
   1:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   2:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   3:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   4:          Yes         No             NA     &lt;NA&gt;       &lt;NA&gt;            NA
   5:           No        Yes              5     &lt;NA&gt;       &lt;NA&gt;            NA
  ---                                                                         
7751:           No        Yes             NA     1_hr       2_hr            NA
7752:           No        Yes             NA     1_hr       2_hr            NA
7753:           No         No              3     1_hr  0_to_1_hr            NA
7754:           No         No              1     2_hr       1_hr            NA
7755:           No         No             NA     2_hr       1_hr            NA
      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
                &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
   1:              NA             Yes         NA           0       No      Yes
   2:              NA             Yes         NA           0       No      Yes
   3:              NA             Yes         NA           0       No      Yes
   4:              NA             Yes          2          20      Yes      Yes
   5:              NA             Yes          3          52     &lt;NA&gt;       No
  ---                                                                         
7751:              NA            &lt;NA&gt;         NA          NA      Yes      Yes
7752:              NA            &lt;NA&gt;         NA          NA      Yes      Yes
7753:              NA             Yes          5           4     &lt;NA&gt;       No
7754:              NA             Yes         NA           0     &lt;NA&gt;       No
7755:              NA             Yes         NA           0     &lt;NA&gt;       No
       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
          &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
   1:     Smoker       18       Yes            17           No          NA
   2:     Smoker       18       Yes            17           No          NA
   3:     Smoker       18       Yes            17           No          NA
   4:     Smoker       38       Yes            18           No          NA
   5: Non-Smoker       NA       Yes            13           No          NA
  ---                                                                     
7751:     Smoker       18      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7752:     Smoker       18      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7753: Non-Smoker       NA       Yes            22           No          NA
7754: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
7755: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
         &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
   1:       Yes     Yes     16               8              1      No
   2:       Yes     Yes     16               8              1      No
   3:       Yes     Yes     16               8              1      No
   4:       Yes     Yes     12              10              1     Yes
   5:        No     Yes     13              20              0     Yes
  ---                                                                
7751:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
7752:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
7753:        No     Yes     21               1              1      No
7754:        No     Yes     19               2             NA      No
7755:        No     Yes     19               2             NA      No
      SexOrientation PregnantNow
              &lt;fctr&gt;      &lt;fctr&gt;
   1:   Heterosexual        &lt;NA&gt;
   2:   Heterosexual        &lt;NA&gt;
   3:   Heterosexual        &lt;NA&gt;
   4:   Heterosexual        &lt;NA&gt;
   5:       Bisexual        &lt;NA&gt;
  ---                           
7751:           &lt;NA&gt;        &lt;NA&gt;
7752:           &lt;NA&gt;        &lt;NA&gt;
7753:   Heterosexual        &lt;NA&gt;
7754:           &lt;NA&gt;        &lt;NA&gt;
7755:           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
</section>
<section id="행의-정렬" class="level3">
<h3 class="anchored" data-anchor-id="행의-정렬">4) 행의 정렬</h3>
<p>행의 정렬 역시 <code>i</code> 부분에서 담당합니다. 특정한 column을 기준으로 데이터를 오름차순 또는 내림차순 정렬을 할 때 사용할 수 있습니다.</p>
<p><code>data.table</code>에서 특정 column을 기준으로 데이터를 정렬하는 방법은 두 가지가 있습니다.</p>
<ul>
<li><p><code>order()</code></p>
<p><code>order()</code>는 정렬한 값의 출력만 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="fu">order</span>(BMI)] <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      ID SurveyYr gender   age AgeDecade AgeMonths    race   Race3 education
   &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt;  &lt;fctr&gt;  &lt;fctr&gt;    &lt;fctr&gt;
1: 60527  2009_10 female     3       0-9        42   Other    &lt;NA&gt;      &lt;NA&gt;
2: 52534  2009_10   male     9       0-9       109 Mexican    &lt;NA&gt;      &lt;NA&gt;
3: 64250  2011_12 female     3       0-9        NA Mexican Mexican      &lt;NA&gt;
4: 64751  2011_12   male     9       0-9        NA   White   White      &lt;NA&gt;
5: 64751  2011_12   male     9       0-9        NA   White   White      &lt;NA&gt;
6: 64751  2011_12   male     9       0-9        NA   White   White      &lt;NA&gt;
   MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms HomeOwn   Work
          &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;  &lt;fctr&gt; &lt;fctr&gt;
1:          &lt;NA&gt;  more 99999      100000    5.00         9     Own   &lt;NA&gt;
2:          &lt;NA&gt; 25000-34999       30000    1.41         4    Rent   &lt;NA&gt;
3:          &lt;NA&gt; 35000-44999       40000    1.79         4     Own   &lt;NA&gt;
4:          &lt;NA&gt;        &lt;NA&gt;          NA      NA         5     Own   &lt;NA&gt;
5:          &lt;NA&gt;        &lt;NA&gt;          NA      NA         5     Own   &lt;NA&gt;
6:          &lt;NA&gt;        &lt;NA&gt;          NA      NA         5     Own   &lt;NA&gt;
   Weight Length HeadCirc Height   BMI BMICatUnder20yrs   BMI_WHO Pulse
    &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;
1:   11.7   97.0       NA   95.3 12.88             &lt;NA&gt; 12.0_18.5    NA
2:   20.5     NA       NA  126.1 12.89             &lt;NA&gt; 12.0_18.5    68
3:   12.4   98.4       NA   98.1 12.90      UnderWeight 12.0_18.5    NA
4:   30.1     NA       NA  152.5 12.90      UnderWeight 12.0_18.5    82
5:   30.1     NA       NA  152.5 12.90      UnderWeight 12.0_18.5    82
6:   30.1     NA       NA  152.5 12.90      UnderWeight 12.0_18.5    82
   BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3 Testosterone
      &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;        &lt;num&gt;
1:       NA       NA     NA     NA     NA     NA     NA     NA           NA
2:       88       15     98      0     88     14     88     16           NA
3:       NA       NA     NA     NA     NA     NA     NA     NA           NA
4:       91       58     92     64     92     54     90     62         3.69
5:       91       58     92     64     92     54     90     62         3.69
6:       91       58     92     64     92     54     90     62         3.69
   DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2 Diabetes
        &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;      &lt;num&gt;   &lt;fctr&gt;
1:         NA      NA        NA         NA        NA         NA       No
2:         NA      NA        NA         NA        NA         NA       No
3:         NA      NA        NA         NA        NA         NA       No
4:       1.22    3.28        35      0.324        67      0.573       No
5:       1.22    3.28        35      0.324        67      0.573       No
6:       1.22    3.28        35      0.324        67      0.573       No
   DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad LittleInterest
         &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;         &lt;fctr&gt;
1:          NA      &lt;NA&gt;              NA              NA           &lt;NA&gt;
2:          NA      &lt;NA&gt;              NA              NA           &lt;NA&gt;
3:          NA      &lt;NA&gt;              NA              NA           &lt;NA&gt;
4:          NA      &lt;NA&gt;              NA              NA           &lt;NA&gt;
5:          NA      &lt;NA&gt;              NA              NA           &lt;NA&gt;
6:          NA      &lt;NA&gt;              NA              NA           &lt;NA&gt;
   Depressed nPregnancies nBabies Age1stBaby SleepHrsNight SleepTrouble
      &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;       &lt;fctr&gt;
1:      &lt;NA&gt;           NA      NA         NA            NA         &lt;NA&gt;
2:      &lt;NA&gt;           NA      NA         NA            NA         &lt;NA&gt;
3:      &lt;NA&gt;           NA      NA         NA            NA         &lt;NA&gt;
4:      &lt;NA&gt;           NA      NA         NA            NA         &lt;NA&gt;
5:      &lt;NA&gt;           NA      NA         NA            NA         &lt;NA&gt;
6:      &lt;NA&gt;           NA      NA         NA            NA         &lt;NA&gt;
   PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild CompHrsDayChild
       &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;           &lt;int&gt;
1:       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;             0               0
2:       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;             4               0
3:       &lt;NA&gt;             NA     2_hr      0_hrs            NA              NA
4:       &lt;NA&gt;              4     4_hr  0_to_1_hr            NA              NA
5:       &lt;NA&gt;              5     4_hr  0_to_1_hr            NA              NA
6:       &lt;NA&gt;              7     4_hr  0_to_1_hr            NA              NA
   Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100 Smoke100n SmokeAge
            &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;    &lt;fctr&gt;    &lt;int&gt;
1:            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;       NA
2:            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;       NA
3:            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;       NA
4:            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;       NA
5:            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;       NA
6:            &lt;NA&gt;         NA          NA     &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;       NA
   Marijuana AgeFirstMarij RegularMarij AgeRegMarij HardDrugs SexEver SexAge
      &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;
1:      &lt;NA&gt;            NA         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA
2:      &lt;NA&gt;            NA         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA
3:      &lt;NA&gt;            NA         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA
4:      &lt;NA&gt;            NA         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA
5:      &lt;NA&gt;            NA         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA
6:      &lt;NA&gt;            NA         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA
   SexNumPartnLife SexNumPartYear SameSex SexOrientation PregnantNow
             &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;         &lt;fctr&gt;      &lt;fctr&gt;
1:              NA             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;
2:              NA             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;
3:              NA             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;
4:              NA             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;
5:              NA             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;
6:              NA             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;</code></pre>
</div>
</div>
<p>만약 내림차순으로 정렬하고 싶은 경우는 변수 앞에 -를 붙여주면 됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="fu">order</span>(<span class="sc">-</span>BMI)] <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      ID SurveyYr gender   age AgeDecade AgeMonths     race  Race3
   &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt;
1: 52315  2009_10 female    52     50-59       629    Black   &lt;NA&gt;
2: 52315  2009_10 female    52     50-59       629    Black   &lt;NA&gt;
3: 70466  2011_12 female    25     20-29        NA    White  White
4: 69207  2011_12 female    30     30-39        NA    Black  Black
5: 61693  2009_10 female    33     30-39       406 Hispanic   &lt;NA&gt;
6: 59688  2009_10 female    39     30-39       471    White   &lt;NA&gt;
        education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
           &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
1:    High School       Married 45000-54999       50000    2.27         8
2:    High School       Married 45000-54999       50000    2.27         8
3:    High School   LivePartner      0-4999        2500    0.16         5
4:    High School  NeverMarried 20000-24999       22500    1.52         4
5:   Some College  NeverMarried 15000-19999       17500    1.34         4
6: 9 - 11th Grade       Married 25000-34999       30000    1.02         5
   HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
    &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
1:     Own    Working  230.7     NA       NA  168.5 81.25             &lt;NA&gt;
2:     Own    Working  230.7     NA       NA  168.5 81.25             &lt;NA&gt;
3:    Rent    Working  198.7     NA       NA  157.0 80.60             &lt;NA&gt;
4:    Rent    Working  187.5     NA       NA  164.8 69.00             &lt;NA&gt;
5:    Rent NotWorking  188.9     NA       NA  165.9 68.63             &lt;NA&gt;
6:    Rent NotWorking  170.2     NA       NA  158.4 67.83             &lt;NA&gt;
     BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3
      &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
1: 30.0_plus    68      111       77     NA     NA    106     82    116     72
2: 30.0_plus    68      111       77     NA     NA    106     82    116     72
3: 30.0_plus   124      132       80    130     80    132     80     NA     NA
4: 30.0_plus    74      108       72    110     62    108     76    108     68
5: 30.0_plus   102      119       78    118     84    122     72    116     84
6: 30.0_plus   104      124       75    124     74    128     80    120     70
   Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2
          &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;      &lt;num&gt;
1:           NA       0.85    3.98         0      0.000        NA         NA
2:           NA       0.85    3.98         0      0.000        NA         NA
3:        81.26       2.02    5.79        NA         NA        NA         NA
4:        23.58       0.96    4.42       101      0.795        NA         NA
5:           NA       1.01    7.24        13      0.075        29      0.558
6:           NA       0.96    6.10        75      0.277        NA         NA
   Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad
     &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;           &lt;int&gt;
1:      Yes          40      Good              14               4
2:      Yes          40      Good              14               4
3:       No          NA      &lt;NA&gt;              NA              NA
4:       No          NA      Fair               3               7
5:      Yes          29      Good               0               0
6:      Yes          23      Poor              14              30
   LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight
           &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
1:        Several      None           NA      NA         NA             8
2:        Several      None           NA      NA         NA             8
3:           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA             4
4:           None      None           NA      NA         NA             8
5:           Most      Most           NA      NA         NA            11
6:        Several      Most            3       3         17            10
   SleepTrouble PhysActive PhysActiveDays  TVHrsDay CompHrsDay TVHrsDayChild
         &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;    &lt;fctr&gt;     &lt;fctr&gt;         &lt;int&gt;
1:           No         No             NA      &lt;NA&gt;       &lt;NA&gt;            NA
2:           No         No             NA      &lt;NA&gt;       &lt;NA&gt;            NA
3:           No         No             NA 0_to_1_hr      0_hrs            NA
4:           No         No             NA      3_hr      0_hrs            NA
5:          Yes         No             NA      &lt;NA&gt;       &lt;NA&gt;            NA
6:           No         No             NA      &lt;NA&gt;       &lt;NA&gt;            NA
   CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100
             &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;   &lt;fctr&gt;   &lt;fctr&gt;
1:              NA              No         NA          NA     &lt;NA&gt;       No
2:              NA              No         NA          NA     &lt;NA&gt;       No
3:              NA            &lt;NA&gt;         NA          NA     &lt;NA&gt;       No
4:              NA              No          1           5     &lt;NA&gt;       No
5:              NA              No         NA          NA     &lt;NA&gt;       No
6:              NA             Yes          3           2       No      Yes
    Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij
       &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;       &lt;fctr&gt;       &lt;int&gt;
1: Non-Smoker       NA        No            NA           No          NA
2: Non-Smoker       NA        No            NA           No          NA
3: Non-Smoker       NA      &lt;NA&gt;            NA         &lt;NA&gt;          NA
4: Non-Smoker       NA       Yes            17          Yes          17
5: Non-Smoker       NA        No            NA           No          NA
6:     Smoker       16       Yes            15           No          NA
   HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex
      &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;          &lt;int&gt;  &lt;fctr&gt;
1:        No     Yes     38               1              1      No
2:        No     Yes     38               1              1      No
3:      &lt;NA&gt;    &lt;NA&gt;     NA              NA             NA    &lt;NA&gt;
4:        No     Yes     13               5              1      No
5:        No      No     NA               0              0      No
6:       Yes     Yes     12              15              1     Yes
   SexOrientation PregnantNow
           &lt;fctr&gt;      &lt;fctr&gt;
1:   Heterosexual        &lt;NA&gt;
2:   Heterosexual        &lt;NA&gt;
3:           &lt;NA&gt;         Yes
4:   Heterosexual          No
5:   Heterosexual          No
6:   Heterosexual          No</code></pre>
</div>
</div></li>
<li><p><code>setorder()</code></p>
<p><code>setorder()</code>는 데이터를 정렬하여 data.table에 저장합니다. <code>order</code>와는 다르게 정렬된 결과를 출력하지는 않습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setorder</span>(dt, <span class="co"># 정렬할 데이터</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>         age <span class="co"># 기준이 되는 변수</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
set이 들어가는 함수
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>data.table</code>에서 <code>set</code>이 붙는 함수는 어떤 값을 출력없이 저장하는 함수입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>() <span class="co"># column의 이름 변겅</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setorder</span>() <span class="co"># row 정렬</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setDT</span>() <span class="co">#  data.table로 저장</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="j-data.table-열" class="level2">
<h2 class="anchored" data-anchor-id="j-data.table-열">4. j: data.table 열</h2>
<p><code>j</code> 부분은 데이터의 열 (column)을 다루는 부분을 의미합니다. <code>j</code> 부분을 통해 원하는 열들을 선택하거나, 특정 열을 계산할 수 있습니다. 또한 새로운 변수를 생성하거나 기존의 변수를 수정 또는 삭제할 수 있습니다.</p>
<p><code>j</code> 를 활용하기 위해선 <code>dt[,j]</code> 처럼 앞에 <code>,</code>를 항상 붙여줘야 합니다.</p>
<section id="column-선택" class="level3">
<h3 class="anchored" data-anchor-id="column-선택">1) column 선택</h3>
<p><code>data.table</code>에서 열을 선택하는 방법은 다양합니다.</p>
<ul>
<li><p><code>dt[,c('X','Y')]</code></p></li>
<li><p><code>dt[,list(X,Y)]</code></p></li>
<li><p><code>dt[,.(X,Y)]</code></p></li>
</ul>
<p>여기서 <code>list()</code>와 <code>.()</code>은 동일한 기능입니다. 동일한 기능이라면 더 적은 코드를 입력하는 후자가 더 낫겠죠?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>dt[,.(gender,age)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       gender   age
       &lt;fctr&gt; &lt;int&gt;
    1: female     0
    2: female     0
    3:   male     0
    4:   male     0
    5: female     0
   ---             
 9996:   male    80
 9997:   male    80
 9998:   male    80
 9999:   male    80
10000:   male    80</code></pre>
</div>
</div>
<p>문자 vector를 이용해서도 원하는 column을 선택할 수 있습니다. 이 때는 <code>..</code>기호를 이용해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'gender'</span>,<span class="st">'age'</span>,<span class="st">'race'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>dt[,..target]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       gender   age     race
       &lt;fctr&gt; &lt;int&gt;   &lt;fctr&gt;
    1: female     0 Hispanic
    2: female     0    Black
    3:   male     0    Black
    4:   male     0    Black
    5: female     0    White
   ---                      
 9996:   male    80    White
 9997:   male    80    White
 9998:   male    80    White
 9999:   male    80    White
10000:   male    80    White</code></pre>
</div>
</div>
</section>
<section id="column-계산" class="level3">
<h3 class="anchored" data-anchor-id="column-계산">2) column 계산</h3>
<p>column을 계산하는 것 역시 <code>data.table</code>의 <code>j</code> 부분에서 담당합니다. 예를 들어 특정 column의 평균을 계산하거나 표준편차를 계산하는 경우가 있겠죠. 만약 하나의 column만 계산하는 경우 <code>data.table</code>의 <code>[]</code> 안에서 함수를 이용하면 됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dt[,<span class="fu">mean</span>(BMI,<span class="at">na.rm=</span>T)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26.66014</code></pre>
</div>
</div>
<p>만약 여러 개의 column에 대해 계산하는 경우 또는 계산하는 값을 <code>data.table</code> 형태로 출력하고 싶은 경우, column 선택에서 배웠던 <code>.()</code>를 활용하면 됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dt[,.(<span class="at">mean_BMI =</span> <span class="fu">mean</span>(BMI, <span class="at">na.rm=</span>T),</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd_BMI =</span> <span class="fu">sd</span>(BMI,<span class="at">na.rm=</span>T))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   mean_BMI   sd_BMI
      &lt;num&gt;    &lt;num&gt;
1: 26.66014 7.376579</code></pre>
</div>
</div>
</section>
<section id="column-생성-및-변경" class="level3">
<h3 class="anchored" data-anchor-id="column-생성-및-변경">3) column 생성 및 변경 <code>:=</code></h3>
<p><code>data.table</code>에는 특수한 기호가 있습니다. 바로 <code>:=</code> 입니다. walrus (바다코끼리) 연산자라고도 불리기도 합니다. 바다코끼리의 어금니를 닮아서 붙여진 이름 같습니다.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="walrus.jpg" class="img-fluid figure-img" width="400"></p>
<p></p><figcaption class="figure-caption">바다코끼리(Walrus)의 어금니가 <code>:=</code> 와 닮았습니다.</figcaption><p></p>
</figure>
</div>
<p><code>data.table</code>을 사용한다면 <code>:=</code> 연산자를 활용할 줄 아는 것이 굉장히 중요합니다. 새로운 column을 추가하거나, 기존의 column을 변경할 때, 또는 column을 삭제할 때 활용되는 연산자 입니다.</p>
<section id="a.-column의-생성" class="level4">
<h4 class="anchored" data-anchor-id="a.-column의-생성">a. column의 생성</h4>
<p>새로운 column을 생성하기 위해서는 <code>dt[,column_name := value]</code> 형식으로 코드를 작성합니다. <code>:=</code>의 왼쪽에는 새로운 column의 이름이, 오른쪽에는 데이터를 입력합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>dt[,age_group <span class="sc">:</span><span class="er">=</span> <span class="fu">paste0</span>((age <span class="sc">%/%</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>,<span class="st">'대'</span>)]</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>dt[,<span class="fu">table</span>(age_group)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>age_group
 0대 10대 20대 30대 40대 50대 60대 70대 80대 
1391 1374 1356 1338 1398 1304  919  587  333 </code></pre>
</div>
</div>
<p><code>age</code> 를 이용하여 <code>age_group</code>(연령대) column을 추가하였습니다.</p>
<p>만약 여러 개의 column을 동시에 추가하고 싶다면, 백틱(<code>``</code>) 또는 따옴표(<code>''</code>)과 함께 <code>:=</code>를 사용해야 합니다.</p>
<p>이 때 <code>()</code>안의 등호들은 <code>:=</code>가 아니라 그냥 등호(<code>=</code>)를 사용해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>dt[,<span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">age2 =</span> age<span class="sc">/</span><span class="dv">5</span>,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">age3 =</span> age<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="b.-column의-변경" class="level4">
<h4 class="anchored" data-anchor-id="b.-column의-변경">b. column의 변경</h4>
<p>column을 변경한다는 것은 기존의 column 값들을 다르게 바꿔준다는 것입니다. 예를 들면 1과 2로 이루어진 column을 ’no’와 ’yes’로 변경해주는 것처럼요.</p>
<p>column을 변경하는 것 역시 생성과 마찬가지로 <code>dt[,column_name := value]</code> 형식으로 코드를 작성하면 됩니다. <code>column_name</code>에는 바꿔줄 column의 이름이, <code>value</code>에는 새롭게 넣어줄 데이터를 입력합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>dt[,gender <span class="sc">:</span><span class="er">=</span> <span class="fu">ifelse</span>(gender<span class="sc">==</span><span class="st">'male'</span>,<span class="st">'m'</span>,<span class="st">'f'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>위의 코드처럼 <code>:=</code>를 이용해 <code>male</code>, <code>female</code>로 되어있는 <code>Gender</code> 를 각각 <code>m</code>과 <code>f</code>로 변경할 수 있습니다.</p>
<p>한편 여러 개의 column을 생성하거나 변경하는 경우, 새로운 column이 생성되는 <code>[]</code>안에서 그 column을 바로 사용할 수 없습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|eval: false</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>dt[,<span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">A2=</span>age,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">A3=</span>A2</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>)]</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 에러메시지 발생</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Error in eval(jsub, SDenv, parent.frame()) : object 'A2' not found</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>위 코드는 A2와 A3 column을 동시에 생성하는 코드입니다. 그러나 A2가 아직 만들어지지 않았기 때문에, A3 column은 생성될 수 없습니다. 따라서,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>dt[,A2<span class="sc">:</span><span class="er">=</span>age][,A3<span class="sc">:</span><span class="er">=</span>A2][]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          ID SurveyYr gender   age AgeDecade AgeMonths     race  Race3
       &lt;int&gt;   &lt;fctr&gt; &lt;char&gt; &lt;int&gt;    &lt;fctr&gt;     &lt;int&gt;   &lt;fctr&gt; &lt;fctr&gt;
    1: 51962  2009_10      f     0       0-9         2 Hispanic   &lt;NA&gt;
    2: 52066  2009_10      f     0       0-9         8    Black   &lt;NA&gt;
    3: 52300  2009_10      m     0       0-9         2    Black   &lt;NA&gt;
    4: 52373  2009_10      m     0       0-9         7    Black   &lt;NA&gt;
    5: 52435  2009_10      f     0       0-9         6    White   &lt;NA&gt;
   ---                                                                
 9996: 71797  2011_12      m    80      &lt;NA&gt;        NA    White  White
 9997: 71797  2011_12      m    80      &lt;NA&gt;        NA    White  White
 9998: 71907  2011_12      m    80      &lt;NA&gt;        NA    White  White
 9999: 71907  2011_12      m    80      &lt;NA&gt;        NA    White  White
10000: 71907  2011_12      m    80      &lt;NA&gt;        NA    White  White
         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms
            &lt;fctr&gt;        &lt;fctr&gt;      &lt;fctr&gt;       &lt;int&gt;   &lt;num&gt;     &lt;int&gt;
    1:        &lt;NA&gt;          &lt;NA&gt; 15000-19999       17500    1.24         4
    2:        &lt;NA&gt;          &lt;NA&gt;      0-4999        2500    0.24         5
    3:        &lt;NA&gt;          &lt;NA&gt;   5000-9999        7500    0.55         3
    4:        &lt;NA&gt;          &lt;NA&gt; 75000-99999       87500    5.00         4
    5:        &lt;NA&gt;          &lt;NA&gt; 45000-54999       50000    2.04         5
   ---                                                                    
 9996: High School       Widowed        &lt;NA&gt;          NA      NA        NA
 9997: High School       Widowed        &lt;NA&gt;          NA      NA        NA
 9998: High School       Married 55000-64999       60000    4.08         6
 9999: High School       Married 55000-64999       60000    4.08         6
10000: High School       Married 55000-64999       60000    4.08         6
       HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs
        &lt;fctr&gt;     &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;    &lt;num&gt;  &lt;num&gt; &lt;num&gt;           &lt;fctr&gt;
    1:    Rent       &lt;NA&gt;    4.5   56.6     38.8     NA    NA             &lt;NA&gt;
    2:    Rent       &lt;NA&gt;    9.5   72.5       NA     NA    NA             &lt;NA&gt;
    3:    Rent       &lt;NA&gt;    6.9   63.4     41.9     NA    NA             &lt;NA&gt;
    4:     Own       &lt;NA&gt;   10.7   74.7       NA     NA    NA             &lt;NA&gt;
    5:     Own       &lt;NA&gt;    9.0   64.7     44.3     NA    NA             &lt;NA&gt;
   ---                                                                        
 9996:    &lt;NA&gt; NotWorking     NA     NA       NA  182.6    NA             &lt;NA&gt;
 9997:    &lt;NA&gt; NotWorking     NA     NA       NA  182.6    NA             &lt;NA&gt;
 9998:     Own NotWorking   71.5     NA       NA  175.4  23.2             &lt;NA&gt;
 9999:     Own NotWorking   71.5     NA       NA  175.4  23.2             &lt;NA&gt;
10000:     Own NotWorking   71.5     NA       NA  175.4  23.2             &lt;NA&gt;
            BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3
             &lt;fctr&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
    1:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
    2:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
    3:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
    4:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
    5:         &lt;NA&gt;    NA       NA       NA     NA     NA     NA     NA     NA
   ---                                                                        
 9996:         &lt;NA&gt;    74      153       52    164     60    158     62    148
 9997:         &lt;NA&gt;    74      153       52    164     60    158     62    148
 9998: 18.5_to_24.9    54      148       70    150     72    150     70    146
 9999: 18.5_to_24.9    54      148       70    150     72    150     70    146
10000: 18.5_to_24.9    54      148       70    150     72    150     70    146
       BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2
        &lt;int&gt;        &lt;num&gt;      &lt;num&gt;   &lt;num&gt;     &lt;int&gt;      &lt;num&gt;     &lt;int&gt;
    1:     NA           NA         NA      NA        NA         NA        NA
    2:     NA           NA         NA      NA        NA         NA        NA
    3:     NA           NA         NA      NA        NA         NA        NA
    4:     NA           NA         NA      NA        NA         NA        NA
    5:     NA           NA         NA      NA        NA         NA        NA
   ---                                                                      
 9996:     42        401.0       0.72    3.65       313      1.079        NA
 9997:     42        401.0       0.72    3.65       313      1.079        NA
 9998:     70        402.9       1.27    4.37        61      1.052        NA
 9999:     70        402.9       1.27    4.37        61      1.052        NA
10000:     70        402.9       1.27    4.37        61      1.052        NA
       UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad
            &lt;num&gt;   &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;           &lt;int&gt;
    1:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA
    2:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA
    3:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA
    4:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA
    5:         NA     &lt;NA&gt;          NA      &lt;NA&gt;              NA
   ---                                                          
 9996:         NA      Yes          30      Good               0
 9997:         NA      Yes          30      Good               0
 9998:         NA       No          NA      Good               0
 9999:         NA       No          NA      Good               0
10000:         NA       No          NA      Good               0
       DaysMentHlthBad LittleInterest Depressed nPregnancies nBabies Age1stBaby
                 &lt;int&gt;         &lt;fctr&gt;    &lt;fctr&gt;        &lt;int&gt;   &lt;int&gt;      &lt;int&gt;
    1:              NA           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA
    2:              NA           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA
    3:              NA           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA
    4:              NA           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA
    5:              NA           &lt;NA&gt;      &lt;NA&gt;           NA      NA         NA
   ---                                                                         
 9996:              30        Several   Several           NA      NA         NA
 9997:              30        Several   Several           NA      NA         NA
 9998:               0           None      None           NA      NA         NA
 9999:               0           None      None           NA      NA         NA
10000:               0           None      None           NA      NA         NA
       SleepHrsNight SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay
               &lt;int&gt;       &lt;fctr&gt;     &lt;fctr&gt;          &lt;int&gt;   &lt;fctr&gt;     &lt;fctr&gt;
    1:            NA         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;
    2:            NA         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;
    3:            NA         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;
    4:            NA         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;
    5:            NA         &lt;NA&gt;       &lt;NA&gt;             NA     &lt;NA&gt;       &lt;NA&gt;
   ---                                                                         
 9996:             8           No         No              1    0_hrs      0_hrs
 9997:             8           No         No              5    0_hrs      0_hrs
 9998:             5           No        Yes             NA     3_hr      0_hrs
 9999:             5           No        Yes              4     3_hr      0_hrs
10000:             5           No        Yes              7     3_hr      0_hrs
       TVHrsDayChild CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear
               &lt;int&gt;           &lt;int&gt;          &lt;fctr&gt;      &lt;int&gt;       &lt;int&gt;
    1:            NA              NA            &lt;NA&gt;         NA          NA
    2:            NA              NA            &lt;NA&gt;         NA          NA
    3:            NA              NA            &lt;NA&gt;         NA          NA
    4:            NA              NA            &lt;NA&gt;         NA          NA
    5:            NA              NA            &lt;NA&gt;         NA          NA
   ---                                                                     
 9996:            NA              NA             Yes          1         156
 9997:            NA              NA             Yes          1         156
 9998:            NA              NA             Yes         NA           0
 9999:            NA              NA             Yes         NA           0
10000:            NA              NA             Yes         NA           0
       SmokeNow Smoke100  Smoke100n SmokeAge Marijuana AgeFirstMarij
         &lt;fctr&gt;   &lt;fctr&gt;     &lt;fctr&gt;    &lt;int&gt;    &lt;fctr&gt;         &lt;int&gt;
    1:     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       NA      &lt;NA&gt;            NA
    2:     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       NA      &lt;NA&gt;            NA
    3:     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       NA      &lt;NA&gt;            NA
    4:     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       NA      &lt;NA&gt;            NA
    5:     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       NA      &lt;NA&gt;            NA
   ---                                                              
 9996:     &lt;NA&gt;       No Non-Smoker       NA      &lt;NA&gt;            NA
 9997:     &lt;NA&gt;       No Non-Smoker       NA      &lt;NA&gt;            NA
 9998:     &lt;NA&gt;       No Non-Smoker       NA      &lt;NA&gt;            NA
 9999:     &lt;NA&gt;       No Non-Smoker       NA      &lt;NA&gt;            NA
10000:     &lt;NA&gt;       No Non-Smoker       NA      &lt;NA&gt;            NA
       RegularMarij AgeRegMarij HardDrugs SexEver SexAge SexNumPartnLife
             &lt;fctr&gt;       &lt;int&gt;    &lt;fctr&gt;  &lt;fctr&gt;  &lt;int&gt;           &lt;int&gt;
    1:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
    2:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
    3:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
    4:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
    5:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
   ---                                                                  
 9996:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
 9997:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
 9998:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
 9999:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
10000:         &lt;NA&gt;          NA      &lt;NA&gt;    &lt;NA&gt;     NA              NA
       SexNumPartYear SameSex SexOrientation PregnantNow age_group  age2  age3
                &lt;int&gt;  &lt;fctr&gt;         &lt;fctr&gt;      &lt;fctr&gt;    &lt;char&gt; &lt;num&gt; &lt;num&gt;
    1:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;       0대     0     0
    2:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;       0대     0     0
    3:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;       0대     0     0
    4:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;       0대     0     0
    5:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;       0대     0     0
   ---                                                                        
 9996:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;      80대    16     8
 9997:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;      80대    16     8
 9998:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;      80대    16     8
 9999:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;      80대    16     8
10000:             NA    &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;      80대    16     8
          A2    A3
       &lt;int&gt; &lt;int&gt;
    1:     0     0
    2:     0     0
    3:     0     0
    4:     0     0
    5:     0     0
   ---            
 9996:    80    80
 9997:    80    80
 9998:    80    80
 9999:    80    80
10000:    80    80</code></pre>
</div>
</div>
<p>위의 코드처럼 <code>[]</code>을 여러 번 붙여 순차적으로 column을 생성 또는 변경해주어야 합니다. 이를 <strong>chaining</strong>이라고 합니다.</p>
</section>
<section id="c.-column의-삭제" class="level4">
<h4 class="anchored" data-anchor-id="c.-column의-삭제">c.&nbsp;column의 삭제</h4>
<p>특정 데이터의 column을 삭제할 때는 <code>dt[,column_name := NULL]</code> 형식을 사용합니다. 삭제하려는 하는 <code>column_name</code>만 선택하면 되겠죠.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>dt[,column_name <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>] <span class="co"># 삭제대상 열 이름 := NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>:=</code> 연산자를 활용한 코드를 실행하게 되면 해당 데이터가 저장이 될 뿐, 출력이 되진 않습니다 (<code>set</code>함수와 같은 역할). 변경한 column을 확인하기 위해선 대괄호를 한 번 더 붙여줍니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>dt[,column_name <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>][]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
</section>
<section id="by-그룹-별-분석" class="level2">
<h2 class="anchored" data-anchor-id="by-그룹-별-분석">5. by: 그룹 별 분석</h2>
<p><code>by</code>: 특정 column에 따라 <code>j</code> 를 계산합니다. 예를 들어 성별에 따른 나이의 평균을 구하는 경우, 따라서 <u><code>by</code>를 사용하기 위해서는 <code>j</code> 부분이 존재해야</u> 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>dt[,<span class="fu">mean</span>(age),by<span class="ot">=</span>MaritalStatus]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   MaritalStatus        V1
          &lt;fctr&gt;     &lt;num&gt;
1:          &lt;NA&gt;  9.531961
2:  NeverMarried 32.926087
3:   LivePartner 37.771429
4:       Married 50.078327
5:     Separated 45.775956
6:      Divorced 51.302687
7:       Widowed 70.679825</code></pre>
</div>
</div>
<p><code>keyby</code>: by와 마찬가지로 특정 그룹에 따라 계산합니다. 하지만 <code>by</code>와 다르게 그룹으로 선택된 column을 기준으로 정렬하여 결과값을 출력합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>dt[,<span class="fu">mean</span>(age),keyby<span class="ot">=</span>MaritalStatus]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;MaritalStatus&gt;
   MaritalStatus        V1
          &lt;fctr&gt;     &lt;num&gt;
1:          &lt;NA&gt;  9.531961
2:      Divorced 51.302687
3:   LivePartner 37.771429
4:       Married 50.078327
5:  NeverMarried 32.926087
6:     Separated 45.775956
7:       Widowed 70.679825</code></pre>
</div>
</div>
<p>혼인상태(<code>MaritalStatus</code>)에 따른 나이(<code>age</code>)의 평균 값이 혼인상태의 이름으로 오름차순 정렬이 되어 출력된 것을 확인할 수 있습니다.</p>
<hr>
</section>
<section id="이외-유용한-data.table-전용-함수" class="level2">
<h2 class="anchored" data-anchor-id="이외-유용한-data.table-전용-함수">6. 이외 유용한 data.table 전용 함수</h2>
<ul>
<li><p><code>fifelse()</code>: fast ifelse입니다. <code>ifelse()</code>보다 더 빠르게 작업을 수행합니다.기본 <code>ifelse()</code>와 다르게 yes와 no 자리에 오는 인자들의 유형(type)이 반드시 동일해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>dt[,SEX <span class="sc">:</span><span class="er">=</span> <span class="fu">fifelse</span>(gender<span class="sc">==</span><span class="st">'m'</span>,<span class="st">'남성'</span>,<span class="st">'여성'</span>)]</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>dt[,Temp <span class="sc">:</span><span class="er">=</span> <span class="fu">fifelse</span>(age<span class="sc">&lt;</span><span class="dv">10</span>,<span class="cn">NA</span>,age)] <span class="co"># error 발생.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p><code>fcase()</code> : fast case when입니다. <code>ifelse()</code>처럼 조건을 사용해 데이터를 조작하지만, 반복적으로 <code>ifelse()</code> 함수를 계속해서 사용할 필요가 없기 때문에 더 적은 코드를 사용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>dt[,age_group2 <span class="sc">:</span><span class="er">=</span> <span class="fu">fcase</span>(</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">20</span>,<span class="st">'10대'</span>,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">30</span>,<span class="st">'20대'</span>,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">40</span>,<span class="st">'30대'</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">50</span>,<span class="st">'40대'</span>,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">60</span>,<span class="st">'50대'</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>)]</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>dt[,<span class="fu">table</span>(age_group2, <span class="at">useNA =</span> <span class="st">'always'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>age_group2
10대 20대 30대 40대 50대 &lt;NA&gt; 
2765 1356 1338 1398 1304 1839 </code></pre>
</div>
</div>
<p>조건에 해당되지 않는 나머지 값들은 자동으로 <code>NA</code> 처리 됩니다. 나머지 값들에 값을 주고 싶다면 <code>default</code> 인자를 활용하면 됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>dt[,age_group2 <span class="sc">:</span><span class="er">=</span> <span class="fu">fcase</span>(</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">20</span>,<span class="st">'10대'</span>,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">30</span>,<span class="st">'20대'</span>,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">40</span>,<span class="st">'30대'</span>,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">50</span>,<span class="st">'40대'</span>,</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  age<span class="sc">&lt;</span><span class="dv">60</span>,<span class="st">'50대'</span>,</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">default=</span><span class="st">'60대 이상'</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>)]</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>dt[,<span class="fu">table</span>(age_group2, <span class="at">useNA =</span> <span class="st">'always'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>age_group2
     10대      20대      30대      40대      50대 60대 이상      &lt;NA&gt; 
     2765      1356      1338      1398      1304      1839         0 </code></pre>
</div>
</div></li>
<li><p><code>uniqueN()</code> : 고유한 데이터의 수를 확인하는 데 사용하는 함수입니다. 주로 사람의 ID 수를 카운트 하는 데 사용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>dt[,BMI2<span class="sc">:</span><span class="er">=</span><span class="fu">fifelse</span>(<span class="fu">is.na</span>(BMI),<span class="st">'donno'</span>, <span class="fu">fifelse</span>(BMI<span class="sc">&gt;=</span><span class="dv">30</span>,<span class="st">'obese'</span>,<span class="st">'normal'</span>))][,<span class="fu">uniqueN</span>(BMI2)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div></li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<pre class="markdown" data-shortcodes="false"><code>---
title: "data.table 기초 문법"
description:  "data.table 문법, 연산자, 함수"
date: '2023-01-18'
categories: [data.table, R]
---

## 1. data.table 소개

`data.table`은 R의 `data.frame`을 상속하여 만들어진 패키지입니다. 그렇기 때문에 대괄호(`[]`)를 쓰는 등의 문법은 대체로 `data.frame`과 비슷합니다. 그러나 `data.table`은 기존의 `data.frame`과 다른 장점을 갖고 있습니다.

`data.table`의 장점은 다음과 같습니다.

-   **매우 빠른 속도**

    `data.table`은 기본 `data.frame` 구조보다 훨씬 빠르게 데이터를 연산합니다.

    ```{r}
    require(data.table)
    require(dplyr)
    require(microbenchmark)
    data('storms')
    df_test &lt;- function(){
      aggregate(x=storms[,c('wind','pressure')],
                by = list(storms$name,storms$year, storms$month,storms$day),
                FUN = mean)
    }

    dplyr_test &lt;- function(){
      storms %&gt;% 
        group_by(name, year, month, day) %&gt;% 
        summarise(wind=mean(wind), pressure=mean(pressure),
                  )
    }
    storm_dt &lt;- as.data.table(storms)
    dt_test &lt;- function(){
      storm_dt[,.(wind=mean(wind), pressure=mean(pressure)), by=.(name, year,month,day)]
    }

    microbenchmark(df_test(), dplyr_test(), dt_test(), times=10)

    ```

    위는 각각 `data.frame`, `dplyr`, `data.table`로 동일한 결과를 불러오도록 실행했을 때 걸린 시간입니다. `data.table`의 결과가 최소 10배는 더욱 빠른 것을 알 수 있습니다.

-   **효율적인 메모리 처리**

    `data.table`은 다른 데이터 패키지보다 효율적으로 데이터연산을 처리합니다. 그렇기 때문에 메모리 사용에 있어서도 더 적은 양으로 더 빠르게 계산을 진행합니다.

-   **낮은 패키지 의존성**

    패키지 의존성이라는 것은 특정 패키지를 불러오기 위해 또다른 패키지를 불러오는 것입니다. 우리가 배울 `data.table`은 R 사용자들에게 자주 활용되는 `tidyverse` 계열의 `dplyr`패키지보다 의존성이 훨씬 낮습니다. 그렇기 때문에 번거롭게 하나의 패키지를 사용하기 위해 다른 패키지들을 설치해줄 필요가 없습니다.

    ![dplyr vs data.table 패키지 의존성 비교](https://pbs.twimg.com/media/FJ5hZ-sXoA0acyu?format=jpg&amp;name=medium)

------------------------------------------------------------------------

## 2. data.table 함수

`data.table` 패키지에는 `data.table`에서 사용할 수 있는 고유의 함수들이 존재합니다. 여기서는 우선 앞으로 사용할 데이터를 불러오고 설정하기 위한 함수들을 우선 배워봅시다.

-   `fread()`: f(ast) + read의 의미입니다. 말그대로 빠르게 데이터를 불러오는 것(read)을 의미합니다. `.csv`, `.txt` 등의 확장자 이름을 가진 파일들을 불러올 수 있습니다.

quarto-executable-code-5450563D

```r
require(NHANES)
dt &lt;- as.data.table(NHANES)
```

`fread()`를 통해 불러온 파일의 `class`는 `data.table`입니다.

quarto-executable-code-5450563D

```r
class(dt)
```

`data.table`을 출력했을 때, `data.frame`과 다른 점은 크게 두 가지가 있습니다.

`data.table`은 우선 모든 column에 대해 첫 5개, 마지막 5개의 행을 출력합니다.

또한 행의 번호에 `:`가 붙어 출력됩니다.

-   `fwrite()`: f(ast) + write 입니다. 말그대로 빠르게 데이터를 저장(write)합니다. `.csv`, `.txt` 등의 확장자 파일로 저장할 수 있습니다.

quarto-executable-code-5450563D

```r
names(dt)
```

-   `setnames()`: column 이름을 사용자가 알아보기 쉽게끔 변경해야 할 때가 있습니다. `setnames()`는 column의 이름을 변경하는 함수입니다. column의 이름을 하나만 바꾸고 싶은 경우에는 문자열 하나만 넣어주면 되고, 여러 개의 column 이름을 동시에 변경할 때는 문자 벡터를 넣어주면 됩니다.

quarto-executable-code-5450563D

```r
# 하나의 column 이름을 변경할 때
setnames(dt, old='Gender', new='gender')

# 여러 개의 column 이름을 동시에 변경할 때
setnames(dt,
         old = c('Age','Race1','Education'),# 바꿔줄 기존의 column 이름
         new = c('age','race','education') # 새로운 column 이름
         )
```

-   `data.frame` 등을 `data.table`로 변경하기

    새롭게 파일을 불러오는 것 뿐만 아니라 기존의 `data.frame`을 `data.table` 형태로 변경해줄 수 있습니다.

    -   `setDT()` : 영구적으로 `data.table` 형태로 **저장**합니다. 저장된 값을 따로 출력하지는 않습니다.

        ```{r}
        # setDT()
        ```

    -   `as.data.table()` : 일시적으로 `data.table` 형태로 **출력**합니다. 출력된 데이터가 저장되지는 않습니다.

        ```{r}
        require(data.table)
        as.data.table(iris)
        ```

------------------------------------------------------------------------

## 3. i: data.table 행

`data.table`에서 행(row)을 다루는 부분을 `i` 라고 부릅니다 (왜 i가 된건지는 모르겠습니다).

`data.table`에서 행을 다룬다는 것은 [특정한 조건을 만족하는 행들을 추출 또는 선택]{.underline}(filtering)한다는 것과 같습니다.

자, 이제 `data.table`에서 행을 다루는 방법을 살펴보겠습니다.

### 1) 논리 연산자를 이용한 row filtering

`data.frame` 의 행을 다루는 부분에서도 배웠지만, 기본적으로 i에서는 논리 연산자를 이용해 행을 선택합니다. 논리 연산자의 조건을 만족하는 행들, 즉 논리 연산자의 실행 결과가 `TRUE` 인 행들만 추출하는 것입니다.

quarto-executable-code-5450563D

```r
dt[age&gt;=30]
```

quarto-executable-code-5450563D

```r
dt[gender=='male' &amp; age&gt;=45] # 남성이고 45세 이상
```

quarto-executable-code-5450563D

```r
dt[gender=='female' | age&gt;=50] #여성 또는 50세 이상
```

이처럼 `&amp;`나 `|`를 붙여주면, 여러 조건을 사용하여 원하는 행들을 추출할 수 있습니다.

::: callout-important
## 행을 다룰 때 data.table과 data.frame의 차이점

`data.frame`과 달리 `data.table` 문법에서는, 대괄호 안에서 column을 `df$var` 양식으로 사용하지 않아도 됩니다. 그냥 column의 이름만 사용하면 됩니다.

또한 `data.frame`에서는 행 부분을 입력할 때, 꼭 `,` 를 붙여줘야 했습니다. 그러나 `data.table`의 경우 행만 filtering 할 때, 굳이 `,`을 붙여줄 필요가 없습니다.

어떤가요? `data.table`이 훨씬 더 간단하죠? 😃
:::

### 2) Infix 연산자를 이용한 row filtering

`data.table`에서는 논리 연산자 뿐만 아니라 infix 연산자를 이용하여, 조건을 충족시키는 행을 선택할 수 있습니다. 파이프 연산자 역시 조건을 만족하는 경우인 `TRUE` 에 해당하는 값들만 선택합니다.

::: callout-note
## Infix 연산자란?

infix 연산자는 함수 피연산자의 양쪽에 있는 인수에 계산을 적용하는 기능을 제공합니다.
:::

-   `A %in% B`: A가 B 안에 있는지 확인합니다. 이 때 B는 `vector`가 옵니다. 문자를 확인하는 경우에는 `%chin%` 을 이용해 더욱 빠르게 계산할 수 있습니다.

    ```{r}
    dt[race %in% c('Black','White')]
    ```

-   `A %like% B`: A가 B와 비슷한지 확인합니다. 이 때 B에는 보통 문자열(`character`)이 옵니다.

    ```{r}
    dt[MaritalStatus %like% 'Married']
    ```

-   `A %between% B`: A가 B 사이에 있는지 확인합니다. 이 때 B는 `c(0,10)`과 같은 범위로 지정합니다.

    ```{r}
    dt[BMI %between% c(20,25)]
    ```

::: callout-tip
## 파이프 연산자 대신 함수 이용하기

위에서 소개해드린 %%을 이용한 파이프 연산자 말고도 data.table 패키지 내의 함수를 이용할 수도 있습니다.

`%between%`은 `between()`

`%like%` 는 `like()`

quarto-executable-code-5450563D

```r
dt[like(race,'ite')]
```
:::

### 3) 함수를 이용한 row filtering

논리 연산자나 infix 연산자 뿐만 아니라 `TRUE`/`FALSE`를 반환하는 다른 함수들도 행을 선택하는 데 활용할 수 있습니다. 가장 대표적인 함수가 바로 `is.na()` 입니다.

quarto-executable-code-5450563D

```r
dt[is.na(Testosterone)]
```

`NA`가 아닌 데이터를 출력하는 방법은 `!is.na()` 입니다. Chapter 2의 논리 연산자 부분에서 `NOT`을 의미하는 기호는 `!`라고 배웠습니다.

quarto-executable-code-5450563D

```r
dt[!is.na(SleepHrsNight)]
```

### 4) 행의 정렬

행의 정렬 역시 `i` 부분에서 담당합니다. 특정한 column을 기준으로 데이터를 오름차순 또는 내림차순 정렬을 할 때 사용할 수 있습니다.

`data.table`에서 특정 column을 기준으로 데이터를 정렬하는 방법은 두 가지가 있습니다.

-   `order()`

    `order()`는 정렬한 값의 출력만 합니다.

    ```{r}
    dt[order(BMI)] |&gt; head()
    ```

    만약 내림차순으로 정렬하고 싶은 경우는 변수 앞에 -를 붙여주면 됩니다.

    ```{r}
    dt[order(-BMI)] |&gt; head()
    ```

-   `setorder()`

    `setorder()`는 데이터를 정렬하여 data.table에 저장합니다. `order`와는 다르게 정렬된 결과를 출력하지는 않습니다.

    ```{r}
    setorder(dt, # 정렬할 데이터
             age # 기준이 되는 변수
             )
    ```

::: callout-tip
## set이 들어가는 함수

`data.table`에서 `set`이 붙는 함수는 어떤 값을 출력없이 저장하는 함수입니다.

```{r eval=FALSE}
#| eval: false
setnames() # column의 이름 변겅
setorder() # row 정렬
setDT() #  data.table로 저장
```
:::

------------------------------------------------------------------------

## 4. j: data.table 열

`j` 부분은 데이터의 열 (column)을 다루는 부분을 의미합니다. `j` 부분을 통해 원하는 열들을 선택하거나, 특정 열을 계산할 수 있습니다. 또한 새로운 변수를 생성하거나 기존의 변수를 수정 또는 삭제할 수 있습니다.

`j` 를 활용하기 위해선 `dt[,j]` 처럼 앞에 `,`를 항상 붙여줘야 합니다.

### 1) column 선택

`data.table`에서 열을 선택하는 방법은 다양합니다.

-   `dt[,c('X','Y')]`

-   `dt[,list(X,Y)]`

-   `dt[,.(X,Y)]`

여기서 `list()`와 `.()`은 동일한 기능입니다. 동일한 기능이라면 더 적은 코드를 입력하는 후자가 더 낫겠죠?

quarto-executable-code-5450563D

```r
dt[,.(gender,age)]
```

문자 vector를 이용해서도 원하는 column을 선택할 수 있습니다. 이 때는 `..`기호를 이용해야 합니다.

quarto-executable-code-5450563D

```r
target &lt;- c('gender','age','race')
dt[,..target]
```

### 2) column 계산

column을 계산하는 것 역시 `data.table`의 `j` 부분에서 담당합니다. 예를 들어 특정 column의 평균을 계산하거나 표준편차를 계산하는 경우가 있겠죠. 만약 하나의 column만 계산하는 경우 `data.table`의 `[]` 안에서 함수를 이용하면 됩니다.

quarto-executable-code-5450563D

```r
dt[,mean(BMI,na.rm=T)]
```

만약 여러 개의 column에 대해 계산하는 경우 또는 계산하는 값을 `data.table` 형태로 출력하고 싶은 경우, column 선택에서 배웠던 `.()`를 활용하면 됩니다.

quarto-executable-code-5450563D

```r
dt[,.(mean_BMI = mean(BMI, na.rm=T),
      sd_BMI = sd(BMI,na.rm=T))]
```

### 3) column 생성 및 변경 `:=`

`data.table`에는 특수한 기호가 있습니다. 바로 `:=` 입니다. walrus (바다코끼리) 연산자라고도 불리기도 합니다. 바다코끼리의 어금니를 닮아서 붙여진 이름 같습니다.

![바다코끼리(Walrus)의 어금니가 `:=` 와 닮았습니다.](walrus.jpg){fig-align="center" width="400"}

`data.table`을 사용한다면 `:=` 연산자를 활용할 줄 아는 것이 굉장히 중요합니다. 새로운 column을 추가하거나, 기존의 column을 변경할 때, 또는 column을 삭제할 때 활용되는 연산자 입니다.

#### a. column의 생성

새로운 column을 생성하기 위해서는 `dt[,column_name := value]` 형식으로 코드를 작성합니다. `:=`의 왼쪽에는 새로운 column의 이름이, 오른쪽에는 데이터를 입력합니다.

quarto-executable-code-5450563D

```r
dt[,age_group := paste0((age %/% 10) * 10,'대')]
dt[,table(age_group)]
```

`age` 를 이용하여 `age_group`(연령대) column을 추가하였습니다.

만약 여러 개의 column을 동시에 추가하고 싶다면, 백틱(``` `` ```) 또는 따옴표(`''`)과 함께 `:=`를 사용해야 합니다.

이 때 `()`안의 등호들은 `:=`가 아니라 그냥 등호(`=`)를 사용해야 합니다.

quarto-executable-code-5450563D

```r
dt[,`:=`(
  age2 = age/5,
  age3 = age/10
)]
```

#### b. column의 변경

column을 변경한다는 것은 기존의 column 값들을 다르게 바꿔준다는 것입니다. 예를 들면 1과 2로 이루어진 column을 'no'와 'yes'로 변경해주는 것처럼요.

column을 변경하는 것 역시 생성과 마찬가지로 `dt[,column_name := value]` 형식으로 코드를 작성하면 됩니다. `column_name`에는 바꿔줄 column의 이름이, `value`에는 새롭게 넣어줄 데이터를 입력합니다.

quarto-executable-code-5450563D

```r
dt[,gender := ifelse(gender=='male','m','f')]
```

위의 코드처럼 `:=`를 이용해 `male`, `female`로 되어있는 `Gender` 를 각각 `m`과 `f`로 변경할 수 있습니다.

한편 여러 개의 column을 생성하거나 변경하는 경우, 새로운 column이 생성되는 `[]`안에서 그 column을 바로 사용할 수 없습니다.

```{r eval=FALSE}
#|eval: false
dt[,`:=`(
  A2=age,
  A3=A2
)]

# 에러메시지 발생
# Error in eval(jsub, SDenv, parent.frame()) : object 'A2' not found
```

위 코드는 A2와 A3 column을 동시에 생성하는 코드입니다. 그러나 A2가 아직 만들어지지 않았기 때문에, A3 column은 생성될 수 없습니다. 따라서,

quarto-executable-code-5450563D

```r
dt[,A2:=age][,A3:=A2][]
```

위의 코드처럼 `[]`을 여러 번 붙여 순차적으로 column을 생성 또는 변경해주어야 합니다. 이를 **chaining**이라고 합니다.

#### c. column의 삭제

특정 데이터의 column을 삭제할 때는 `dt[,column_name := NULL]` 형식을 사용합니다. 삭제하려는 하는 `column_name`만 선택하면 되겠죠.

quarto-executable-code-5450563D

```r
dt[,column_name := NULL] # 삭제대상 열 이름 := NULL
```

`:=` 연산자를 활용한 코드를 실행하게 되면 해당 데이터가 저장이 될 뿐, 출력이 되진 않습니다 (`set`함수와 같은 역할). 변경한 column을 확인하기 위해선 대괄호를 한 번 더 붙여줍니다.

```{r eval=FALSE}
dt[,column_name := NULL][]
```

------------------------------------------------------------------------

## 5. by: 그룹 별 분석

`by`: 특정 column에 따라 `j` 를 계산합니다. 예를 들어 성별에 따른 나이의 평균을 구하는 경우, 따라서 [`by`를 사용하기 위해서는 `j` 부분이 존재해야]{.underline} 합니다.

quarto-executable-code-5450563D

```r
dt[,mean(age),by=MaritalStatus]
```

`keyby`: by와 마찬가지로 특정 그룹에 따라 계산합니다. 하지만 `by`와 다르게 그룹으로 선택된 column을 기준으로 정렬하여 결과값을 출력합니다.

quarto-executable-code-5450563D

```r
dt[,mean(age),keyby=MaritalStatus]
```

혼인상태(`MaritalStatus`)에 따른 나이(`age`)의 평균 값이 혼인상태의 이름으로 오름차순 정렬이 되어 출력된 것을 확인할 수 있습니다.

------------------------------------------------------------------------

## 6. 이외 유용한 data.table 전용 함수

-   `fifelse()`: fast ifelse입니다. `ifelse()`보다 더 빠르게 작업을 수행합니다.기본 `ifelse()`와 다르게 yes와 no 자리에 오는 인자들의 유형(type)이 반드시 동일해야 합니다.

    ```{r}
    dt[,SEX := fifelse(gender=='m','남성','여성')]
    dt[,Temp := fifelse(age&lt;10,NA,age)] # error 발생.
    ```

-   `fcase()` : fast case when입니다. `ifelse()`처럼 조건을 사용해 데이터를 조작하지만, 반복적으로 `ifelse()` 함수를 계속해서 사용할 필요가 없기 때문에 더 적은 코드를 사용합니다.

    ```{r}
    dt[,age_group2 := fcase(
      age&lt;20,'10대',
      age&lt;30,'20대',
      age&lt;40,'30대',
      age&lt;50,'40대',
      age&lt;60,'50대'
    )]
    dt[,table(age_group2, useNA = 'always')]
    ```

    조건에 해당되지 않는 나머지 값들은 자동으로 `NA` 처리 됩니다. 나머지 값들에 값을 주고 싶다면 `default` 인자를 활용하면 됩니다.

    ```{r}
    dt[,age_group2 := fcase(
      age&lt;20,'10대',
      age&lt;30,'20대',
      age&lt;40,'30대',
      age&lt;50,'40대',
      age&lt;60,'50대',
      default='60대 이상'
    )]
    dt[,table(age_group2, useNA = 'always')]
    ```

-   `uniqueN()` : 고유한 데이터의 수를 확인하는 데 사용하는 함수입니다. 주로 사람의 ID 수를 카운트 하는 데 사용합니다.

    ```{r}
    dt[,BMI2:=fifelse(is.na(BMI),'donno', fifelse(BMI&gt;=30,'obese','normal'))][,uniqueN(BMI2)]
    ```</code></pre>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://https://rchemist.quarto.pub/rchemistblog/">Rchemist</a> © 2022 by <a href="https://https://rchemist.quarto.pub/rchemistblog/about.html">YH Jang</a></div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:danjang0123@gmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/danjang0123/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>