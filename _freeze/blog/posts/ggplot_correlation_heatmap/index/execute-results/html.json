{
  "hash": "a429108f27b43e5046674ebfb1f6ebd2",
  "result": {
    "markdown": "---\ntitle: \"correlation matrix 그리기\"\nauthor: \"JYH\"\ncategories: [\"ggplot2\",\"R\",\"visualization\"]\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(reshape2)\nlibrary(RColorBrewer)\n\n# mtcars_numeric <- mtcars[sapply(mtcars, is.numeric)]\ncor_matrix <- cor(mtcars)\ncormat <- round(cor(cor_matrix),2)\n# Visualize the correlation matrix as a heatmap\n\nlower_tri <- cormat\nlower_tri[upper.tri(lower_tri)] <- NA #OR upper.tri function\ncor_melt <- melt(lower_tri, na.rm = TRUE)\n# Create a plot\nggplot(cor_melt, aes(x = Var1, y = Var2, fill = value)) +\n  geom_tile() +\n  scale_fill_gradient2(low = \"#abd9e9\", mid = \"#FFFFFF\", high = \"#FF0000\", midpoint = 0, space = \"Lab\", name=\"Correlation\") +\n  theme_minimal() +\n  geom_text(aes(Var1, Var2, label = value), color = \"black\", size = 4)+\n  theme(\n    axis.text.x = element_text(angle = 45, vjust = 1, \n                                    size = 10, hjust = 1),\n        axis.text.y = element_text(size = 10),\n        axis.title.x = element_blank(),\n        axis.title.y = element_blank(),\n     panel.grid.major = element_blank(),\n     panel.border = element_blank(),\n     panel.background = element_blank(),\n     axis.ticks = element_blank(),\n     legend.justification = c(1, 0),\n     legend.position = c(0.6, 0.7),\n     legend.direction = \"horizontal\")+\n   guides(fill = guide_colorbar(barwidth = 7, barheight = 1,\n                                title.position = \"top\", title.hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n또는 ggcorrplot이라는 패키지를 이용해 correlation heatmap 제작 가능\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"ggcorrplot\")\nlibrary(ggcorrplot)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\np.mat <- cor_pmat(mtcars)\nggcorrplot(cormat,\n          method = \"square\",\n          type = \"lower\",\n          colors = c(\"#6D9EC1\", \"white\", \"#E46726\"),\n          ggtheme = theme_minimal,\n          lab = T,\n          lab_col = \"black\",\n          lab_size = 3,\n          outline.color = \"white\",\n          hc.order = T,\n          p.mat = p.mat,\n          insig = \"blank\",\n          show.diag = T,\n          legend.title = \"\"\n          ) +\n  theme(panel.grid.major = element_blank())\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n`ggcorrplot()`에 쓰이는 주요 인자들은 다음과 같습니다.\n\n-   `method`: heatmap 을 채워 줄 모양을 선택합니다. square, circle\n\n-   `type`: heatmap 모양을 설정합니다. full, lower, upper\n\n-   `ggtheme`: 그래프의 전반적인 테마. ggplot2 또는 테마 관련 패키지의 테마 함수 사용 (e.g., `theme_()`)\n\n-   `colors`: heatmap의 low, mid, high 순으로 색상을 지정합니다.\n\n-   `outline.color`: `method`에서 설정한 square 또는 circle의 테두리색상\n\n-   `lab`: 상관계수 표시 여부\n\n    -   `lab_size`: 상관계수 글자 크기\n\n    -   `lab_col`: 상관계수 글자 색상\n\n-   `hc.order`: 상관계수에 따른 정렬\n\n-   `p.mat` : 상관계수의 p-value matrix\n\n    -   `insig`: 상관계수가 유의미하지 않을 경우 표시할 방법: blank\n\n-   `show.legend`: 범례 표시 여부\n\n    -   `legend.title`: 범례 제목.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}