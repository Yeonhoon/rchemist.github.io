{
  "hash": "eb1817acd5e59850ac402b0599216d47",
  "result": {
    "markdown": "---\ntitle: \"data.table 기초 문법\"\ndescription:  \"data.table 문법, 연산자, 함수\"\ndate: '2023-01-18'\ncategories: [data.table, R]\nimage: \"https://raw.githubusercontent.com/Rdatatable/data.table/master/.graphics/logo.png\"\n---\n\n\n## 1. data.table 소개\n\n`data.table`은 R의 `data.frame`을 상속하여 만들어진 패키지입니다. 그렇기 때문에 대괄호(`[]`)를 쓰는 등의 문법은 대체로 `data.frame`과 비슷합니다. 그러나 `data.table`은 기존의 `data.frame`과 다른 장점을 갖고 있습니다.\n\n`data.table`의 장점은 다음과 같습니다.\n\n-   **매우 빠른 속도**\n\n    `data.table`은 기본 `data.frame` 구조보다 훨씬 빠르게 데이터를 연산합니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    require(data.table)\n    require(dplyr)\n    require(microbenchmark)\n    data('storms')\n    df_test <- function(){\n      aggregate(x=storms[,c('wind','pressure')],\n                by = list(storms$name,storms$year, storms$month,storms$day),\n                FUN = mean)\n    }\n    \n    dplyr_test <- function(){\n      storms %>% \n        group_by(name, year, month, day) %>% \n        summarise(wind=mean(wind), pressure=mean(pressure),\n                  )\n    }\n    storm_dt <- as.data.table(storms)\n    dt_test <- function(){\n      storm_dt[,.(wind=mean(wind), pressure=mean(pressure)), by=.(name, year,month,day)]\n    }\n    \n    microbenchmark(df_test(), dplyr_test(), dt_test(), times=10)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    Unit: milliseconds\n             expr      min       lq      mean    median       uq      max neval\n        df_test() 108.6801 110.1764 112.12669 111.47935 113.3332 118.8255    10\n     dplyr_test()  87.9301  89.1327  94.58635  89.96220  97.3966 122.8362    10\n        dt_test()  12.1890  12.2218  13.61144  12.54885  13.6521  19.5435    10\n    ```\n    :::\n    :::\n\n\n    위는 각각 `data.frame`, `dplyr`, `data.table`로 동일한 결과를 불러오도록 실행했을 때 걸린 시간입니다. `data.table`의 결과가 최소 10배는 더욱 빠른 것을 알 수 있습니다.\n\n-   **효율적인 메모리 처리**\n\n    `data.table`은 다른 데이터 패키지보다 효율적으로 데이터연산을 처리합니다. 그렇기 때문에 메모리 사용에 있어서도 더 적은 양으로 더 빠르게 계산을 진행합니다.\n\n-   **낮은 패키지 의존성**\n\n    패키지 의존성이라는 것은 특정 패키지를 불러오기 위해 또다른 패키지를 불러오는 것입니다. 우리가 배울 `data.table`은 R 사용자들에게 자주 활용되는 `tidyverse` 계열의 `dplyr`패키지보다 의존성이 훨씬 낮습니다. 그렇기 때문에 번거롭게 하나의 패키지를 사용하기 위해 다른 패키지들을 설치해줄 필요가 없습니다.\n\n    ![dplyr vs data.table 패키지 의존성 비교](https://pbs.twimg.com/media/FJ5hZ-sXoA0acyu?format=jpg&name=medium)\n\n------------------------------------------------------------------------\n\n## 2. data.table 함수\n\n`data.table` 패키지에는 `data.table`에서 사용할 수 있는 고유의 함수들이 존재합니다. 여기서는 우선 앞으로 사용할 데이터를 불러오고 설정하기 위한 함수들을 우선 배워봅시다.\n\n-   `fread()`: f(ast) + read의 의미입니다. 말그대로 빠르게 데이터를 불러오는 것(read)을 의미합니다. `.csv`, `.txt` 등의 확장자 이름을 가진 파일들을 불러올 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(NHANES)\ndt <- as.data.table(NHANES)\n```\n:::\n\n\n`fread()`를 통해 불러온 파일의 `class`는 `data.table`입니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(dt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data.table\" \"data.frame\"\n```\n:::\n:::\n\n\n`data.table`을 출력했을 때, `data.frame`과 다른 점은 크게 두 가지가 있습니다.\n\n`data.table`은 우선 모든 column에 대해 첫 5개, 마지막 5개의 행을 출력합니다.\n\n또한 행의 번호에 `:`가 붙어 출력됩니다.\n\n-   `fwrite()`: f(ast) + write 입니다. 말그대로 빠르게 데이터를 저장(write)합니다. `.csv`, `.txt` 등의 확장자 파일로 저장할 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(dt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"ID\"               \"SurveyYr\"         \"Gender\"           \"Age\"             \n [5] \"AgeDecade\"        \"AgeMonths\"        \"Race1\"            \"Race3\"           \n [9] \"Education\"        \"MaritalStatus\"    \"HHIncome\"         \"HHIncomeMid\"     \n[13] \"Poverty\"          \"HomeRooms\"        \"HomeOwn\"          \"Work\"            \n[17] \"Weight\"           \"Length\"           \"HeadCirc\"         \"Height\"          \n[21] \"BMI\"              \"BMICatUnder20yrs\" \"BMI_WHO\"          \"Pulse\"           \n[25] \"BPSysAve\"         \"BPDiaAve\"         \"BPSys1\"           \"BPDia1\"          \n[29] \"BPSys2\"           \"BPDia2\"           \"BPSys3\"           \"BPDia3\"          \n[33] \"Testosterone\"     \"DirectChol\"       \"TotChol\"          \"UrineVol1\"       \n[37] \"UrineFlow1\"       \"UrineVol2\"        \"UrineFlow2\"       \"Diabetes\"        \n[41] \"DiabetesAge\"      \"HealthGen\"        \"DaysPhysHlthBad\"  \"DaysMentHlthBad\" \n[45] \"LittleInterest\"   \"Depressed\"        \"nPregnancies\"     \"nBabies\"         \n[49] \"Age1stBaby\"       \"SleepHrsNight\"    \"SleepTrouble\"     \"PhysActive\"      \n[53] \"PhysActiveDays\"   \"TVHrsDay\"         \"CompHrsDay\"       \"TVHrsDayChild\"   \n[57] \"CompHrsDayChild\"  \"Alcohol12PlusYr\"  \"AlcoholDay\"       \"AlcoholYear\"     \n[61] \"SmokeNow\"         \"Smoke100\"         \"Smoke100n\"        \"SmokeAge\"        \n[65] \"Marijuana\"        \"AgeFirstMarij\"    \"RegularMarij\"     \"AgeRegMarij\"     \n[69] \"HardDrugs\"        \"SexEver\"          \"SexAge\"           \"SexNumPartnLife\" \n[73] \"SexNumPartYear\"   \"SameSex\"          \"SexOrientation\"   \"PregnantNow\"     \n```\n:::\n:::\n\n\n-   `setnames()`: column 이름을 사용자가 알아보기 쉽게끔 변경해야 할 때가 있습니다. `setnames()`는 column의 이름을 변경하는 함수입니다. column의 이름을 하나만 바꾸고 싶은 경우에는 문자열 하나만 넣어주면 되고, 여러 개의 column 이름을 동시에 변경할 때는 문자 벡터를 넣어주면 됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 하나의 column 이름을 변경할 때\nsetnames(dt, old='Gender', new='gender')\n\n# 여러 개의 column 이름을 동시에 변경할 때\nsetnames(dt,\n         old = c('Age','Race1','Education'),# 바꿔줄 기존의 column 이름\n         new = c('age','race','education') # 새로운 column 이름\n         )\n```\n:::\n\n\n-   `data.frame` 등을 `data.table`로 변경하기\n\n    새롭게 파일을 불러오는 것 뿐만 아니라 기존의 `data.frame`을 `data.table` 형태로 변경해줄 수 있습니다.\n\n    -   `setDT()` : 영구적으로 `data.table` 형태로 **저장**합니다. 저장된 값을 따로 출력하지는 않습니다.\n\n\n        ::: {.cell}\n        \n        ```{.r .cell-code}\n        # setDT()\n        ```\n        :::\n\n\n    -   `as.data.table()` : 일시적으로 `data.table` 형태로 **출력**합니다. 출력된 데이터가 저장되지는 않습니다.\n\n\n        ::: {.cell}\n        \n        ```{.r .cell-code}\n        require(data.table)\n        as.data.table(iris)\n        ```\n        \n        ::: {.cell-output .cell-output-stdout}\n        ```\n             Sepal.Length Sepal.Width Petal.Length Petal.Width   Species\n                    <num>       <num>        <num>       <num>    <fctr>\n          1:          5.1         3.5          1.4         0.2    setosa\n          2:          4.9         3.0          1.4         0.2    setosa\n          3:          4.7         3.2          1.3         0.2    setosa\n          4:          4.6         3.1          1.5         0.2    setosa\n          5:          5.0         3.6          1.4         0.2    setosa\n         ---                                                            \n        146:          6.7         3.0          5.2         2.3 virginica\n        147:          6.3         2.5          5.0         1.9 virginica\n        148:          6.5         3.0          5.2         2.0 virginica\n        149:          6.2         3.4          5.4         2.3 virginica\n        150:          5.9         3.0          5.1         1.8 virginica\n        ```\n        :::\n        :::\n\n\n------------------------------------------------------------------------\n\n## 3. i: data.table 행\n\n`data.table`에서 행(row)을 다루는 부분을 `i` 라고 부릅니다 (왜 i가 된건지는 모르겠습니다).\n\n`data.table`에서 행을 다룬다는 것은 [특정한 조건을 만족하는 행들을 추출 또는 선택]{.underline}(filtering)한다는 것과 같습니다.\n\n자, 이제 `data.table`에서 행을 다루는 방법을 살펴보겠습니다.\n\n### 1) 논리 연산자를 이용한 row filtering\n\n`data.frame` 의 행을 다루는 부분에서도 배웠지만, 기본적으로 i에서는 논리 연산자를 이용해 행을 선택합니다. 논리 연산자의 조건을 만족하는 행들, 즉 논리 연산자의 실행 결과가 `TRUE` 인 행들만 추출하는 것입니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[age>=30]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n      <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n   1: 51624  2009_10   male    34     30-39       409  White   <NA>\n   2: 51624  2009_10   male    34     30-39       409  White   <NA>\n   3: 51624  2009_10   male    34     30-39       409  White   <NA>\n   4: 51630  2009_10 female    49     40-49       596  White   <NA>\n   5: 51647  2009_10 female    45     40-49       541  White   <NA>\n  ---                                                              \n5875: 71907  2011_12   male    80      <NA>        NA  White  White\n5876: 71908  2011_12 female    66     60-69        NA  White  White\n5877: 71908  2011_12 female    66     60-69        NA  White  White\n5878: 71915  2011_12   male    60     60-69        NA  White  White\n5879: 71915  2011_12   male    60     60-69        NA  White  White\n         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n            <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n   1:  High School       Married 25000-34999       30000    1.36         6\n   2:  High School       Married 25000-34999       30000    1.36         6\n   3:  High School       Married 25000-34999       30000    1.36         6\n   4: Some College   LivePartner 35000-44999       40000    1.91         5\n   5: College Grad       Married 75000-99999       87500    5.00         6\n  ---                                                                     \n5875:  High School       Married 55000-64999       60000    4.08         6\n5876: College Grad       Widowed 65000-74999       70000    4.55         8\n5877: College Grad       Widowed 65000-74999       70000    4.55         8\n5878: College Grad  NeverMarried 65000-74999       70000    5.00         4\n5879: College Grad  NeverMarried 65000-74999       70000    5.00         4\n      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n       <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             <NA>\n   5:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n  ---                                                                        \n5875:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n5876:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n5877:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n5878:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n5879:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n            <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n   1:    30.0_plus    70      113       85    114     88    114     88    112\n   2:    30.0_plus    70      113       85    114     88    114     88    112\n   3:    30.0_plus    70      113       85    114     88    114     88    112\n   4:    30.0_plus    86      112       75    118     82    108     74    116\n   5: 25.0_to_29.9    62      118       64    106     62    118     68    118\n  ---                                                                        \n5875: 18.5_to_24.9    54      148       70    150     72    150     70    146\n5876:    30.0_plus    76      114       70    110     74    114     68    114\n5877:    30.0_plus    76      114       70    110     74    114     68    114\n5878: 25.0_to_29.9    76      147       73    150     72    148     74    146\n5879: 25.0_to_29.9    76      147       73    150     72    148     74    146\n      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n       <int>        <num>      <num>   <num>     <int>      <num>     <int>\n   1:     82           NA       1.29    3.49       352         NA        NA\n   2:     82           NA       1.29    3.49       352         NA        NA\n   3:     82           NA       1.29    3.49       352         NA        NA\n   4:     76           NA       1.16    6.70        77      0.094        NA\n   5:     60           NA       2.12    5.82       106      1.116        NA\n  ---                                                                      \n5875:     70       402.90       1.27    4.37        61      1.052        NA\n5876:     72        26.00       1.86    6.47        29      0.659        94\n5877:     72        26.00       1.86    6.47        29      0.659        94\n5878:     72       505.13       0.93    4.94       218      1.253        NA\n5879:     72       505.13       0.93    4.94       218      1.253        NA\n      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n           <num>   <fctr>       <int>    <fctr>           <int>           <int>\n   1:         NA       No          NA      Good               0              15\n   2:         NA       No          NA      Good               0              15\n   3:         NA       No          NA      Good               0              15\n   4:         NA       No          NA      Good               0              10\n   5:         NA       No          NA     Vgood               0               3\n  ---                                                                          \n5875:         NA       No          NA      Good               0               0\n5876:      0.627       No          NA Excellent               0               0\n5877:      0.627       No          NA Excellent               0               0\n5878:         NA      Yes          56      Good               0               2\n5879:         NA      Yes          56      Good               0               2\n      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n              <fctr>    <fctr>        <int>   <int>      <int>         <int>\n   1:           Most   Several           NA      NA         NA             4\n   2:           Most   Several           NA      NA         NA             4\n   3:           Most   Several           NA      NA         NA             4\n   4:        Several   Several            2       2         27             8\n   5:           None      None            1      NA         NA             8\n  ---                                                                       \n5875:           None      None           NA      NA         NA             5\n5876:           None      None            2       2         22             6\n5877:           None      None            2       2         22             6\n5878:           None      None           NA      NA         NA             6\n5879:           None      None           NA      NA         NA             6\n      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n            <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n   1:          Yes         No             NA     <NA>       <NA>            NA\n   2:          Yes         No             NA     <NA>       <NA>            NA\n   3:          Yes         No             NA     <NA>       <NA>            NA\n   4:          Yes         No             NA     <NA>       <NA>            NA\n   5:           No        Yes              5     <NA>       <NA>            NA\n  ---                                                                         \n5875:           No        Yes              7     3_hr      0_hrs            NA\n5876:           No         No              5     2_hr  0_to_1_hr            NA\n5877:           No         No             NA     2_hr  0_to_1_hr            NA\n5878:           No         No              1     2_hr       1_hr            NA\n5879:           No         No             NA     2_hr       1_hr            NA\n      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n   1:              NA             Yes         NA           0       No      Yes\n   2:              NA             Yes         NA           0       No      Yes\n   3:              NA             Yes         NA           0       No      Yes\n   4:              NA             Yes          2          20      Yes      Yes\n   5:              NA             Yes          3          52     <NA>       No\n  ---                                                                         \n5875:              NA             Yes         NA           0     <NA>       No\n5876:              NA              No          1           5     <NA>       No\n5877:              NA              No          1           5     <NA>       No\n5878:              NA             Yes         NA           0     <NA>       No\n5879:              NA             Yes         NA           0     <NA>       No\n       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n          <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n   1:     Smoker       18       Yes            17           No          NA\n   2:     Smoker       18       Yes            17           No          NA\n   3:     Smoker       18       Yes            17           No          NA\n   4:     Smoker       38       Yes            18           No          NA\n   5: Non-Smoker       NA       Yes            13           No          NA\n  ---                                                                     \n5875: Non-Smoker       NA      <NA>            NA         <NA>          NA\n5876: Non-Smoker       NA      <NA>            NA         <NA>          NA\n5877: Non-Smoker       NA      <NA>            NA         <NA>          NA\n5878: Non-Smoker       NA      <NA>            NA         <NA>          NA\n5879: Non-Smoker       NA      <NA>            NA         <NA>          NA\n      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n         <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n   1:       Yes     Yes     16               8              1      No\n   2:       Yes     Yes     16               8              1      No\n   3:       Yes     Yes     16               8              1      No\n   4:       Yes     Yes     12              10              1     Yes\n   5:        No     Yes     13              20              0     Yes\n  ---                                                                \n5875:      <NA>    <NA>     NA              NA             NA    <NA>\n5876:        No     Yes     18               1             NA      No\n5877:        No     Yes     18               1             NA      No\n5878:        No     Yes     19               2             NA      No\n5879:        No     Yes     19               2             NA      No\n      SexOrientation PregnantNow\n              <fctr>      <fctr>\n   1:   Heterosexual        <NA>\n   2:   Heterosexual        <NA>\n   3:   Heterosexual        <NA>\n   4:   Heterosexual        <NA>\n   5:       Bisexual        <NA>\n  ---                           \n5875:           <NA>        <NA>\n5876:           <NA>        <NA>\n5877:           <NA>        <NA>\n5878:           <NA>        <NA>\n5879:           <NA>        <NA>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[gender=='male' & age>=45] # 남성이고 45세 이상\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n      <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n   1: 51654  2009_10   male    66     60-69       795  White   <NA>\n   2: 51656  2009_10   male    58     50-59       707  White   <NA>\n   3: 51657  2009_10   male    54     50-59       654  White   <NA>\n   4: 51667  2009_10   male    50     50-59       603  White   <NA>\n   5: 51678  2009_10   male    60     60-69       721  White   <NA>\n  ---                                                              \n1839: 71907  2011_12   male    80      <NA>        NA  White  White\n1840: 71907  2011_12   male    80      <NA>        NA  White  White\n1841: 71907  2011_12   male    80      <NA>        NA  White  White\n1842: 71915  2011_12   male    60     60-69        NA  White  White\n1843: 71915  2011_12   male    60     60-69        NA  White  White\n           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n              <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n   1:   Some College       Married 25000-34999       30000    2.20         5\n   2:   College Grad      Divorced  more 99999      100000    5.00        10\n   3: 9 - 11th Grade       Married 65000-74999       70000    2.20         6\n   4:   Some College  NeverMarried 15000-19999       17500    1.24         4\n   5:    High School       Married 15000-19999       17500    1.03         5\n  ---                                                                       \n1839:    High School       Married 55000-64999       60000    4.08         6\n1840:    High School       Married 55000-64999       60000    4.08         6\n1841:    High School       Married 55000-64999       60000    4.08         6\n1842:   College Grad  NeverMarried 65000-74999       70000    5.00         4\n1843:   College Grad  NeverMarried 65000-74999       70000    5.00         4\n      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n       <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n   1:     Own NotWorking   68.0     NA       NA  169.5 23.67             <NA>\n   2:    Rent    Working   78.4     NA       NA  181.9 23.69             <NA>\n   3:    Rent    Working   74.7     NA       NA  169.4 26.03             <NA>\n   4:    Rent    Looking   84.1     NA       NA  177.8 26.60             <NA>\n   5:     Own    Working   74.6     NA       NA  169.9 25.84             <NA>\n  ---                                                                        \n1839:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n1840:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n1841:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n1842:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n1843:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n            <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n   1: 18.5_to_24.9    60      111       63    124     64    108     62    114\n   2: 18.5_to_24.9    62      104       74    108     76    104     72    104\n   3: 25.0_to_29.9    76      134       85    136     86    132     88    136\n   4: 25.0_to_29.9    74      142       68    138     66    142     74    142\n   5: 25.0_to_29.9    84      152      100    154     98    150     98    154\n  ---                                                                        \n1839: 18.5_to_24.9    54      148       70    150     72    150     70    146\n1840: 18.5_to_24.9    54      148       70    150     72    150     70    146\n1841: 18.5_to_24.9    54      148       70    150     72    150     70    146\n1842: 25.0_to_29.9    76      147       73    150     72    148     74    146\n1843: 25.0_to_29.9    76      147       73    150     72    148     74    146\n      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n       <int>        <num>      <num>   <num>     <int>      <num>     <int>\n   1:     64           NA       0.67    4.99       113      0.489        NA\n   2:     76           NA       0.96    4.24       163         NA        NA\n   3:     82           NA       1.16    6.41       215      0.903        NA\n   4:     62           NA       1.06    5.22        64      0.190        NA\n   5:    102           NA       1.34    6.39       238         NA        NA\n  ---                                                                      \n1839:     70       402.90       1.27    4.37        61      1.052        NA\n1840:     70       402.90       1.27    4.37        61      1.052        NA\n1841:     70       402.90       1.27    4.37        61      1.052        NA\n1842:     72       505.13       0.93    4.94       218      1.253        NA\n1843:     72       505.13       0.93    4.94       218      1.253        NA\n      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n           <num>   <fctr>       <int>    <fctr>           <int>           <int>\n   1:         NA       No          NA     Vgood              10               0\n   2:         NA       No          NA     Vgood               0               0\n   3:         NA       No          NA      Fair               4               0\n   4:         NA       No          NA      Good               0               0\n   5:         NA       No          NA     Vgood               7               0\n  ---                                                                          \n1839:         NA       No          NA      Good               0               0\n1840:         NA       No          NA      Good               0               0\n1841:         NA       No          NA      Good               0               0\n1842:         NA      Yes          56      Good               0               2\n1843:         NA      Yes          56      Good               0               2\n      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n              <fctr>    <fctr>        <int>   <int>      <int>         <int>\n   1:           None      None           NA      NA         NA             7\n   2:           None      None           NA      NA         NA             5\n   3:           None      None           NA      NA         NA             4\n   4:           None      None           NA      NA         NA             7\n   5:           None      None           NA      NA         NA             6\n  ---                                                                       \n1839:           None      None           NA      NA         NA             5\n1840:           None      None           NA      NA         NA             5\n1841:           None      None           NA      NA         NA             5\n1842:           None      None           NA      NA         NA             6\n1843:           None      None           NA      NA         NA             6\n      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n            <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n   1:           No        Yes              7     <NA>       <NA>            NA\n   2:           No        Yes              5     <NA>       <NA>            NA\n   3:          Yes        Yes              1     <NA>       <NA>            NA\n   4:           No        Yes              7     <NA>       <NA>            NA\n   5:          Yes         No             NA     <NA>       <NA>            NA\n  ---                                                                         \n1839:           No        Yes             NA     3_hr      0_hrs            NA\n1840:           No        Yes              4     3_hr      0_hrs            NA\n1841:           No        Yes              7     3_hr      0_hrs            NA\n1842:           No         No              1     2_hr       1_hr            NA\n1843:           No         No             NA     2_hr       1_hr            NA\n      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n   1:              NA             Yes          1         100       No      Yes\n   2:              NA             Yes          2         104     <NA>       No\n   3:              NA             Yes          6         364     <NA>       No\n   4:              NA              No         NA           0     <NA>       No\n   5:              NA             Yes          6          36       No      Yes\n  ---                                                                         \n1839:              NA             Yes         NA           0     <NA>       No\n1840:              NA             Yes         NA           0     <NA>       No\n1841:              NA             Yes         NA           0     <NA>       No\n1842:              NA             Yes         NA           0     <NA>       No\n1843:              NA             Yes         NA           0     <NA>       No\n       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n          <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n   1:     Smoker       13      <NA>            NA         <NA>          NA\n   2: Non-Smoker       NA       Yes            19          Yes          20\n   3: Non-Smoker       NA       Yes            15          Yes          15\n   4: Non-Smoker       NA        No            NA           No          NA\n   5:     Smoker       16      <NA>            NA         <NA>          NA\n  ---                                                                     \n1839: Non-Smoker       NA      <NA>            NA         <NA>          NA\n1840: Non-Smoker       NA      <NA>            NA         <NA>          NA\n1841: Non-Smoker       NA      <NA>            NA         <NA>          NA\n1842: Non-Smoker       NA      <NA>            NA         <NA>          NA\n1843: Non-Smoker       NA      <NA>            NA         <NA>          NA\n      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n         <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n   1:        No     Yes     17              15             NA      No\n   2:       Yes     Yes     22               7              1      No\n   3:       Yes     Yes     12             100              1      No\n   4:        No     Yes     NA               9              1      No\n   5:        No     Yes     20               1             NA      No\n  ---                                                                \n1839:      <NA>    <NA>     NA              NA             NA    <NA>\n1840:      <NA>    <NA>     NA              NA             NA    <NA>\n1841:      <NA>    <NA>     NA              NA             NA    <NA>\n1842:        No     Yes     19               2             NA      No\n1843:        No     Yes     19               2             NA      No\n      SexOrientation PregnantNow\n              <fctr>      <fctr>\n   1:           <NA>        <NA>\n   2:   Heterosexual        <NA>\n   3:   Heterosexual        <NA>\n   4:   Heterosexual        <NA>\n   5:           <NA>        <NA>\n  ---                           \n1839:           <NA>        <NA>\n1840:           <NA>        <NA>\n1841:           <NA>        <NA>\n1842:           <NA>        <NA>\n1843:           <NA>        <NA>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[gender=='female' | age>=50] #여성 또는 50세 이상\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n      <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n   1: 51630  2009_10 female    49     40-49       596  White   <NA>\n   2: 51647  2009_10 female    45     40-49       541  White   <NA>\n   3: 51647  2009_10 female    45     40-49       541  White   <NA>\n   4: 51647  2009_10 female    45     40-49       541  White   <NA>\n   5: 51654  2009_10   male    66     60-69       795  White   <NA>\n  ---                                                              \n6515: 71908  2011_12 female    66     60-69        NA  White  White\n6516: 71908  2011_12 female    66     60-69        NA  White  White\n6517: 71910  2011_12 female     0       0-9         5  White  White\n6518: 71915  2011_12   male    60     60-69        NA  White  White\n6519: 71915  2011_12   male    60     60-69        NA  White  White\n         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n            <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n   1: Some College   LivePartner 35000-44999       40000    1.91         5\n   2: College Grad       Married 75000-99999       87500    5.00         6\n   3: College Grad       Married 75000-99999       87500    5.00         6\n   4: College Grad       Married 75000-99999       87500    5.00         6\n   5: Some College       Married 25000-34999       30000    2.20         5\n  ---                                                                     \n6515: College Grad       Widowed 65000-74999       70000    4.55         8\n6516: College Grad       Widowed 65000-74999       70000    4.55         8\n6517:         <NA>          <NA> 75000-99999       87500    3.37        10\n6518: College Grad  NeverMarried 65000-74999       70000    5.00         4\n6519: College Grad  NeverMarried 65000-74999       70000    5.00         4\n      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n       <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n   1:    Rent NotWorking   86.7     NA       NA  168.4 30.57             <NA>\n   2:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n   3:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n   4:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n   5:     Own NotWorking   68.0     NA       NA  169.5 23.67             <NA>\n  ---                                                                        \n6515:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n6516:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n6517:     Own       <NA>    6.7   67.6     42.2     NA    NA             <NA>\n6518:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n6519:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n            <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n   1:    30.0_plus    86      112       75    118     82    108     74    116\n   2: 25.0_to_29.9    62      118       64    106     62    118     68    118\n   3: 25.0_to_29.9    62      118       64    106     62    118     68    118\n   4: 25.0_to_29.9    62      118       64    106     62    118     68    118\n   5: 18.5_to_24.9    60      111       63    124     64    108     62    114\n  ---                                                                        \n6515:    30.0_plus    76      114       70    110     74    114     68    114\n6516:    30.0_plus    76      114       70    110     74    114     68    114\n6517:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n6518: 25.0_to_29.9    76      147       73    150     72    148     74    146\n6519: 25.0_to_29.9    76      147       73    150     72    148     74    146\n      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n       <int>        <num>      <num>   <num>     <int>      <num>     <int>\n   1:     76           NA       1.16    6.70        77      0.094        NA\n   2:     60           NA       2.12    5.82       106      1.116        NA\n   3:     60           NA       2.12    5.82       106      1.116        NA\n   4:     60           NA       2.12    5.82       106      1.116        NA\n   5:     64           NA       0.67    4.99       113      0.489        NA\n  ---                                                                      \n6515:     72        26.00       1.86    6.47        29      0.659        94\n6516:     72        26.00       1.86    6.47        29      0.659        94\n6517:     NA           NA         NA      NA        NA         NA        NA\n6518:     72       505.13       0.93    4.94       218      1.253        NA\n6519:     72       505.13       0.93    4.94       218      1.253        NA\n      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n           <num>   <fctr>       <int>    <fctr>           <int>           <int>\n   1:         NA       No          NA      Good               0              10\n   2:         NA       No          NA     Vgood               0               3\n   3:         NA       No          NA     Vgood               0               3\n   4:         NA       No          NA     Vgood               0               3\n   5:         NA       No          NA     Vgood              10               0\n  ---                                                                          \n6515:      0.627       No          NA Excellent               0               0\n6516:      0.627       No          NA Excellent               0               0\n6517:         NA     <NA>          NA      <NA>              NA              NA\n6518:         NA      Yes          56      Good               0               2\n6519:         NA      Yes          56      Good               0               2\n      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n              <fctr>    <fctr>        <int>   <int>      <int>         <int>\n   1:        Several   Several            2       2         27             8\n   2:           None      None            1      NA         NA             8\n   3:           None      None            1      NA         NA             8\n   4:           None      None            1      NA         NA             8\n   5:           None      None           NA      NA         NA             7\n  ---                                                                       \n6515:           None      None            2       2         22             6\n6516:           None      None            2       2         22             6\n6517:           <NA>      <NA>           NA      NA         NA            NA\n6518:           None      None           NA      NA         NA             6\n6519:           None      None           NA      NA         NA             6\n      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n            <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n   1:          Yes         No             NA     <NA>       <NA>            NA\n   2:           No        Yes              5     <NA>       <NA>            NA\n   3:           No        Yes              5     <NA>       <NA>            NA\n   4:           No        Yes              5     <NA>       <NA>            NA\n   5:           No        Yes              7     <NA>       <NA>            NA\n  ---                                                                         \n6515:           No         No              5     2_hr  0_to_1_hr            NA\n6516:           No         No             NA     2_hr  0_to_1_hr            NA\n6517:         <NA>       <NA>             NA     <NA>       <NA>            NA\n6518:           No         No              1     2_hr       1_hr            NA\n6519:           No         No             NA     2_hr       1_hr            NA\n      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n   1:              NA             Yes          2          20      Yes      Yes\n   2:              NA             Yes          3          52     <NA>       No\n   3:              NA             Yes          3          52     <NA>       No\n   4:              NA             Yes          3          52     <NA>       No\n   5:              NA             Yes          1         100       No      Yes\n  ---                                                                         \n6515:              NA              No          1           5     <NA>       No\n6516:              NA              No          1           5     <NA>       No\n6517:              NA            <NA>         NA          NA     <NA>     <NA>\n6518:              NA             Yes         NA           0     <NA>       No\n6519:              NA             Yes         NA           0     <NA>       No\n       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n          <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n   1:     Smoker       38       Yes            18           No          NA\n   2: Non-Smoker       NA       Yes            13           No          NA\n   3: Non-Smoker       NA       Yes            13           No          NA\n   4: Non-Smoker       NA       Yes            13           No          NA\n   5:     Smoker       13      <NA>            NA         <NA>          NA\n  ---                                                                     \n6515: Non-Smoker       NA      <NA>            NA         <NA>          NA\n6516: Non-Smoker       NA      <NA>            NA         <NA>          NA\n6517:       <NA>       NA      <NA>            NA         <NA>          NA\n6518: Non-Smoker       NA      <NA>            NA         <NA>          NA\n6519: Non-Smoker       NA      <NA>            NA         <NA>          NA\n      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n         <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n   1:       Yes     Yes     12              10              1     Yes\n   2:        No     Yes     13              20              0     Yes\n   3:        No     Yes     13              20              0     Yes\n   4:        No     Yes     13              20              0     Yes\n   5:        No     Yes     17              15             NA      No\n  ---                                                                \n6515:        No     Yes     18               1             NA      No\n6516:        No     Yes     18               1             NA      No\n6517:      <NA>    <NA>     NA              NA             NA    <NA>\n6518:        No     Yes     19               2             NA      No\n6519:        No     Yes     19               2             NA      No\n      SexOrientation PregnantNow\n              <fctr>      <fctr>\n   1:   Heterosexual        <NA>\n   2:       Bisexual        <NA>\n   3:       Bisexual        <NA>\n   4:       Bisexual        <NA>\n   5:           <NA>        <NA>\n  ---                           \n6515:           <NA>        <NA>\n6516:           <NA>        <NA>\n6517:           <NA>        <NA>\n6518:           <NA>        <NA>\n6519:           <NA>        <NA>\n```\n:::\n:::\n\n\n이처럼 `&`나 `|`를 붙여주면, 여러 조건을 사용하여 원하는 행들을 추출할 수 있습니다.\n\n::: callout-important\n## 행을 다룰 때 data.table과 data.frame의 차이점\n\n`data.frame`과 달리 `data.table` 문법에서는, 대괄호 안에서 column을 `df$var` 양식으로 사용하지 않아도 됩니다. 그냥 column의 이름만 사용하면 됩니다.\n\n또한 `data.frame`에서는 행 부분을 입력할 때, 꼭 `,` 를 붙여줘야 했습니다. 그러나 `data.table`의 경우 행만 filtering 할 때, 굳이 `,`을 붙여줄 필요가 없습니다.\n\n어떤가요? `data.table`이 훨씬 더 간단하죠? 😃\n:::\n\n### 2) Infix 연산자를 이용한 row filtering\n\n`data.table`에서는 논리 연산자 뿐만 아니라 infix 연산자를 이용하여, 조건을 충족시키는 행을 선택할 수 있습니다. 파이프 연산자 역시 조건을 만족하는 경우인 `TRUE` 에 해당하는 값들만 선택합니다.\n\n::: callout-note\n## Infix 연산자란?\n\ninfix 연산자는 함수 피연산자의 양쪽에 있는 인수에 계산을 적용하는 기능을 제공합니다.\n:::\n\n-   `A %in% B`: A가 B 안에 있는지 확인합니다. 이 때 B는 `vector`가 옵니다. 문자를 확인하는 경우에는 `%chin%` 을 이용해 더욱 빠르게 계산할 수 있습니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[race %in% c('Black','White')]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n             ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n          <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n       1: 51624  2009_10   male    34     30-39       409  White   <NA>\n       2: 51624  2009_10   male    34     30-39       409  White   <NA>\n       3: 51624  2009_10   male    34     30-39       409  White   <NA>\n       4: 51630  2009_10 female    49     40-49       596  White   <NA>\n       5: 51638  2009_10   male     9       0-9       115  White   <NA>\n      ---                                                              \n    7565: 71908  2011_12 female    66     60-69        NA  White  White\n    7566: 71908  2011_12 female    66     60-69        NA  White  White\n    7567: 71910  2011_12 female     0       0-9         5  White  White\n    7568: 71915  2011_12   male    60     60-69        NA  White  White\n    7569: 71915  2011_12   male    60     60-69        NA  White  White\n             education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n                <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n       1:  High School       Married 25000-34999       30000    1.36         6\n       2:  High School       Married 25000-34999       30000    1.36         6\n       3:  High School       Married 25000-34999       30000    1.36         6\n       4: Some College   LivePartner 35000-44999       40000    1.91         5\n       5:         <NA>          <NA> 75000-99999       87500    1.84         6\n      ---                                                                     \n    7565: College Grad       Widowed 65000-74999       70000    4.55         8\n    7566: College Grad       Widowed 65000-74999       70000    4.55         8\n    7567:         <NA>          <NA> 75000-99999       87500    3.37        10\n    7568: College Grad  NeverMarried 65000-74999       70000    5.00         4\n    7569: College Grad  NeverMarried 65000-74999       70000    5.00         4\n          HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n           <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n       1:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n       2:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n       3:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n       4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             <NA>\n       5:    Rent       <NA>   29.8     NA       NA  133.1 16.82             <NA>\n      ---                                                                        \n    7565:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n    7566:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n    7567:     Own       <NA>    6.7   67.6     42.2     NA    NA             <NA>\n    7568:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n    7569:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n               BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n                <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n       1:    30.0_plus    70      113       85    114     88    114     88    112\n       2:    30.0_plus    70      113       85    114     88    114     88    112\n       3:    30.0_plus    70      113       85    114     88    114     88    112\n       4:    30.0_plus    86      112       75    118     82    108     74    116\n       5:    12.0_18.5    82       86       47     84     50     84     50     88\n      ---                                                                        \n    7565:    30.0_plus    76      114       70    110     74    114     68    114\n    7566:    30.0_plus    76      114       70    110     74    114     68    114\n    7567:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n    7568: 25.0_to_29.9    76      147       73    150     72    148     74    146\n    7569: 25.0_to_29.9    76      147       73    150     72    148     74    146\n          BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n           <int>        <num>      <num>   <num>     <int>      <num>     <int>\n       1:     82           NA       1.29    3.49       352         NA        NA\n       2:     82           NA       1.29    3.49       352         NA        NA\n       3:     82           NA       1.29    3.49       352         NA        NA\n       4:     76           NA       1.16    6.70        77      0.094        NA\n       5:     44           NA       1.34    4.86       123      1.538        NA\n      ---                                                                      \n    7565:     72        26.00       1.86    6.47        29      0.659        94\n    7566:     72        26.00       1.86    6.47        29      0.659        94\n    7567:     NA           NA         NA      NA        NA         NA        NA\n    7568:     72       505.13       0.93    4.94       218      1.253        NA\n    7569:     72       505.13       0.93    4.94       218      1.253        NA\n          UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n               <num>   <fctr>       <int>    <fctr>           <int>           <int>\n       1:         NA       No          NA      Good               0              15\n       2:         NA       No          NA      Good               0              15\n       3:         NA       No          NA      Good               0              15\n       4:         NA       No          NA      Good               0              10\n       5:         NA       No          NA      <NA>              NA              NA\n      ---                                                                          \n    7565:      0.627       No          NA Excellent               0               0\n    7566:      0.627       No          NA Excellent               0               0\n    7567:         NA     <NA>          NA      <NA>              NA              NA\n    7568:         NA      Yes          56      Good               0               2\n    7569:         NA      Yes          56      Good               0               2\n          LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n                  <fctr>    <fctr>        <int>   <int>      <int>         <int>\n       1:           Most   Several           NA      NA         NA             4\n       2:           Most   Several           NA      NA         NA             4\n       3:           Most   Several           NA      NA         NA             4\n       4:        Several   Several            2       2         27             8\n       5:           <NA>      <NA>           NA      NA         NA            NA\n      ---                                                                       \n    7565:           None      None            2       2         22             6\n    7566:           None      None            2       2         22             6\n    7567:           <NA>      <NA>           NA      NA         NA            NA\n    7568:           None      None           NA      NA         NA             6\n    7569:           None      None           NA      NA         NA             6\n          SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n                <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n       1:          Yes         No             NA     <NA>       <NA>            NA\n       2:          Yes         No             NA     <NA>       <NA>            NA\n       3:          Yes         No             NA     <NA>       <NA>            NA\n       4:          Yes         No             NA     <NA>       <NA>            NA\n       5:         <NA>       <NA>             NA     <NA>       <NA>             5\n      ---                                                                         \n    7565:           No         No              5     2_hr  0_to_1_hr            NA\n    7566:           No         No             NA     2_hr  0_to_1_hr            NA\n    7567:         <NA>       <NA>             NA     <NA>       <NA>            NA\n    7568:           No         No              1     2_hr       1_hr            NA\n    7569:           No         No             NA     2_hr       1_hr            NA\n          CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                    <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n       1:              NA             Yes         NA           0       No      Yes\n       2:              NA             Yes         NA           0       No      Yes\n       3:              NA             Yes         NA           0       No      Yes\n       4:              NA             Yes          2          20      Yes      Yes\n       5:               0            <NA>         NA          NA     <NA>     <NA>\n      ---                                                                         \n    7565:              NA              No          1           5     <NA>       No\n    7566:              NA              No          1           5     <NA>       No\n    7567:              NA            <NA>         NA          NA     <NA>     <NA>\n    7568:              NA             Yes         NA           0     <NA>       No\n    7569:              NA             Yes         NA           0     <NA>       No\n           Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n              <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n       1:     Smoker       18       Yes            17           No          NA\n       2:     Smoker       18       Yes            17           No          NA\n       3:     Smoker       18       Yes            17           No          NA\n       4:     Smoker       38       Yes            18           No          NA\n       5:       <NA>       NA      <NA>            NA         <NA>          NA\n      ---                                                                     \n    7565: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    7566: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    7567:       <NA>       NA      <NA>            NA         <NA>          NA\n    7568: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    7569: Non-Smoker       NA      <NA>            NA         <NA>          NA\n          HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n             <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n       1:       Yes     Yes     16               8              1      No\n       2:       Yes     Yes     16               8              1      No\n       3:       Yes     Yes     16               8              1      No\n       4:       Yes     Yes     12              10              1     Yes\n       5:      <NA>    <NA>     NA              NA             NA    <NA>\n      ---                                                                \n    7565:        No     Yes     18               1             NA      No\n    7566:        No     Yes     18               1             NA      No\n    7567:      <NA>    <NA>     NA              NA             NA    <NA>\n    7568:        No     Yes     19               2             NA      No\n    7569:        No     Yes     19               2             NA      No\n          SexOrientation PregnantNow\n                  <fctr>      <fctr>\n       1:   Heterosexual        <NA>\n       2:   Heterosexual        <NA>\n       3:   Heterosexual        <NA>\n       4:   Heterosexual        <NA>\n       5:           <NA>        <NA>\n      ---                           \n    7565:           <NA>        <NA>\n    7566:           <NA>        <NA>\n    7567:           <NA>        <NA>\n    7568:           <NA>        <NA>\n    7569:           <NA>        <NA>\n    ```\n    :::\n    :::\n\n\n-   `A %like% B`: A가 B와 비슷한지 확인합니다. 이 때 B에는 보통 문자열(`character`)이 옵니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[MaritalStatus %like% 'Married']\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n             ID SurveyYr gender   age AgeDecade AgeMonths    race   Race3\n          <int>   <fctr> <fctr> <int>    <fctr>     <int>  <fctr>  <fctr>\n       1: 51624  2009_10   male    34     30-39       409   White    <NA>\n       2: 51624  2009_10   male    34     30-39       409   White    <NA>\n       3: 51624  2009_10   male    34     30-39       409   White    <NA>\n       4: 51647  2009_10 female    45     40-49       541   White    <NA>\n       5: 51647  2009_10 female    45     40-49       541   White    <NA>\n      ---                                                                \n    5321: 71909  2011_12   male    28     20-29        NA Mexican Mexican\n    5322: 71909  2011_12   male    28     20-29        NA Mexican Mexican\n    5323: 71911  2011_12   male    27     20-29        NA Mexican Mexican\n    5324: 71915  2011_12   male    60     60-69        NA   White   White\n    5325: 71915  2011_12   male    60     60-69        NA   White   White\n               education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n                  <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n       1:    High School       Married 25000-34999       30000    1.36         6\n       2:    High School       Married 25000-34999       30000    1.36         6\n       3:    High School       Married 25000-34999       30000    1.36         6\n       4:   College Grad       Married 75000-99999       87500    5.00         6\n       5:   College Grad       Married 75000-99999       87500    5.00         6\n      ---                                                                       \n    5321: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3\n    5322: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3\n    5323:   College Grad       Married 75000-99999       87500    3.25        10\n    5324:   College Grad  NeverMarried 65000-74999       70000    5.00         4\n    5325:   College Grad  NeverMarried 65000-74999       70000    5.00         4\n          HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n           <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n       1:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n       2:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n       3:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n       4:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n       5:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n      ---                                                                        \n    5321:    Rent    Working   92.3     NA       NA  177.3 29.40             <NA>\n    5322:    Rent    Working   92.3     NA       NA  177.3 29.40             <NA>\n    5323:     Own    Working   96.7     NA       NA  175.8 31.30             <NA>\n    5324:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n    5325:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n               BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n                <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n       1:    30.0_plus    70      113       85    114     88    114     88    112\n       2:    30.0_plus    70      113       85    114     88    114     88    112\n       3:    30.0_plus    70      113       85    114     88    114     88    112\n       4: 25.0_to_29.9    62      118       64    106     62    118     68    118\n       5: 25.0_to_29.9    62      118       64    106     62    118     68    118\n      ---                                                                        \n    5321: 25.0_to_29.9    68      124       65    124     62    126     64    122\n    5322: 25.0_to_29.9    68      124       65    124     62    126     64    122\n    5323:    30.0_plus    74      133       74    122     76    132     82    134\n    5324: 25.0_to_29.9    76      147       73    150     72    148     74    146\n    5325: 25.0_to_29.9    76      147       73    150     72    148     74    146\n          BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n           <int>        <num>      <num>   <num>     <int>      <num>     <int>\n       1:     82           NA       1.29    3.49       352         NA        NA\n       2:     82           NA       1.29    3.49       352         NA        NA\n       3:     82           NA       1.29    3.49       352         NA        NA\n       4:     60           NA       2.12    5.82       106      1.116        NA\n       5:     60           NA       2.12    5.82       106      1.116        NA\n      ---                                                                      \n    5321:     66       490.43       1.22    3.90        97      0.942        NA\n    5322:     66       490.43       1.22    3.90        97      0.942        NA\n    5323:     66       509.00       1.06    5.72        63      0.600        NA\n    5324:     72       505.13       0.93    4.94       218      1.253        NA\n    5325:     72       505.13       0.93    4.94       218      1.253        NA\n          UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n               <num>   <fctr>       <int>    <fctr>           <int>           <int>\n       1:         NA       No          NA      Good               0              15\n       2:         NA       No          NA      Good               0              15\n       3:         NA       No          NA      Good               0              15\n       4:         NA       No          NA     Vgood               0               3\n       5:         NA       No          NA     Vgood               0               3\n      ---                                                                          \n    5321:         NA       No          NA      <NA>              NA              NA\n    5322:         NA       No          NA      <NA>              NA              NA\n    5323:         NA       No          NA      Good               0               2\n    5324:         NA      Yes          56      Good               0               2\n    5325:         NA      Yes          56      Good               0               2\n          LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n                  <fctr>    <fctr>        <int>   <int>      <int>         <int>\n       1:           Most   Several           NA      NA         NA             4\n       2:           Most   Several           NA      NA         NA             4\n       3:           Most   Several           NA      NA         NA             4\n       4:           None      None            1      NA         NA             8\n       5:           None      None            1      NA         NA             8\n      ---                                                                       \n    5321:           <NA>      <NA>           NA      NA         NA             6\n    5322:           <NA>      <NA>           NA      NA         NA             6\n    5323:           None      None           NA      NA         NA             6\n    5324:           None      None           NA      NA         NA             6\n    5325:           None      None           NA      NA         NA             6\n          SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n                <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n       1:          Yes         No             NA     <NA>       <NA>            NA\n       2:          Yes         No             NA     <NA>       <NA>            NA\n       3:          Yes         No             NA     <NA>       <NA>            NA\n       4:           No        Yes              5     <NA>       <NA>            NA\n       5:           No        Yes              5     <NA>       <NA>            NA\n      ---                                                                         \n    5321:           No        Yes             NA     1_hr       2_hr            NA\n    5322:           No        Yes             NA     1_hr       2_hr            NA\n    5323:           No         No              3     1_hr  0_to_1_hr            NA\n    5324:           No         No              1     2_hr       1_hr            NA\n    5325:           No         No             NA     2_hr       1_hr            NA\n          CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                    <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n       1:              NA             Yes         NA           0       No      Yes\n       2:              NA             Yes         NA           0       No      Yes\n       3:              NA             Yes         NA           0       No      Yes\n       4:              NA             Yes          3          52     <NA>       No\n       5:              NA             Yes          3          52     <NA>       No\n      ---                                                                         \n    5321:              NA            <NA>         NA          NA      Yes      Yes\n    5322:              NA            <NA>         NA          NA      Yes      Yes\n    5323:              NA             Yes          5           4     <NA>       No\n    5324:              NA             Yes         NA           0     <NA>       No\n    5325:              NA             Yes         NA           0     <NA>       No\n           Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n              <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n       1:     Smoker       18       Yes            17           No          NA\n       2:     Smoker       18       Yes            17           No          NA\n       3:     Smoker       18       Yes            17           No          NA\n       4: Non-Smoker       NA       Yes            13           No          NA\n       5: Non-Smoker       NA       Yes            13           No          NA\n      ---                                                                     \n    5321:     Smoker       18      <NA>            NA         <NA>          NA\n    5322:     Smoker       18      <NA>            NA         <NA>          NA\n    5323: Non-Smoker       NA       Yes            22           No          NA\n    5324: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    5325: Non-Smoker       NA      <NA>            NA         <NA>          NA\n          HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n             <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n       1:       Yes     Yes     16               8              1      No\n       2:       Yes     Yes     16               8              1      No\n       3:       Yes     Yes     16               8              1      No\n       4:        No     Yes     13              20              0     Yes\n       5:        No     Yes     13              20              0     Yes\n      ---                                                                \n    5321:      <NA>    <NA>     NA              NA             NA    <NA>\n    5322:      <NA>    <NA>     NA              NA             NA    <NA>\n    5323:        No     Yes     21               1              1      No\n    5324:        No     Yes     19               2             NA      No\n    5325:        No     Yes     19               2             NA      No\n          SexOrientation PregnantNow\n                  <fctr>      <fctr>\n       1:   Heterosexual        <NA>\n       2:   Heterosexual        <NA>\n       3:   Heterosexual        <NA>\n       4:       Bisexual        <NA>\n       5:       Bisexual        <NA>\n      ---                           \n    5321:           <NA>        <NA>\n    5322:           <NA>        <NA>\n    5323:   Heterosexual        <NA>\n    5324:           <NA>        <NA>\n    5325:           <NA>        <NA>\n    ```\n    :::\n    :::\n\n\n-   `A %between% B`: A가 B 사이에 있는지 확인합니다. 이 때 B는 `c(0,10)`과 같은 범위로 지정합니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[BMI %between% c(20,25)]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n             ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n          <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n       1: 51646  2009_10   male     8       0-9       101  White   <NA>\n       2: 51654  2009_10   male    66     60-69       795  White   <NA>\n       3: 51656  2009_10   male    58     50-59       707  White   <NA>\n       4: 51679  2009_10   male    16     10-19       194  Other   <NA>\n       5: 51691  2009_10 female    57     50-59       694  White   <NA>\n      ---                                                              \n    2493: 71857  2011_12   male    39     30-39        NA  White  White\n    2494: 71879  2011_12   male    24     20-29        NA  Black  Black\n    2495: 71907  2011_12   male    80      <NA>        NA  White  White\n    2496: 71907  2011_12   male    80      <NA>        NA  White  White\n    2497: 71907  2011_12   male    80      <NA>        NA  White  White\n             education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n                <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n       1:         <NA>          <NA> 55000-64999       60000    2.33         7\n       2: Some College       Married 25000-34999       30000    2.20         5\n       3: College Grad      Divorced  more 99999      100000    5.00        10\n       4:         <NA>          <NA>        <NA>          NA      NA         7\n       5:  High School       Married        <NA>          NA      NA         9\n      ---                                                                     \n    2493: College Grad       Married  more 99999      100000    5.00         9\n    2494: Some College  NeverMarried   5000-9999        7500    0.51         1\n    2495:  High School       Married 55000-64999       60000    4.08         6\n    2496:  High School       Married 55000-64999       60000    4.08         6\n    2497:  High School       Married 55000-64999       60000    4.08         6\n          HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n           <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n       1:     Own       <NA>   35.2     NA       NA  130.6 20.64             <NA>\n       2:     Own NotWorking   68.0     NA       NA  169.5 23.67             <NA>\n       3:    Rent    Working   78.4     NA       NA  181.9 23.69             <NA>\n       4:     Own NotWorking   73.2     NA       NA  172.0 24.74             <NA>\n       5:     Own    Working   51.0     NA       NA  157.1 20.66             <NA>\n      ---                                                                        \n    2493:     Own    Working   73.4     NA       NA  175.7 23.80             <NA>\n    2494:    Rent NotWorking   76.0     NA       NA  184.1 22.40             <NA>\n    2495:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n    2496:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n    2497:     Own NotWorking   71.5     NA       NA  175.4 23.20             <NA>\n               BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n                <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n       1: 18.5_to_24.9    72      107       37    114     46    108     36    106\n       2: 18.5_to_24.9    60      111       63    124     64    108     62    114\n       3: 18.5_to_24.9    62      104       74    108     76    104     72    104\n       4: 18.5_to_24.9    76      126       72    132     74    126     68    126\n       5: 18.5_to_24.9    70      122       89    122     82    128     88    116\n      ---                                                                        \n    2493: 18.5_to_24.9    70      118       81    120     80    118     80    118\n    2494: 18.5_to_24.9    88      129       61    122     62    126     60    132\n    2495: 18.5_to_24.9    54      148       70    150     72    150     70    146\n    2496: 18.5_to_24.9    54      148       70    150     72    150     70    146\n    2497: 18.5_to_24.9    54      148       70    150     72    150     70    146\n          BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n           <int>        <num>      <num>   <num>     <int>      <num>     <int>\n       1:     38           NA       1.55    4.09       238      1.322        NA\n       2:     64           NA       0.67    4.99       113      0.489        NA\n       3:     76           NA       0.96    4.24       163         NA        NA\n       4:     76           NA       1.14    3.00       345      1.742        NA\n       5:     90           NA       1.53    5.04       133      2.293        NA\n      ---                                                                      \n    2493:     82       360.15       1.50    4.19        25      0.676        82\n    2494:     62       485.69       1.68    5.51        74      0.679        NA\n    2495:     70       402.90       1.27    4.37        61      1.052        NA\n    2496:     70       402.90       1.27    4.37        61      1.052        NA\n    2497:     70       402.90       1.27    4.37        61      1.052        NA\n          UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n               <num>   <fctr>       <int>    <fctr>           <int>           <int>\n       1:         NA       No          NA      <NA>              NA              NA\n       2:         NA       No          NA     Vgood              10               0\n       3:         NA       No          NA     Vgood               0               0\n       4:         NA       No          NA      Fair               0              20\n       5:         NA       No          NA Excellent               0               0\n      ---                                                                          \n    2493:       0.55       No          NA Excellent               0               5\n    2494:         NA       No          NA      <NA>              NA              NA\n    2495:         NA       No          NA      Good               0               0\n    2496:         NA       No          NA      Good               0               0\n    2497:         NA       No          NA      Good               0               0\n          LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n                  <fctr>    <fctr>        <int>   <int>      <int>         <int>\n       1:           <NA>      <NA>           NA      NA         NA            NA\n       2:           None      None           NA      NA         NA             7\n       3:           None      None           NA      NA         NA             5\n       4:           <NA>      <NA>           NA      NA         NA             6\n       5:           None      None            2       2         32             8\n      ---                                                                       \n    2493:           None      None           NA      NA         NA             7\n    2494:           <NA>      <NA>           NA      NA         NA             8\n    2495:           None      None           NA      NA         NA             5\n    2496:           None      None           NA      NA         NA             5\n    2497:           None      None           NA      NA         NA             5\n          SleepTrouble PhysActive PhysActiveDays  TVHrsDay CompHrsDay TVHrsDayChild\n                <fctr>     <fctr>          <int>    <fctr>     <fctr>         <int>\n       1:         <NA>       <NA>             NA      <NA>       <NA>             1\n       2:           No        Yes              7      <NA>       <NA>            NA\n       3:           No        Yes              5      <NA>       <NA>            NA\n       4:           No        Yes              3      <NA>       <NA>            NA\n       5:           No        Yes              3      <NA>       <NA>            NA\n      ---                                                                          \n    2493:           No        Yes             NA More_4_hr  0_to_1_hr            NA\n    2494:           No         No             NA More_4_hr       4_hr            NA\n    2495:           No        Yes             NA      3_hr      0_hrs            NA\n    2496:           No        Yes              4      3_hr      0_hrs            NA\n    2497:           No        Yes              7      3_hr      0_hrs            NA\n          CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                    <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n       1:               6            <NA>         NA          NA     <NA>     <NA>\n       2:              NA             Yes          1         100       No      Yes\n       3:              NA             Yes          2         104     <NA>       No\n       4:              NA            <NA>         NA          NA     <NA>     <NA>\n       5:              NA             Yes          1         312       No      Yes\n      ---                                                                         \n    2493:              NA             Yes          2          52     <NA>       No\n    2494:              NA            <NA>         NA          NA     <NA>       No\n    2495:              NA             Yes         NA           0     <NA>       No\n    2496:              NA             Yes         NA           0     <NA>       No\n    2497:              NA             Yes         NA           0     <NA>       No\n           Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n              <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n       1:       <NA>       NA      <NA>            NA         <NA>          NA\n       2:     Smoker       13      <NA>            NA         <NA>          NA\n       3: Non-Smoker       NA       Yes            19          Yes          20\n       4:       <NA>       NA      <NA>            NA         <NA>          NA\n       5:     Smoker       18       Yes            18           No          NA\n      ---                                                                     \n    2493: Non-Smoker       NA       Yes            19           No          NA\n    2494: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    2495: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    2496: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    2497: Non-Smoker       NA      <NA>            NA         <NA>          NA\n          HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n             <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n       1:      <NA>    <NA>     NA              NA             NA    <NA>\n       2:        No     Yes     17              15             NA      No\n       3:       Yes     Yes     22               7              1      No\n       4:      <NA>    <NA>     NA              NA             NA    <NA>\n       5:        No     Yes     18               5              1      No\n      ---                                                                \n    2493:        No     Yes     17               5              1      No\n    2494:      <NA>    <NA>     NA              NA             NA    <NA>\n    2495:      <NA>    <NA>     NA              NA             NA    <NA>\n    2496:      <NA>    <NA>     NA              NA             NA    <NA>\n    2497:      <NA>    <NA>     NA              NA             NA    <NA>\n          SexOrientation PregnantNow\n                  <fctr>      <fctr>\n       1:           <NA>        <NA>\n       2:           <NA>        <NA>\n       3:   Heterosexual        <NA>\n       4:           <NA>        <NA>\n       5:   Heterosexual        <NA>\n      ---                           \n    2493:   Heterosexual        <NA>\n    2494:           <NA>        <NA>\n    2495:           <NA>        <NA>\n    2496:           <NA>        <NA>\n    2497:           <NA>        <NA>\n    ```\n    :::\n    :::\n\n\n::: callout-tip\n## 파이프 연산자 대신 함수 이용하기\n\n위에서 소개해드린 %%을 이용한 파이프 연산자 말고도 data.table 패키지 내의 함수를 이용할 수도 있습니다.\n\n`%between%`은 `between()`\n\n`%like%` 는 `like()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[like(race,'ite')]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n      <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n   1: 51624  2009_10   male    34     30-39       409  White   <NA>\n   2: 51624  2009_10   male    34     30-39       409  White   <NA>\n   3: 51624  2009_10   male    34     30-39       409  White   <NA>\n   4: 51630  2009_10 female    49     40-49       596  White   <NA>\n   5: 51638  2009_10   male     9       0-9       115  White   <NA>\n  ---                                                              \n6368: 71908  2011_12 female    66     60-69        NA  White  White\n6369: 71908  2011_12 female    66     60-69        NA  White  White\n6370: 71910  2011_12 female     0       0-9         5  White  White\n6371: 71915  2011_12   male    60     60-69        NA  White  White\n6372: 71915  2011_12   male    60     60-69        NA  White  White\n         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n            <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n   1:  High School       Married 25000-34999       30000    1.36         6\n   2:  High School       Married 25000-34999       30000    1.36         6\n   3:  High School       Married 25000-34999       30000    1.36         6\n   4: Some College   LivePartner 35000-44999       40000    1.91         5\n   5:         <NA>          <NA> 75000-99999       87500    1.84         6\n  ---                                                                     \n6368: College Grad       Widowed 65000-74999       70000    4.55         8\n6369: College Grad       Widowed 65000-74999       70000    4.55         8\n6370:         <NA>          <NA> 75000-99999       87500    3.37        10\n6371: College Grad  NeverMarried 65000-74999       70000    5.00         4\n6372: College Grad  NeverMarried 65000-74999       70000    5.00         4\n      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n       <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             <NA>\n   5:    Rent       <NA>   29.8     NA       NA  133.1 16.82             <NA>\n  ---                                                                        \n6368:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n6369:     Own    Working   88.7     NA       NA  159.0 35.10             <NA>\n6370:     Own       <NA>    6.7   67.6     42.2     NA    NA             <NA>\n6371:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n6372:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n            <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n   1:    30.0_plus    70      113       85    114     88    114     88    112\n   2:    30.0_plus    70      113       85    114     88    114     88    112\n   3:    30.0_plus    70      113       85    114     88    114     88    112\n   4:    30.0_plus    86      112       75    118     82    108     74    116\n   5:    12.0_18.5    82       86       47     84     50     84     50     88\n  ---                                                                        \n6368:    30.0_plus    76      114       70    110     74    114     68    114\n6369:    30.0_plus    76      114       70    110     74    114     68    114\n6370:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n6371: 25.0_to_29.9    76      147       73    150     72    148     74    146\n6372: 25.0_to_29.9    76      147       73    150     72    148     74    146\n      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n       <int>        <num>      <num>   <num>     <int>      <num>     <int>\n   1:     82           NA       1.29    3.49       352         NA        NA\n   2:     82           NA       1.29    3.49       352         NA        NA\n   3:     82           NA       1.29    3.49       352         NA        NA\n   4:     76           NA       1.16    6.70        77      0.094        NA\n   5:     44           NA       1.34    4.86       123      1.538        NA\n  ---                                                                      \n6368:     72        26.00       1.86    6.47        29      0.659        94\n6369:     72        26.00       1.86    6.47        29      0.659        94\n6370:     NA           NA         NA      NA        NA         NA        NA\n6371:     72       505.13       0.93    4.94       218      1.253        NA\n6372:     72       505.13       0.93    4.94       218      1.253        NA\n      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n           <num>   <fctr>       <int>    <fctr>           <int>           <int>\n   1:         NA       No          NA      Good               0              15\n   2:         NA       No          NA      Good               0              15\n   3:         NA       No          NA      Good               0              15\n   4:         NA       No          NA      Good               0              10\n   5:         NA       No          NA      <NA>              NA              NA\n  ---                                                                          \n6368:      0.627       No          NA Excellent               0               0\n6369:      0.627       No          NA Excellent               0               0\n6370:         NA     <NA>          NA      <NA>              NA              NA\n6371:         NA      Yes          56      Good               0               2\n6372:         NA      Yes          56      Good               0               2\n      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n              <fctr>    <fctr>        <int>   <int>      <int>         <int>\n   1:           Most   Several           NA      NA         NA             4\n   2:           Most   Several           NA      NA         NA             4\n   3:           Most   Several           NA      NA         NA             4\n   4:        Several   Several            2       2         27             8\n   5:           <NA>      <NA>           NA      NA         NA            NA\n  ---                                                                       \n6368:           None      None            2       2         22             6\n6369:           None      None            2       2         22             6\n6370:           <NA>      <NA>           NA      NA         NA            NA\n6371:           None      None           NA      NA         NA             6\n6372:           None      None           NA      NA         NA             6\n      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n            <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n   1:          Yes         No             NA     <NA>       <NA>            NA\n   2:          Yes         No             NA     <NA>       <NA>            NA\n   3:          Yes         No             NA     <NA>       <NA>            NA\n   4:          Yes         No             NA     <NA>       <NA>            NA\n   5:         <NA>       <NA>             NA     <NA>       <NA>             5\n  ---                                                                         \n6368:           No         No              5     2_hr  0_to_1_hr            NA\n6369:           No         No             NA     2_hr  0_to_1_hr            NA\n6370:         <NA>       <NA>             NA     <NA>       <NA>            NA\n6371:           No         No              1     2_hr       1_hr            NA\n6372:           No         No             NA     2_hr       1_hr            NA\n      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n   1:              NA             Yes         NA           0       No      Yes\n   2:              NA             Yes         NA           0       No      Yes\n   3:              NA             Yes         NA           0       No      Yes\n   4:              NA             Yes          2          20      Yes      Yes\n   5:               0            <NA>         NA          NA     <NA>     <NA>\n  ---                                                                         \n6368:              NA              No          1           5     <NA>       No\n6369:              NA              No          1           5     <NA>       No\n6370:              NA            <NA>         NA          NA     <NA>     <NA>\n6371:              NA             Yes         NA           0     <NA>       No\n6372:              NA             Yes         NA           0     <NA>       No\n       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n          <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n   1:     Smoker       18       Yes            17           No          NA\n   2:     Smoker       18       Yes            17           No          NA\n   3:     Smoker       18       Yes            17           No          NA\n   4:     Smoker       38       Yes            18           No          NA\n   5:       <NA>       NA      <NA>            NA         <NA>          NA\n  ---                                                                     \n6368: Non-Smoker       NA      <NA>            NA         <NA>          NA\n6369: Non-Smoker       NA      <NA>            NA         <NA>          NA\n6370:       <NA>       NA      <NA>            NA         <NA>          NA\n6371: Non-Smoker       NA      <NA>            NA         <NA>          NA\n6372: Non-Smoker       NA      <NA>            NA         <NA>          NA\n      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n         <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n   1:       Yes     Yes     16               8              1      No\n   2:       Yes     Yes     16               8              1      No\n   3:       Yes     Yes     16               8              1      No\n   4:       Yes     Yes     12              10              1     Yes\n   5:      <NA>    <NA>     NA              NA             NA    <NA>\n  ---                                                                \n6368:        No     Yes     18               1             NA      No\n6369:        No     Yes     18               1             NA      No\n6370:      <NA>    <NA>     NA              NA             NA    <NA>\n6371:        No     Yes     19               2             NA      No\n6372:        No     Yes     19               2             NA      No\n      SexOrientation PregnantNow\n              <fctr>      <fctr>\n   1:   Heterosexual        <NA>\n   2:   Heterosexual        <NA>\n   3:   Heterosexual        <NA>\n   4:   Heterosexual        <NA>\n   5:           <NA>        <NA>\n  ---                           \n6368:           <NA>        <NA>\n6369:           <NA>        <NA>\n6370:           <NA>        <NA>\n6371:           <NA>        <NA>\n6372:           <NA>        <NA>\n```\n:::\n:::\n\n:::\n\n### 3) 함수를 이용한 row filtering\n\n논리 연산자나 infix 연산자 뿐만 아니라 `TRUE`/`FALSE`를 반환하는 다른 함수들도 행을 선택하는 데 활용할 수 있습니다. 가장 대표적인 함수가 바로 `is.na()` 입니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[is.na(Testosterone)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ID SurveyYr gender   age AgeDecade AgeMonths   race  Race3\n      <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>\n   1: 51624  2009_10   male    34     30-39       409  White   <NA>\n   2: 51624  2009_10   male    34     30-39       409  White   <NA>\n   3: 51624  2009_10   male    34     30-39       409  White   <NA>\n   4: 51625  2009_10   male     4       0-9        49  Other   <NA>\n   5: 51630  2009_10 female    49     40-49       596  White   <NA>\n  ---                                                              \n5870: 71869  2011_12   male    69     60-69        NA  White  White\n5871: 71869  2011_12   male    69     60-69        NA  White  White\n5872: 71869  2011_12   male    69     60-69        NA  White  White\n5873: 71882  2011_12 female    60     60-69        NA  Black  Black\n5874: 71910  2011_12 female     0       0-9         5  White  White\n           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n              <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n   1:    High School       Married 25000-34999       30000    1.36         6\n   2:    High School       Married 25000-34999       30000    1.36         6\n   3:    High School       Married 25000-34999       30000    1.36         6\n   4:           <NA>          <NA> 20000-24999       22500    1.07         9\n   5:   Some College   LivePartner 35000-44999       40000    1.91         5\n  ---                                                                       \n5870:   College Grad       Married 45000-54999       50000    2.70         9\n5871:   College Grad       Married 45000-54999       50000    2.70         9\n5872:   College Grad       Married 45000-54999       50000    2.70         9\n5873: 9 - 11th Grade       Married 10000-14999       12500    0.75         5\n5874:           <NA>          <NA> 75000-99999       87500    3.37        10\n      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n       <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   4:     Own       <NA>   17.0     NA       NA  105.4 15.30             <NA>\n   5:    Rent NotWorking   86.7     NA       NA  168.4 30.57             <NA>\n  ---                                                                        \n5870:     Own NotWorking  113.9     NA       NA  173.6 37.80             <NA>\n5871:     Own NotWorking  113.9     NA       NA  173.6 37.80             <NA>\n5872:     Own NotWorking  113.9     NA       NA  173.6 37.80             <NA>\n5873:    Rent NotWorking   72.4     NA       NA  162.9 27.30             <NA>\n5874:     Own       <NA>    6.7   67.6     42.2     NA    NA             <NA>\n           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n            <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n   1:    30.0_plus    70      113       85    114     88    114     88    112\n   2:    30.0_plus    70      113       85    114     88    114     88    112\n   3:    30.0_plus    70      113       85    114     88    114     88    112\n   4:    12.0_18.5    NA       NA       NA     NA     NA     NA     NA     NA\n   5:    30.0_plus    86      112       75    118     82    108     74    116\n  ---                                                                        \n5870:    30.0_plus    64      108       63    110     66    112     62    104\n5871:    30.0_plus    64      108       63    110     66    112     62    104\n5872:    30.0_plus    64      108       63    110     66    112     62    104\n5873: 25.0_to_29.9    56      116       77    102     78    112     74    120\n5874:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n       <int>        <num>      <num>   <num>     <int>      <num>     <int>\n   1:     82           NA       1.29    3.49       352         NA        NA\n   2:     82           NA       1.29    3.49       352         NA        NA\n   3:     82           NA       1.29    3.49       352         NA        NA\n   4:     NA           NA         NA      NA        NA         NA        NA\n   5:     76           NA       1.16    6.70        77      0.094        NA\n  ---                                                                      \n5870:     64           NA       0.88    4.01       296      1.839        NA\n5871:     64           NA       0.88    4.01       296      1.839        NA\n5872:     64           NA       0.88    4.01       296      1.839        NA\n5873:     80           NA         NA      NA       128      0.955        NA\n5874:     NA           NA         NA      NA        NA         NA        NA\n      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n           <num>   <fctr>       <int>    <fctr>           <int>           <int>\n   1:         NA       No          NA      Good               0              15\n   2:         NA       No          NA      Good               0              15\n   3:         NA       No          NA      Good               0              15\n   4:         NA       No          NA      <NA>              NA              NA\n   5:         NA       No          NA      Good               0              10\n  ---                                                                          \n5870:         NA       No          NA      Fair               3               0\n5871:         NA       No          NA      Fair               3               0\n5872:         NA       No          NA      Fair               3               0\n5873:         NA       No          NA      Fair              30               3\n5874:         NA     <NA>          NA      <NA>              NA              NA\n      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n              <fctr>    <fctr>        <int>   <int>      <int>         <int>\n   1:           Most   Several           NA      NA         NA             4\n   2:           Most   Several           NA      NA         NA             4\n   3:           Most   Several           NA      NA         NA             4\n   4:           <NA>      <NA>           NA      NA         NA            NA\n   5:        Several   Several            2       2         27             8\n  ---                                                                       \n5870:           None      None           NA      NA         NA             8\n5871:           None      None           NA      NA         NA             8\n5872:           None      None           NA      NA         NA             8\n5873:        Several   Several            2       2         18             8\n5874:           <NA>      <NA>           NA      NA         NA            NA\n      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n            <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n   1:          Yes         No             NA     <NA>       <NA>            NA\n   2:          Yes         No             NA     <NA>       <NA>            NA\n   3:          Yes         No             NA     <NA>       <NA>            NA\n   4:         <NA>       <NA>             NA     <NA>       <NA>             4\n   5:          Yes         No             NA     <NA>       <NA>            NA\n  ---                                                                         \n5870:           No         No             NA     1_hr  More_4_hr            NA\n5871:           No         No             NA     1_hr  More_4_hr            NA\n5872:           No         No              3     1_hr  More_4_hr            NA\n5873:           No         No             NA     1_hr  0_to_1_hr            NA\n5874:         <NA>       <NA>             NA     <NA>       <NA>            NA\n      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n   1:              NA             Yes         NA           0       No      Yes\n   2:              NA             Yes         NA           0       No      Yes\n   3:              NA             Yes         NA           0       No      Yes\n   4:               1            <NA>         NA          NA     <NA>     <NA>\n   5:              NA             Yes          2          20      Yes      Yes\n  ---                                                                         \n5870:              NA              No         NA           0      Yes      Yes\n5871:              NA              No         NA           0      Yes      Yes\n5872:              NA              No         NA           0      Yes      Yes\n5873:              NA             Yes         NA           0     <NA>       No\n5874:              NA            <NA>         NA          NA     <NA>     <NA>\n       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n          <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n   1:     Smoker       18       Yes            17           No          NA\n   2:     Smoker       18       Yes            17           No          NA\n   3:     Smoker       18       Yes            17           No          NA\n   4:       <NA>       NA      <NA>            NA         <NA>          NA\n   5:     Smoker       38       Yes            18           No          NA\n  ---                                                                     \n5870:     Smoker       19      <NA>            NA         <NA>          NA\n5871:     Smoker       19      <NA>            NA         <NA>          NA\n5872:     Smoker       19      <NA>            NA         <NA>          NA\n5873: Non-Smoker       NA      <NA>            NA         <NA>          NA\n5874:       <NA>       NA      <NA>            NA         <NA>          NA\n      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n         <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n   1:       Yes     Yes     16               8              1      No\n   2:       Yes     Yes     16               8              1      No\n   3:       Yes     Yes     16               8              1      No\n   4:      <NA>    <NA>     NA              NA             NA    <NA>\n   5:       Yes     Yes     12              10              1     Yes\n  ---                                                                \n5870:        No     Yes     18               3             NA      No\n5871:        No     Yes     18               3             NA      No\n5872:        No     Yes     18               3             NA      No\n5873:        No     Yes     18               3             NA      No\n5874:      <NA>    <NA>     NA              NA             NA    <NA>\n      SexOrientation PregnantNow\n              <fctr>      <fctr>\n   1:   Heterosexual        <NA>\n   2:   Heterosexual        <NA>\n   3:   Heterosexual        <NA>\n   4:           <NA>        <NA>\n   5:   Heterosexual        <NA>\n  ---                           \n5870:           <NA>        <NA>\n5871:           <NA>        <NA>\n5872:           <NA>        <NA>\n5873:           <NA>        <NA>\n5874:           <NA>        <NA>\n```\n:::\n:::\n\n\n`NA`가 아닌 데이터를 출력하는 방법은 `!is.na()` 입니다. Chapter 2의 논리 연산자 부분에서 `NOT`을 의미하는 기호는 `!`라고 배웠습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[!is.na(SleepHrsNight)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ID SurveyYr gender   age AgeDecade AgeMonths    race   Race3\n      <int>   <fctr> <fctr> <int>    <fctr>     <int>  <fctr>  <fctr>\n   1: 51624  2009_10   male    34     30-39       409   White    <NA>\n   2: 51624  2009_10   male    34     30-39       409   White    <NA>\n   3: 51624  2009_10   male    34     30-39       409   White    <NA>\n   4: 51630  2009_10 female    49     40-49       596   White    <NA>\n   5: 51647  2009_10 female    45     40-49       541   White    <NA>\n  ---                                                                \n7751: 71909  2011_12   male    28     20-29        NA Mexican Mexican\n7752: 71909  2011_12   male    28     20-29        NA Mexican Mexican\n7753: 71911  2011_12   male    27     20-29        NA Mexican Mexican\n7754: 71915  2011_12   male    60     60-69        NA   White   White\n7755: 71915  2011_12   male    60     60-69        NA   White   White\n           education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n              <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n   1:    High School       Married 25000-34999       30000    1.36         6\n   2:    High School       Married 25000-34999       30000    1.36         6\n   3:    High School       Married 25000-34999       30000    1.36         6\n   4:   Some College   LivePartner 35000-44999       40000    1.91         5\n   5:   College Grad       Married 75000-99999       87500    5.00         6\n  ---                                                                       \n7751: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3\n7752: 9 - 11th Grade  NeverMarried   5000-9999        7500    0.46         3\n7753:   College Grad       Married 75000-99999       87500    3.25        10\n7754:   College Grad  NeverMarried 65000-74999       70000    5.00         4\n7755:   College Grad  NeverMarried 65000-74999       70000    5.00         4\n      HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n       <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n   1:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   2:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   3:     Own NotWorking   87.4     NA       NA  164.7 32.22             <NA>\n   4:    Rent NotWorking   86.7     NA       NA  168.4 30.57             <NA>\n   5:     Own    Working   75.7     NA       NA  166.7 27.24             <NA>\n  ---                                                                        \n7751:    Rent    Working   92.3     NA       NA  177.3 29.40             <NA>\n7752:    Rent    Working   92.3     NA       NA  177.3 29.40             <NA>\n7753:     Own    Working   96.7     NA       NA  175.8 31.30             <NA>\n7754:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n7755:     Own    Working   78.4     NA       NA  168.8 27.50             <NA>\n           BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n            <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n   1:    30.0_plus    70      113       85    114     88    114     88    112\n   2:    30.0_plus    70      113       85    114     88    114     88    112\n   3:    30.0_plus    70      113       85    114     88    114     88    112\n   4:    30.0_plus    86      112       75    118     82    108     74    116\n   5: 25.0_to_29.9    62      118       64    106     62    118     68    118\n  ---                                                                        \n7751: 25.0_to_29.9    68      124       65    124     62    126     64    122\n7752: 25.0_to_29.9    68      124       65    124     62    126     64    122\n7753:    30.0_plus    74      133       74    122     76    132     82    134\n7754: 25.0_to_29.9    76      147       73    150     72    148     74    146\n7755: 25.0_to_29.9    76      147       73    150     72    148     74    146\n      BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n       <int>        <num>      <num>   <num>     <int>      <num>     <int>\n   1:     82           NA       1.29    3.49       352         NA        NA\n   2:     82           NA       1.29    3.49       352         NA        NA\n   3:     82           NA       1.29    3.49       352         NA        NA\n   4:     76           NA       1.16    6.70        77      0.094        NA\n   5:     60           NA       2.12    5.82       106      1.116        NA\n  ---                                                                      \n7751:     66       490.43       1.22    3.90        97      0.942        NA\n7752:     66       490.43       1.22    3.90        97      0.942        NA\n7753:     66       509.00       1.06    5.72        63      0.600        NA\n7754:     72       505.13       0.93    4.94       218      1.253        NA\n7755:     72       505.13       0.93    4.94       218      1.253        NA\n      UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n           <num>   <fctr>       <int>    <fctr>           <int>           <int>\n   1:         NA       No          NA      Good               0              15\n   2:         NA       No          NA      Good               0              15\n   3:         NA       No          NA      Good               0              15\n   4:         NA       No          NA      Good               0              10\n   5:         NA       No          NA     Vgood               0               3\n  ---                                                                          \n7751:         NA       No          NA      <NA>              NA              NA\n7752:         NA       No          NA      <NA>              NA              NA\n7753:         NA       No          NA      Good               0               2\n7754:         NA      Yes          56      Good               0               2\n7755:         NA      Yes          56      Good               0               2\n      LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n              <fctr>    <fctr>        <int>   <int>      <int>         <int>\n   1:           Most   Several           NA      NA         NA             4\n   2:           Most   Several           NA      NA         NA             4\n   3:           Most   Several           NA      NA         NA             4\n   4:        Several   Several            2       2         27             8\n   5:           None      None            1      NA         NA             8\n  ---                                                                       \n7751:           <NA>      <NA>           NA      NA         NA             6\n7752:           <NA>      <NA>           NA      NA         NA             6\n7753:           None      None           NA      NA         NA             6\n7754:           None      None           NA      NA         NA             6\n7755:           None      None           NA      NA         NA             6\n      SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild\n            <fctr>     <fctr>          <int>   <fctr>     <fctr>         <int>\n   1:          Yes         No             NA     <NA>       <NA>            NA\n   2:          Yes         No             NA     <NA>       <NA>            NA\n   3:          Yes         No             NA     <NA>       <NA>            NA\n   4:          Yes         No             NA     <NA>       <NA>            NA\n   5:           No        Yes              5     <NA>       <NA>            NA\n  ---                                                                         \n7751:           No        Yes             NA     1_hr       2_hr            NA\n7752:           No        Yes             NA     1_hr       2_hr            NA\n7753:           No         No              3     1_hr  0_to_1_hr            NA\n7754:           No         No              1     2_hr       1_hr            NA\n7755:           No         No             NA     2_hr       1_hr            NA\n      CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n   1:              NA             Yes         NA           0       No      Yes\n   2:              NA             Yes         NA           0       No      Yes\n   3:              NA             Yes         NA           0       No      Yes\n   4:              NA             Yes          2          20      Yes      Yes\n   5:              NA             Yes          3          52     <NA>       No\n  ---                                                                         \n7751:              NA            <NA>         NA          NA      Yes      Yes\n7752:              NA            <NA>         NA          NA      Yes      Yes\n7753:              NA             Yes          5           4     <NA>       No\n7754:              NA             Yes         NA           0     <NA>       No\n7755:              NA             Yes         NA           0     <NA>       No\n       Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n          <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n   1:     Smoker       18       Yes            17           No          NA\n   2:     Smoker       18       Yes            17           No          NA\n   3:     Smoker       18       Yes            17           No          NA\n   4:     Smoker       38       Yes            18           No          NA\n   5: Non-Smoker       NA       Yes            13           No          NA\n  ---                                                                     \n7751:     Smoker       18      <NA>            NA         <NA>          NA\n7752:     Smoker       18      <NA>            NA         <NA>          NA\n7753: Non-Smoker       NA       Yes            22           No          NA\n7754: Non-Smoker       NA      <NA>            NA         <NA>          NA\n7755: Non-Smoker       NA      <NA>            NA         <NA>          NA\n      HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n         <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n   1:       Yes     Yes     16               8              1      No\n   2:       Yes     Yes     16               8              1      No\n   3:       Yes     Yes     16               8              1      No\n   4:       Yes     Yes     12              10              1     Yes\n   5:        No     Yes     13              20              0     Yes\n  ---                                                                \n7751:      <NA>    <NA>     NA              NA             NA    <NA>\n7752:      <NA>    <NA>     NA              NA             NA    <NA>\n7753:        No     Yes     21               1              1      No\n7754:        No     Yes     19               2             NA      No\n7755:        No     Yes     19               2             NA      No\n      SexOrientation PregnantNow\n              <fctr>      <fctr>\n   1:   Heterosexual        <NA>\n   2:   Heterosexual        <NA>\n   3:   Heterosexual        <NA>\n   4:   Heterosexual        <NA>\n   5:       Bisexual        <NA>\n  ---                           \n7751:           <NA>        <NA>\n7752:           <NA>        <NA>\n7753:   Heterosexual        <NA>\n7754:           <NA>        <NA>\n7755:           <NA>        <NA>\n```\n:::\n:::\n\n\n### 4) 행의 정렬\n\n행의 정렬 역시 `i` 부분에서 담당합니다. 특정한 column을 기준으로 데이터를 오름차순 또는 내림차순 정렬을 할 때 사용할 수 있습니다.\n\n`data.table`에서 특정 column을 기준으로 데이터를 정렬하는 방법은 두 가지가 있습니다.\n\n-   `order()`\n\n    `order()`는 정렬한 값의 출력만 합니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[order(BMI)] |> head()\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n          ID SurveyYr gender   age AgeDecade AgeMonths    race   Race3 education\n       <int>   <fctr> <fctr> <int>    <fctr>     <int>  <fctr>  <fctr>    <fctr>\n    1: 60527  2009_10 female     3       0-9        42   Other    <NA>      <NA>\n    2: 52534  2009_10   male     9       0-9       109 Mexican    <NA>      <NA>\n    3: 64250  2011_12 female     3       0-9        NA Mexican Mexican      <NA>\n    4: 64751  2011_12   male     9       0-9        NA   White   White      <NA>\n    5: 64751  2011_12   male     9       0-9        NA   White   White      <NA>\n    6: 64751  2011_12   male     9       0-9        NA   White   White      <NA>\n       MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms HomeOwn   Work\n              <fctr>      <fctr>       <int>   <num>     <int>  <fctr> <fctr>\n    1:          <NA>  more 99999      100000    5.00         9     Own   <NA>\n    2:          <NA> 25000-34999       30000    1.41         4    Rent   <NA>\n    3:          <NA> 35000-44999       40000    1.79         4     Own   <NA>\n    4:          <NA>        <NA>          NA      NA         5     Own   <NA>\n    5:          <NA>        <NA>          NA      NA         5     Own   <NA>\n    6:          <NA>        <NA>          NA      NA         5     Own   <NA>\n       Weight Length HeadCirc Height   BMI BMICatUnder20yrs   BMI_WHO Pulse\n        <num>  <num>    <num>  <num> <num>           <fctr>    <fctr> <int>\n    1:   11.7   97.0       NA   95.3 12.88             <NA> 12.0_18.5    NA\n    2:   20.5     NA       NA  126.1 12.89             <NA> 12.0_18.5    68\n    3:   12.4   98.4       NA   98.1 12.90      UnderWeight 12.0_18.5    NA\n    4:   30.1     NA       NA  152.5 12.90      UnderWeight 12.0_18.5    82\n    5:   30.1     NA       NA  152.5 12.90      UnderWeight 12.0_18.5    82\n    6:   30.1     NA       NA  152.5 12.90      UnderWeight 12.0_18.5    82\n       BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3 Testosterone\n          <int>    <int>  <int>  <int>  <int>  <int>  <int>  <int>        <num>\n    1:       NA       NA     NA     NA     NA     NA     NA     NA           NA\n    2:       88       15     98      0     88     14     88     16           NA\n    3:       NA       NA     NA     NA     NA     NA     NA     NA           NA\n    4:       91       58     92     64     92     54     90     62         3.69\n    5:       91       58     92     64     92     54     90     62         3.69\n    6:       91       58     92     64     92     54     90     62         3.69\n       DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2 Diabetes\n            <num>   <num>     <int>      <num>     <int>      <num>   <fctr>\n    1:         NA      NA        NA         NA        NA         NA       No\n    2:         NA      NA        NA         NA        NA         NA       No\n    3:         NA      NA        NA         NA        NA         NA       No\n    4:       1.22    3.28        35      0.324        67      0.573       No\n    5:       1.22    3.28        35      0.324        67      0.573       No\n    6:       1.22    3.28        35      0.324        67      0.573       No\n       DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad LittleInterest\n             <int>    <fctr>           <int>           <int>         <fctr>\n    1:          NA      <NA>              NA              NA           <NA>\n    2:          NA      <NA>              NA              NA           <NA>\n    3:          NA      <NA>              NA              NA           <NA>\n    4:          NA      <NA>              NA              NA           <NA>\n    5:          NA      <NA>              NA              NA           <NA>\n    6:          NA      <NA>              NA              NA           <NA>\n       Depressed nPregnancies nBabies Age1stBaby SleepHrsNight SleepTrouble\n          <fctr>        <int>   <int>      <int>         <int>       <fctr>\n    1:      <NA>           NA      NA         NA            NA         <NA>\n    2:      <NA>           NA      NA         NA            NA         <NA>\n    3:      <NA>           NA      NA         NA            NA         <NA>\n    4:      <NA>           NA      NA         NA            NA         <NA>\n    5:      <NA>           NA      NA         NA            NA         <NA>\n    6:      <NA>           NA      NA         NA            NA         <NA>\n       PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild CompHrsDayChild\n           <fctr>          <int>   <fctr>     <fctr>         <int>           <int>\n    1:       <NA>             NA     <NA>       <NA>             0               0\n    2:       <NA>             NA     <NA>       <NA>             4               0\n    3:       <NA>             NA     2_hr      0_hrs            NA              NA\n    4:       <NA>              4     4_hr  0_to_1_hr            NA              NA\n    5:       <NA>              5     4_hr  0_to_1_hr            NA              NA\n    6:       <NA>              7     4_hr  0_to_1_hr            NA              NA\n       Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100 Smoke100n SmokeAge\n                <fctr>      <int>       <int>   <fctr>   <fctr>    <fctr>    <int>\n    1:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n    2:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n    3:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n    4:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n    5:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n    6:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n       Marijuana AgeFirstMarij RegularMarij AgeRegMarij HardDrugs SexEver SexAge\n          <fctr>         <int>       <fctr>       <int>    <fctr>  <fctr>  <int>\n    1:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n    2:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n    3:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n    4:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n    5:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n    6:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n       SexNumPartnLife SexNumPartYear SameSex SexOrientation PregnantNow\n                 <int>          <int>  <fctr>         <fctr>      <fctr>\n    1:              NA             NA    <NA>           <NA>        <NA>\n    2:              NA             NA    <NA>           <NA>        <NA>\n    3:              NA             NA    <NA>           <NA>        <NA>\n    4:              NA             NA    <NA>           <NA>        <NA>\n    5:              NA             NA    <NA>           <NA>        <NA>\n    6:              NA             NA    <NA>           <NA>        <NA>\n    ```\n    :::\n    :::\n\n\n    만약 내림차순으로 정렬하고 싶은 경우는 변수 앞에 -를 붙여주면 됩니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[order(-BMI)] |> head()\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n          ID SurveyYr gender   age AgeDecade AgeMonths     race  Race3\n       <int>   <fctr> <fctr> <int>    <fctr>     <int>   <fctr> <fctr>\n    1: 52315  2009_10 female    52     50-59       629    Black   <NA>\n    2: 52315  2009_10 female    52     50-59       629    Black   <NA>\n    3: 70466  2011_12 female    25     20-29        NA    White  White\n    4: 69207  2011_12 female    30     30-39        NA    Black  Black\n    5: 61693  2009_10 female    33     30-39       406 Hispanic   <NA>\n    6: 59688  2009_10 female    39     30-39       471    White   <NA>\n            education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n               <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n    1:    High School       Married 45000-54999       50000    2.27         8\n    2:    High School       Married 45000-54999       50000    2.27         8\n    3:    High School   LivePartner      0-4999        2500    0.16         5\n    4:    High School  NeverMarried 20000-24999       22500    1.52         4\n    5:   Some College  NeverMarried 15000-19999       17500    1.34         4\n    6: 9 - 11th Grade       Married 25000-34999       30000    1.02         5\n       HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n        <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n    1:     Own    Working  230.7     NA       NA  168.5 81.25             <NA>\n    2:     Own    Working  230.7     NA       NA  168.5 81.25             <NA>\n    3:    Rent    Working  198.7     NA       NA  157.0 80.60             <NA>\n    4:    Rent    Working  187.5     NA       NA  164.8 69.00             <NA>\n    5:    Rent NotWorking  188.9     NA       NA  165.9 68.63             <NA>\n    6:    Rent NotWorking  170.2     NA       NA  158.4 67.83             <NA>\n         BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3\n          <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>  <int>\n    1: 30.0_plus    68      111       77     NA     NA    106     82    116     72\n    2: 30.0_plus    68      111       77     NA     NA    106     82    116     72\n    3: 30.0_plus   124      132       80    130     80    132     80     NA     NA\n    4: 30.0_plus    74      108       72    110     62    108     76    108     68\n    5: 30.0_plus   102      119       78    118     84    122     72    116     84\n    6: 30.0_plus   104      124       75    124     74    128     80    120     70\n       Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2\n              <num>      <num>   <num>     <int>      <num>     <int>      <num>\n    1:           NA       0.85    3.98         0      0.000        NA         NA\n    2:           NA       0.85    3.98         0      0.000        NA         NA\n    3:        81.26       2.02    5.79        NA         NA        NA         NA\n    4:        23.58       0.96    4.42       101      0.795        NA         NA\n    5:           NA       1.01    7.24        13      0.075        29      0.558\n    6:           NA       0.96    6.10        75      0.277        NA         NA\n       Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n         <fctr>       <int>    <fctr>           <int>           <int>\n    1:      Yes          40      Good              14               4\n    2:      Yes          40      Good              14               4\n    3:       No          NA      <NA>              NA              NA\n    4:       No          NA      Fair               3               7\n    5:      Yes          29      Good               0               0\n    6:      Yes          23      Poor              14              30\n       LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n               <fctr>    <fctr>        <int>   <int>      <int>         <int>\n    1:        Several      None           NA      NA         NA             8\n    2:        Several      None           NA      NA         NA             8\n    3:           <NA>      <NA>           NA      NA         NA             4\n    4:           None      None           NA      NA         NA             8\n    5:           Most      Most           NA      NA         NA            11\n    6:        Several      Most            3       3         17            10\n       SleepTrouble PhysActive PhysActiveDays  TVHrsDay CompHrsDay TVHrsDayChild\n             <fctr>     <fctr>          <int>    <fctr>     <fctr>         <int>\n    1:           No         No             NA      <NA>       <NA>            NA\n    2:           No         No             NA      <NA>       <NA>            NA\n    3:           No         No             NA 0_to_1_hr      0_hrs            NA\n    4:           No         No             NA      3_hr      0_hrs            NA\n    5:          Yes         No             NA      <NA>       <NA>            NA\n    6:           No         No             NA      <NA>       <NA>            NA\n       CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n                 <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n    1:              NA              No         NA          NA     <NA>       No\n    2:              NA              No         NA          NA     <NA>       No\n    3:              NA            <NA>         NA          NA     <NA>       No\n    4:              NA              No          1           5     <NA>       No\n    5:              NA              No         NA          NA     <NA>       No\n    6:              NA             Yes          3           2       No      Yes\n        Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n           <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n    1: Non-Smoker       NA        No            NA           No          NA\n    2: Non-Smoker       NA        No            NA           No          NA\n    3: Non-Smoker       NA      <NA>            NA         <NA>          NA\n    4: Non-Smoker       NA       Yes            17          Yes          17\n    5: Non-Smoker       NA        No            NA           No          NA\n    6:     Smoker       16       Yes            15           No          NA\n       HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n          <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n    1:        No     Yes     38               1              1      No\n    2:        No     Yes     38               1              1      No\n    3:      <NA>    <NA>     NA              NA             NA    <NA>\n    4:        No     Yes     13               5              1      No\n    5:        No      No     NA               0              0      No\n    6:       Yes     Yes     12              15              1     Yes\n       SexOrientation PregnantNow\n               <fctr>      <fctr>\n    1:   Heterosexual        <NA>\n    2:   Heterosexual        <NA>\n    3:           <NA>         Yes\n    4:   Heterosexual          No\n    5:   Heterosexual          No\n    6:   Heterosexual          No\n    ```\n    :::\n    :::\n\n\n-   `setorder()`\n\n    `setorder()`는 데이터를 정렬하여 data.table에 저장합니다. `order`와는 다르게 정렬된 결과를 출력하지는 않습니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    setorder(dt, # 정렬할 데이터\n             age # 기준이 되는 변수\n             )\n    ```\n    :::\n\n\n::: callout-tip\n## set이 들어가는 함수\n\n`data.table`에서 `set`이 붙는 함수는 어떤 값을 출력없이 저장하는 함수입니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetnames() # column의 이름 변겅\nsetorder() # row 정렬\nsetDT() #  data.table로 저장\n```\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n## 4. j: data.table 열\n\n`j` 부분은 데이터의 열 (column)을 다루는 부분을 의미합니다. `j` 부분을 통해 원하는 열들을 선택하거나, 특정 열을 계산할 수 있습니다. 또한 새로운 변수를 생성하거나 기존의 변수를 수정 또는 삭제할 수 있습니다.\n\n`j` 를 활용하기 위해선 `dt[,j]` 처럼 앞에 `,`를 항상 붙여줘야 합니다.\n\n### 1) column 선택\n\n`data.table`에서 열을 선택하는 방법은 다양합니다.\n\n-   `dt[,c('X','Y')]`\n\n-   `dt[,list(X,Y)]`\n\n-   `dt[,.(X,Y)]`\n\n여기서 `list()`와 `.()`은 동일한 기능입니다. 동일한 기능이라면 더 적은 코드를 입력하는 후자가 더 낫겠죠?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,.(gender,age)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       gender   age\n       <fctr> <int>\n    1: female     0\n    2: female     0\n    3:   male     0\n    4:   male     0\n    5: female     0\n   ---             \n 9996:   male    80\n 9997:   male    80\n 9998:   male    80\n 9999:   male    80\n10000:   male    80\n```\n:::\n:::\n\n\n문자 vector를 이용해서도 원하는 column을 선택할 수 있습니다. 이 때는 `..`기호를 이용해야 합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntarget <- c('gender','age','race')\ndt[,..target]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       gender   age     race\n       <fctr> <int>   <fctr>\n    1: female     0 Hispanic\n    2: female     0    Black\n    3:   male     0    Black\n    4:   male     0    Black\n    5: female     0    White\n   ---                      \n 9996:   male    80    White\n 9997:   male    80    White\n 9998:   male    80    White\n 9999:   male    80    White\n10000:   male    80    White\n```\n:::\n:::\n\n\n### 2) column 계산\n\ncolumn을 계산하는 것 역시 `data.table`의 `j` 부분에서 담당합니다. 예를 들어 특정 column의 평균을 계산하거나 표준편차를 계산하는 경우가 있겠죠. 만약 하나의 column만 계산하는 경우 `data.table`의 `[]` 안에서 함수를 이용하면 됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,mean(BMI,na.rm=T)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 26.66014\n```\n:::\n:::\n\n\n만약 여러 개의 column에 대해 계산하는 경우 또는 계산하는 값을 `data.table` 형태로 출력하고 싶은 경우, column 선택에서 배웠던 `.()`를 활용하면 됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,.(mean_BMI = mean(BMI, na.rm=T),\n      sd_BMI = sd(BMI,na.rm=T))]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   mean_BMI   sd_BMI\n      <num>    <num>\n1: 26.66014 7.376579\n```\n:::\n:::\n\n\n### 3) column 생성 및 변경 `:=`\n\n`data.table`에는 특수한 기호가 있습니다. 바로 `:=` 입니다. walrus (바다코끼리) 연산자라고도 불리기도 합니다. 바다코끼리의 어금니를 닮아서 붙여진 이름 같습니다.\n\n![바다코끼리(Walrus)의 어금니가 `:=` 와 닮았습니다.](walrus.jpg){fig-align=\"center\" width=\"400\"}\n\n`data.table`을 사용한다면 `:=` 연산자를 활용할 줄 아는 것이 굉장히 중요합니다. 새로운 column을 추가하거나, 기존의 column을 변경할 때, 또는 column을 삭제할 때 활용되는 연산자 입니다.\n\n#### a. column의 생성\n\n새로운 column을 생성하기 위해서는 `dt[,column_name := value]` 형식으로 코드를 작성합니다. `:=`의 왼쪽에는 새로운 column의 이름이, 오른쪽에는 데이터를 입력합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,age_group := paste0((age %/% 10) * 10,'대')]\ndt[,table(age_group)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nage_group\n 0대 10대 20대 30대 40대 50대 60대 70대 80대 \n1391 1374 1356 1338 1398 1304  919  587  333 \n```\n:::\n:::\n\n\n`age` 를 이용하여 `age_group`(연령대) column을 추가하였습니다.\n\n만약 여러 개의 column을 동시에 추가하고 싶다면, 백틱(``` `` ```) 또는 따옴표(`''`)과 함께 `:=`를 사용해야 합니다.\n\n이 때 `()`안의 등호들은 `:=`가 아니라 그냥 등호(`=`)를 사용해야 합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,`:=`(\n  age2 = age/5,\n  age3 = age/10\n)]\n```\n:::\n\n\n#### b. column의 변경\n\ncolumn을 변경한다는 것은 기존의 column 값들을 다르게 바꿔준다는 것입니다. 예를 들면 1과 2로 이루어진 column을 'no'와 'yes'로 변경해주는 것처럼요.\n\ncolumn을 변경하는 것 역시 생성과 마찬가지로 `dt[,column_name := value]` 형식으로 코드를 작성하면 됩니다. `column_name`에는 바꿔줄 column의 이름이, `value`에는 새롭게 넣어줄 데이터를 입력합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,gender := ifelse(gender=='male','m','f')]\n```\n:::\n\n\n위의 코드처럼 `:=`를 이용해 `male`, `female`로 되어있는 `Gender` 를 각각 `m`과 `f`로 변경할 수 있습니다.\n\n한편 여러 개의 column을 생성하거나 변경하는 경우, 새로운 column이 생성되는 `[]`안에서 그 column을 바로 사용할 수 없습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|eval: false\ndt[,`:=`(\n  A2=age,\n  A3=A2\n)]\n\n# 에러메시지 발생\n# Error in eval(jsub, SDenv, parent.frame()) : object 'A2' not found\n```\n:::\n\n\n위 코드는 A2와 A3 column을 동시에 생성하는 코드입니다. 그러나 A2가 아직 만들어지지 않았기 때문에, A3 column은 생성될 수 없습니다. 따라서,\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,A2:=age][,A3:=A2][]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          ID SurveyYr gender   age AgeDecade AgeMonths     race  Race3\n       <int>   <fctr> <char> <int>    <fctr>     <int>   <fctr> <fctr>\n    1: 51962  2009_10      f     0       0-9         2 Hispanic   <NA>\n    2: 52066  2009_10      f     0       0-9         8    Black   <NA>\n    3: 52300  2009_10      m     0       0-9         2    Black   <NA>\n    4: 52373  2009_10      m     0       0-9         7    Black   <NA>\n    5: 52435  2009_10      f     0       0-9         6    White   <NA>\n   ---                                                                \n 9996: 71797  2011_12      m    80      <NA>        NA    White  White\n 9997: 71797  2011_12      m    80      <NA>        NA    White  White\n 9998: 71907  2011_12      m    80      <NA>        NA    White  White\n 9999: 71907  2011_12      m    80      <NA>        NA    White  White\n10000: 71907  2011_12      m    80      <NA>        NA    White  White\n         education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n            <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n    1:        <NA>          <NA> 15000-19999       17500    1.24         4\n    2:        <NA>          <NA>      0-4999        2500    0.24         5\n    3:        <NA>          <NA>   5000-9999        7500    0.55         3\n    4:        <NA>          <NA> 75000-99999       87500    5.00         4\n    5:        <NA>          <NA> 45000-54999       50000    2.04         5\n   ---                                                                    \n 9996: High School       Widowed        <NA>          NA      NA        NA\n 9997: High School       Widowed        <NA>          NA      NA        NA\n 9998: High School       Married 55000-64999       60000    4.08         6\n 9999: High School       Married 55000-64999       60000    4.08         6\n10000: High School       Married 55000-64999       60000    4.08         6\n       HomeOwn       Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n        <fctr>     <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n    1:    Rent       <NA>    4.5   56.6     38.8     NA    NA             <NA>\n    2:    Rent       <NA>    9.5   72.5       NA     NA    NA             <NA>\n    3:    Rent       <NA>    6.9   63.4     41.9     NA    NA             <NA>\n    4:     Own       <NA>   10.7   74.7       NA     NA    NA             <NA>\n    5:     Own       <NA>    9.0   64.7     44.3     NA    NA             <NA>\n   ---                                                                        \n 9996:    <NA> NotWorking     NA     NA       NA  182.6    NA             <NA>\n 9997:    <NA> NotWorking     NA     NA       NA  182.6    NA             <NA>\n 9998:     Own NotWorking   71.5     NA       NA  175.4  23.2             <NA>\n 9999:     Own NotWorking   71.5     NA       NA  175.4  23.2             <NA>\n10000:     Own NotWorking   71.5     NA       NA  175.4  23.2             <NA>\n            BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n             <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n    1:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n    2:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n    3:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n    4:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n    5:         <NA>    NA       NA       NA     NA     NA     NA     NA     NA\n   ---                                                                        \n 9996:         <NA>    74      153       52    164     60    158     62    148\n 9997:         <NA>    74      153       52    164     60    158     62    148\n 9998: 18.5_to_24.9    54      148       70    150     72    150     70    146\n 9999: 18.5_to_24.9    54      148       70    150     72    150     70    146\n10000: 18.5_to_24.9    54      148       70    150     72    150     70    146\n       BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n        <int>        <num>      <num>   <num>     <int>      <num>     <int>\n    1:     NA           NA         NA      NA        NA         NA        NA\n    2:     NA           NA         NA      NA        NA         NA        NA\n    3:     NA           NA         NA      NA        NA         NA        NA\n    4:     NA           NA         NA      NA        NA         NA        NA\n    5:     NA           NA         NA      NA        NA         NA        NA\n   ---                                                                      \n 9996:     42        401.0       0.72    3.65       313      1.079        NA\n 9997:     42        401.0       0.72    3.65       313      1.079        NA\n 9998:     70        402.9       1.27    4.37        61      1.052        NA\n 9999:     70        402.9       1.27    4.37        61      1.052        NA\n10000:     70        402.9       1.27    4.37        61      1.052        NA\n       UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad\n            <num>   <fctr>       <int>    <fctr>           <int>\n    1:         NA     <NA>          NA      <NA>              NA\n    2:         NA     <NA>          NA      <NA>              NA\n    3:         NA     <NA>          NA      <NA>              NA\n    4:         NA     <NA>          NA      <NA>              NA\n    5:         NA     <NA>          NA      <NA>              NA\n   ---                                                          \n 9996:         NA      Yes          30      Good               0\n 9997:         NA      Yes          30      Good               0\n 9998:         NA       No          NA      Good               0\n 9999:         NA       No          NA      Good               0\n10000:         NA       No          NA      Good               0\n       DaysMentHlthBad LittleInterest Depressed nPregnancies nBabies Age1stBaby\n                 <int>         <fctr>    <fctr>        <int>   <int>      <int>\n    1:              NA           <NA>      <NA>           NA      NA         NA\n    2:              NA           <NA>      <NA>           NA      NA         NA\n    3:              NA           <NA>      <NA>           NA      NA         NA\n    4:              NA           <NA>      <NA>           NA      NA         NA\n    5:              NA           <NA>      <NA>           NA      NA         NA\n   ---                                                                         \n 9996:              30        Several   Several           NA      NA         NA\n 9997:              30        Several   Several           NA      NA         NA\n 9998:               0           None      None           NA      NA         NA\n 9999:               0           None      None           NA      NA         NA\n10000:               0           None      None           NA      NA         NA\n       SleepHrsNight SleepTrouble PhysActive PhysActiveDays TVHrsDay CompHrsDay\n               <int>       <fctr>     <fctr>          <int>   <fctr>     <fctr>\n    1:            NA         <NA>       <NA>             NA     <NA>       <NA>\n    2:            NA         <NA>       <NA>             NA     <NA>       <NA>\n    3:            NA         <NA>       <NA>             NA     <NA>       <NA>\n    4:            NA         <NA>       <NA>             NA     <NA>       <NA>\n    5:            NA         <NA>       <NA>             NA     <NA>       <NA>\n   ---                                                                         \n 9996:             8           No         No              1    0_hrs      0_hrs\n 9997:             8           No         No              5    0_hrs      0_hrs\n 9998:             5           No        Yes             NA     3_hr      0_hrs\n 9999:             5           No        Yes              4     3_hr      0_hrs\n10000:             5           No        Yes              7     3_hr      0_hrs\n       TVHrsDayChild CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear\n               <int>           <int>          <fctr>      <int>       <int>\n    1:            NA              NA            <NA>         NA          NA\n    2:            NA              NA            <NA>         NA          NA\n    3:            NA              NA            <NA>         NA          NA\n    4:            NA              NA            <NA>         NA          NA\n    5:            NA              NA            <NA>         NA          NA\n   ---                                                                     \n 9996:            NA              NA             Yes          1         156\n 9997:            NA              NA             Yes          1         156\n 9998:            NA              NA             Yes         NA           0\n 9999:            NA              NA             Yes         NA           0\n10000:            NA              NA             Yes         NA           0\n       SmokeNow Smoke100  Smoke100n SmokeAge Marijuana AgeFirstMarij\n         <fctr>   <fctr>     <fctr>    <int>    <fctr>         <int>\n    1:     <NA>     <NA>       <NA>       NA      <NA>            NA\n    2:     <NA>     <NA>       <NA>       NA      <NA>            NA\n    3:     <NA>     <NA>       <NA>       NA      <NA>            NA\n    4:     <NA>     <NA>       <NA>       NA      <NA>            NA\n    5:     <NA>     <NA>       <NA>       NA      <NA>            NA\n   ---                                                              \n 9996:     <NA>       No Non-Smoker       NA      <NA>            NA\n 9997:     <NA>       No Non-Smoker       NA      <NA>            NA\n 9998:     <NA>       No Non-Smoker       NA      <NA>            NA\n 9999:     <NA>       No Non-Smoker       NA      <NA>            NA\n10000:     <NA>       No Non-Smoker       NA      <NA>            NA\n       RegularMarij AgeRegMarij HardDrugs SexEver SexAge SexNumPartnLife\n             <fctr>       <int>    <fctr>  <fctr>  <int>           <int>\n    1:         <NA>          NA      <NA>    <NA>     NA              NA\n    2:         <NA>          NA      <NA>    <NA>     NA              NA\n    3:         <NA>          NA      <NA>    <NA>     NA              NA\n    4:         <NA>          NA      <NA>    <NA>     NA              NA\n    5:         <NA>          NA      <NA>    <NA>     NA              NA\n   ---                                                                  \n 9996:         <NA>          NA      <NA>    <NA>     NA              NA\n 9997:         <NA>          NA      <NA>    <NA>     NA              NA\n 9998:         <NA>          NA      <NA>    <NA>     NA              NA\n 9999:         <NA>          NA      <NA>    <NA>     NA              NA\n10000:         <NA>          NA      <NA>    <NA>     NA              NA\n       SexNumPartYear SameSex SexOrientation PregnantNow age_group  age2  age3\n                <int>  <fctr>         <fctr>      <fctr>    <char> <num> <num>\n    1:             NA    <NA>           <NA>        <NA>       0대     0     0\n    2:             NA    <NA>           <NA>        <NA>       0대     0     0\n    3:             NA    <NA>           <NA>        <NA>       0대     0     0\n    4:             NA    <NA>           <NA>        <NA>       0대     0     0\n    5:             NA    <NA>           <NA>        <NA>       0대     0     0\n   ---                                                                        \n 9996:             NA    <NA>           <NA>        <NA>      80대    16     8\n 9997:             NA    <NA>           <NA>        <NA>      80대    16     8\n 9998:             NA    <NA>           <NA>        <NA>      80대    16     8\n 9999:             NA    <NA>           <NA>        <NA>      80대    16     8\n10000:             NA    <NA>           <NA>        <NA>      80대    16     8\n          A2    A3\n       <int> <int>\n    1:     0     0\n    2:     0     0\n    3:     0     0\n    4:     0     0\n    5:     0     0\n   ---            \n 9996:    80    80\n 9997:    80    80\n 9998:    80    80\n 9999:    80    80\n10000:    80    80\n```\n:::\n:::\n\n\n위의 코드처럼 `[]`을 여러 번 붙여 순차적으로 column을 생성 또는 변경해주어야 합니다. 이를 **chaining**이라고 합니다.\n\n#### c. column의 삭제\n\n특정 데이터의 column을 삭제할 때는 `dt[,column_name := NULL]` 형식을 사용합니다. 삭제하려는 하는 `column_name`만 선택하면 되겠죠.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,column_name := NULL] # 삭제대상 열 이름 := NULL\n```\n:::\n\n\n`:=` 연산자를 활용한 코드를 실행하게 되면 해당 데이터가 저장이 될 뿐, 출력이 되진 않습니다 (`set`함수와 같은 역할). 변경한 column을 확인하기 위해선 대괄호를 한 번 더 붙여줍니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,column_name := NULL][]\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## 5. by: 그룹 별 분석\n\n`by`: 특정 column에 따라 `j` 를 계산합니다. 예를 들어 성별에 따른 나이의 평균을 구하는 경우, 따라서 [`by`를 사용하기 위해서는 `j` 부분이 존재해야]{.underline} 합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,mean(age),by=MaritalStatus]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   MaritalStatus        V1\n          <fctr>     <num>\n1:          <NA>  9.531961\n2:  NeverMarried 32.926087\n3:   LivePartner 37.771429\n4:       Married 50.078327\n5:     Separated 45.775956\n6:      Divorced 51.302687\n7:       Widowed 70.679825\n```\n:::\n:::\n\n\n`keyby`: by와 마찬가지로 특정 그룹에 따라 계산합니다. 하지만 `by`와 다르게 그룹으로 선택된 column을 기준으로 정렬하여 결과값을 출력합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,mean(age),keyby=MaritalStatus]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <MaritalStatus>\n   MaritalStatus        V1\n          <fctr>     <num>\n1:          <NA>  9.531961\n2:      Divorced 51.302687\n3:   LivePartner 37.771429\n4:       Married 50.078327\n5:  NeverMarried 32.926087\n6:     Separated 45.775956\n7:       Widowed 70.679825\n```\n:::\n:::\n\n\n혼인상태(`MaritalStatus`)에 따른 나이(`age`)의 평균 값이 혼인상태의 이름으로 오름차순 정렬이 되어 출력된 것을 확인할 수 있습니다.\n\n------------------------------------------------------------------------\n\n## 6. 이외 유용한 data.table 전용 함수\n\n-   `fifelse()`: fast ifelse입니다. `ifelse()`보다 더 빠르게 작업을 수행합니다.기본 `ifelse()`와 다르게 yes와 no 자리에 오는 인자들의 유형(type)이 반드시 동일해야 합니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,SEX := fifelse(gender=='m','남성','여성')]\n    dt[,Temp := fifelse(age<10,NA,age)] # error 발생.\n    ```\n    :::\n\n\n-   `fcase()` : fast case when입니다. `ifelse()`처럼 조건을 사용해 데이터를 조작하지만, 반복적으로 `ifelse()` 함수를 계속해서 사용할 필요가 없기 때문에 더 적은 코드를 사용합니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,age_group2 := fcase(\n      age<20,'10대',\n      age<30,'20대',\n      age<40,'30대',\n      age<50,'40대',\n      age<60,'50대'\n    )]\n    dt[,table(age_group2, useNA = 'always')]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    age_group2\n    10대 20대 30대 40대 50대 <NA> \n    2765 1356 1338 1398 1304 1839 \n    ```\n    :::\n    :::\n\n\n    조건에 해당되지 않는 나머지 값들은 자동으로 `NA` 처리 됩니다. 나머지 값들에 값을 주고 싶다면 `default` 인자를 활용하면 됩니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,age_group2 := fcase(\n      age<20,'10대',\n      age<30,'20대',\n      age<40,'30대',\n      age<50,'40대',\n      age<60,'50대',\n      default='60대 이상'\n    )]\n    dt[,table(age_group2, useNA = 'always')]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    age_group2\n         10대      20대      30대      40대      50대 60대 이상      <NA> \n         2765      1356      1338      1398      1304      1839         0 \n    ```\n    :::\n    :::\n\n\n-   `uniqueN()` : 고유한 데이터의 수를 확인하는 데 사용하는 함수입니다. 주로 사람의 ID 수를 카운트 하는 데 사용합니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,BMI2:=fifelse(is.na(BMI),'donno', fifelse(BMI>=30,'obese','normal'))][,uniqueN(BMI2)]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    [1] 3\n    ```\n    :::\n    :::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}