{
  "hash": "95903e6336addd37020271d7f3e3e2fc",
  "result": {
    "markdown": "---\ntitle: \"data.table 심화\"\ndescription:  \"특수 기호, 조인, 피봇 등 data.table에서 다루는 심화내용을 살펴봅시다.\"\ndate: '2023-01-19'\ncategories: [data.table, R]\nimage: \"https://raw.githubusercontent.com/Rdatatable/data.table/master/.graphics/logo.png\"\n---\n\n\n[[data.table 기초]{.underline}](../data.table_basic/index.qmd) 포스트 에서는 대용량의 데이터를 빠르게 처리할 수 있는 `data.table` 패키지에 대해 배워봤습니다.\n\n이번 시간에는 `data.table` 패키지를 조금 더 효율적으로 사용할 수 있는 방법, 그리고 `data.table`을 이용하여 데이터를 원하는대로 붙이고 변형하는 방법에 대해 알아보겠습니다.\n\n## 1. 특수 기호\n\ndata.table 패키지에는 유용하게 사용할 수 있는 특수 기호들이 있습니다. 이 특수한 기호들은 다른 패키지에서는 사용할 수 없는 것들로, data.table 형태의 데이터를 다룰 때만 사용이 가능합니다.\n\n이번에 배울 data.table의 특수 기호는 크게 3가지입니다. 바로 .SD, .N, .I 입니다. 이 특수기호들은 모두 data.table의 j(column 부분)에서 쓰입니다.\n\n### 1) lapply + .SD\n\n`.SD`는 Subset Data의 약자입니다. 말그대로 데이터의 일부분을 선택하기 위한 특수기호(special symbols)입니다.\n\n`.SD`와 함께 사용되는 것이 있습니다. 바로 `.SDcols` 입니다. `.SDcols`를 통해 데이터 중 원하는 column을 선택할 수 있습니다.\n\n만약 .SDcols 없이 .SD만 사용한다면 데이터의 모든 column을 선택한다는 뜻입니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(data.table)\nrequire(NHANES)\ndt <- as.data.table(NHANES)\ndt[,head(.SD)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      ID SurveyYr Gender   Age AgeDecade AgeMonths  Race1  Race3    Education\n   <int>   <fctr> <fctr> <int>    <fctr>     <int> <fctr> <fctr>       <fctr>\n1: 51624  2009_10   male    34     30-39       409  White   <NA>  High School\n2: 51624  2009_10   male    34     30-39       409  White   <NA>  High School\n3: 51624  2009_10   male    34     30-39       409  White   <NA>  High School\n4: 51625  2009_10   male     4       0-9        49  Other   <NA>         <NA>\n5: 51630  2009_10 female    49     40-49       596  White   <NA> Some College\n6: 51638  2009_10   male     9       0-9       115  White   <NA>         <NA>\n   MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms HomeOwn       Work\n          <fctr>      <fctr>       <int>   <num>     <int>  <fctr>     <fctr>\n1:       Married 25000-34999       30000    1.36         6     Own NotWorking\n2:       Married 25000-34999       30000    1.36         6     Own NotWorking\n3:       Married 25000-34999       30000    1.36         6     Own NotWorking\n4:          <NA> 20000-24999       22500    1.07         9     Own       <NA>\n5:   LivePartner 35000-44999       40000    1.91         5    Rent NotWorking\n6:          <NA> 75000-99999       87500    1.84         6    Rent       <NA>\n   Weight Length HeadCirc Height   BMI BMICatUnder20yrs   BMI_WHO Pulse\n    <num>  <num>    <num>  <num> <num>           <fctr>    <fctr> <int>\n1:   87.4     NA       NA  164.7 32.22             <NA> 30.0_plus    70\n2:   87.4     NA       NA  164.7 32.22             <NA> 30.0_plus    70\n3:   87.4     NA       NA  164.7 32.22             <NA> 30.0_plus    70\n4:   17.0     NA       NA  105.4 15.30             <NA> 12.0_18.5    NA\n5:   86.7     NA       NA  168.4 30.57             <NA> 30.0_plus    86\n6:   29.8     NA       NA  133.1 16.82             <NA> 12.0_18.5    82\n   BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3 Testosterone\n      <int>    <int>  <int>  <int>  <int>  <int>  <int>  <int>        <num>\n1:      113       85    114     88    114     88    112     82           NA\n2:      113       85    114     88    114     88    112     82           NA\n3:      113       85    114     88    114     88    112     82           NA\n4:       NA       NA     NA     NA     NA     NA     NA     NA           NA\n5:      112       75    118     82    108     74    116     76           NA\n6:       86       47     84     50     84     50     88     44           NA\n   DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2 Diabetes\n        <num>   <num>     <int>      <num>     <int>      <num>   <fctr>\n1:       1.29    3.49       352         NA        NA         NA       No\n2:       1.29    3.49       352         NA        NA         NA       No\n3:       1.29    3.49       352         NA        NA         NA       No\n4:         NA      NA        NA         NA        NA         NA       No\n5:       1.16    6.70        77      0.094        NA         NA       No\n6:       1.34    4.86       123      1.538        NA         NA       No\n   DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad LittleInterest\n         <int>    <fctr>           <int>           <int>         <fctr>\n1:          NA      Good               0              15           Most\n2:          NA      Good               0              15           Most\n3:          NA      Good               0              15           Most\n4:          NA      <NA>              NA              NA           <NA>\n5:          NA      Good               0              10        Several\n6:          NA      <NA>              NA              NA           <NA>\n   Depressed nPregnancies nBabies Age1stBaby SleepHrsNight SleepTrouble\n      <fctr>        <int>   <int>      <int>         <int>       <fctr>\n1:   Several           NA      NA         NA             4          Yes\n2:   Several           NA      NA         NA             4          Yes\n3:   Several           NA      NA         NA             4          Yes\n4:      <NA>           NA      NA         NA            NA         <NA>\n5:   Several            2       2         27             8          Yes\n6:      <NA>           NA      NA         NA            NA         <NA>\n   PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild CompHrsDayChild\n       <fctr>          <int>   <fctr>     <fctr>         <int>           <int>\n1:         No             NA     <NA>       <NA>            NA              NA\n2:         No             NA     <NA>       <NA>            NA              NA\n3:         No             NA     <NA>       <NA>            NA              NA\n4:       <NA>             NA     <NA>       <NA>             4               1\n5:         No             NA     <NA>       <NA>            NA              NA\n6:       <NA>             NA     <NA>       <NA>             5               0\n   Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100 Smoke100n SmokeAge\n            <fctr>      <int>       <int>   <fctr>   <fctr>    <fctr>    <int>\n1:             Yes         NA           0       No      Yes    Smoker       18\n2:             Yes         NA           0       No      Yes    Smoker       18\n3:             Yes         NA           0       No      Yes    Smoker       18\n4:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n5:             Yes          2          20      Yes      Yes    Smoker       38\n6:            <NA>         NA          NA     <NA>     <NA>      <NA>       NA\n   Marijuana AgeFirstMarij RegularMarij AgeRegMarij HardDrugs SexEver SexAge\n      <fctr>         <int>       <fctr>       <int>    <fctr>  <fctr>  <int>\n1:       Yes            17           No          NA       Yes     Yes     16\n2:       Yes            17           No          NA       Yes     Yes     16\n3:       Yes            17           No          NA       Yes     Yes     16\n4:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n5:       Yes            18           No          NA       Yes     Yes     12\n6:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n   SexNumPartnLife SexNumPartYear SameSex SexOrientation PregnantNow\n             <int>          <int>  <fctr>         <fctr>      <fctr>\n1:               8              1      No   Heterosexual        <NA>\n2:               8              1      No   Heterosexual        <NA>\n3:               8              1      No   Heterosexual        <NA>\n4:              NA             NA    <NA>           <NA>        <NA>\n5:              10              1     Yes   Heterosexual        <NA>\n6:              NA             NA    <NA>           <NA>        <NA>\n```\n:::\n\n```{.r .cell-code}\ndt[,str(.SD)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nClasses 'data.table' and 'data.frame':\t10000 obs. of  76 variables:\n $ ID              : int  51624 51624 51624 51625 51630 51638 51646 51647 51647 51647 ...\n $ SurveyYr        : Factor w/ 2 levels \"2009_10\",\"2011_12\": 1 1 1 1 1 1 1 1 1 1 ...\n $ Gender          : Factor w/ 2 levels \"female\",\"male\": 2 2 2 2 1 2 2 1 1 1 ...\n $ Age             : int  34 34 34 4 49 9 8 45 45 45 ...\n $ AgeDecade       : Factor w/ 8 levels \" 0-9\",\" 10-19\",..: 4 4 4 1 5 1 1 5 5 5 ...\n $ AgeMonths       : int  409 409 409 49 596 115 101 541 541 541 ...\n $ Race1           : Factor w/ 5 levels \"Black\",\"Hispanic\",..: 4 4 4 5 4 4 4 4 4 4 ...\n $ Race3           : Factor w/ 6 levels \"Asian\",\"Black\",..: NA NA NA NA NA NA NA NA NA NA ...\n $ Education       : Factor w/ 5 levels \"8th Grade\",\"9 - 11th Grade\",..: 3 3 3 NA 4 NA NA 5 5 5 ...\n $ MaritalStatus   : Factor w/ 6 levels \"Divorced\",\"LivePartner\",..: 3 3 3 NA 2 NA NA 3 3 3 ...\n $ HHIncome        : Factor w/ 12 levels \" 0-4999\",\" 5000-9999\",..: 6 6 6 5 7 11 9 11 11 11 ...\n $ HHIncomeMid     : int  30000 30000 30000 22500 40000 87500 60000 87500 87500 87500 ...\n $ Poverty         : num  1.36 1.36 1.36 1.07 1.91 1.84 2.33 5 5 5 ...\n $ HomeRooms       : int  6 6 6 9 5 6 7 6 6 6 ...\n $ HomeOwn         : Factor w/ 3 levels \"Own\",\"Rent\",\"Other\": 1 1 1 1 2 2 1 1 1 1 ...\n $ Work            : Factor w/ 3 levels \"Looking\",\"NotWorking\",..: 2 2 2 NA 2 NA NA 3 3 3 ...\n $ Weight          : num  87.4 87.4 87.4 17 86.7 29.8 35.2 75.7 75.7 75.7 ...\n $ Length          : num  NA NA NA NA NA NA NA NA NA NA ...\n $ HeadCirc        : num  NA NA NA NA NA NA NA NA NA NA ...\n $ Height          : num  165 165 165 105 168 ...\n $ BMI             : num  32.2 32.2 32.2 15.3 30.6 ...\n $ BMICatUnder20yrs: Factor w/ 4 levels \"UnderWeight\",..: NA NA NA NA NA NA NA NA NA NA ...\n $ BMI_WHO         : Factor w/ 4 levels \"12.0_18.5\",\"18.5_to_24.9\",..: 4 4 4 1 4 1 2 3 3 3 ...\n $ Pulse           : int  70 70 70 NA 86 82 72 62 62 62 ...\n $ BPSysAve        : int  113 113 113 NA 112 86 107 118 118 118 ...\n $ BPDiaAve        : int  85 85 85 NA 75 47 37 64 64 64 ...\n $ BPSys1          : int  114 114 114 NA 118 84 114 106 106 106 ...\n $ BPDia1          : int  88 88 88 NA 82 50 46 62 62 62 ...\n $ BPSys2          : int  114 114 114 NA 108 84 108 118 118 118 ...\n $ BPDia2          : int  88 88 88 NA 74 50 36 68 68 68 ...\n $ BPSys3          : int  112 112 112 NA 116 88 106 118 118 118 ...\n $ BPDia3          : int  82 82 82 NA 76 44 38 60 60 60 ...\n $ Testosterone    : num  NA NA NA NA NA NA NA NA NA NA ...\n $ DirectChol      : num  1.29 1.29 1.29 NA 1.16 1.34 1.55 2.12 2.12 2.12 ...\n $ TotChol         : num  3.49 3.49 3.49 NA 6.7 4.86 4.09 5.82 5.82 5.82 ...\n $ UrineVol1       : int  352 352 352 NA 77 123 238 106 106 106 ...\n $ UrineFlow1      : num  NA NA NA NA 0.094 ...\n $ UrineVol2       : int  NA NA NA NA NA NA NA NA NA NA ...\n $ UrineFlow2      : num  NA NA NA NA NA NA NA NA NA NA ...\n $ Diabetes        : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 1 1 1 1 ...\n $ DiabetesAge     : int  NA NA NA NA NA NA NA NA NA NA ...\n $ HealthGen       : Factor w/ 5 levels \"Excellent\",\"Vgood\",..: 3 3 3 NA 3 NA NA 2 2 2 ...\n $ DaysPhysHlthBad : int  0 0 0 NA 0 NA NA 0 0 0 ...\n $ DaysMentHlthBad : int  15 15 15 NA 10 NA NA 3 3 3 ...\n $ LittleInterest  : Factor w/ 3 levels \"None\",\"Several\",..: 3 3 3 NA 2 NA NA 1 1 1 ...\n $ Depressed       : Factor w/ 3 levels \"None\",\"Several\",..: 2 2 2 NA 2 NA NA 1 1 1 ...\n $ nPregnancies    : int  NA NA NA NA 2 NA NA 1 1 1 ...\n $ nBabies         : int  NA NA NA NA 2 NA NA NA NA NA ...\n $ Age1stBaby      : int  NA NA NA NA 27 NA NA NA NA NA ...\n $ SleepHrsNight   : int  4 4 4 NA 8 NA NA 8 8 8 ...\n $ SleepTrouble    : Factor w/ 2 levels \"No\",\"Yes\": 2 2 2 NA 2 NA NA 1 1 1 ...\n $ PhysActive      : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 NA 1 NA NA 2 2 2 ...\n $ PhysActiveDays  : int  NA NA NA NA NA NA NA 5 5 5 ...\n $ TVHrsDay        : Factor w/ 7 levels \"0_hrs\",\"0_to_1_hr\",..: NA NA NA NA NA NA NA NA NA NA ...\n $ CompHrsDay      : Factor w/ 7 levels \"0_hrs\",\"0_to_1_hr\",..: NA NA NA NA NA NA NA NA NA NA ...\n $ TVHrsDayChild   : int  NA NA NA 4 NA 5 1 NA NA NA ...\n $ CompHrsDayChild : int  NA NA NA 1 NA 0 6 NA NA NA ...\n $ Alcohol12PlusYr : Factor w/ 2 levels \"No\",\"Yes\": 2 2 2 NA 2 NA NA 2 2 2 ...\n $ AlcoholDay      : int  NA NA NA NA 2 NA NA 3 3 3 ...\n $ AlcoholYear     : int  0 0 0 NA 20 NA NA 52 52 52 ...\n $ SmokeNow        : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 NA 2 NA NA NA NA NA ...\n $ Smoke100        : Factor w/ 2 levels \"No\",\"Yes\": 2 2 2 NA 2 NA NA 1 1 1 ...\n $ Smoke100n       : Factor w/ 2 levels \"Non-Smoker\",\"Smoker\": 2 2 2 NA 2 NA NA 1 1 1 ...\n $ SmokeAge        : int  18 18 18 NA 38 NA NA NA NA NA ...\n $ Marijuana       : Factor w/ 2 levels \"No\",\"Yes\": 2 2 2 NA 2 NA NA 2 2 2 ...\n $ AgeFirstMarij   : int  17 17 17 NA 18 NA NA 13 13 13 ...\n $ RegularMarij    : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 NA 1 NA NA 1 1 1 ...\n $ AgeRegMarij     : int  NA NA NA NA NA NA NA NA NA NA ...\n $ HardDrugs       : Factor w/ 2 levels \"No\",\"Yes\": 2 2 2 NA 2 NA NA 1 1 1 ...\n $ SexEver         : Factor w/ 2 levels \"No\",\"Yes\": 2 2 2 NA 2 NA NA 2 2 2 ...\n $ SexAge          : int  16 16 16 NA 12 NA NA 13 13 13 ...\n $ SexNumPartnLife : int  8 8 8 NA 10 NA NA 20 20 20 ...\n $ SexNumPartYear  : int  1 1 1 NA 1 NA NA 0 0 0 ...\n $ SameSex         : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 NA 2 NA NA 2 2 2 ...\n $ SexOrientation  : Factor w/ 3 levels \"Bisexual\",\"Heterosexual\",..: 2 2 2 NA 2 NA NA 1 1 1 ...\n $ PregnantNow     : Factor w/ 3 levels \"Yes\",\"No\",\"Unknown\": NA NA NA NA NA NA NA NA NA NA ...\n - attr(*, \".internal.selfref\")=<externalptr> \n - attr(*, \".data.table.locked\")= logi TRUE\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nNULL\n```\n:::\n:::\n\n\n반면 `.SDcols와` 함께 `.SD`를 사용한다면 `.SDcols`에 입력한 column만 선택합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,str(.SD),.SDcols=c('Gender','Age')]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nClasses 'data.table' and 'data.frame':\t10000 obs. of  2 variables:\n $ Gender: Factor w/ 2 levels \"female\",\"male\": 2 2 2 2 1 2 2 1 1 1 ...\n $ Age   : int  34 34 34 4 49 9 8 45 45 45 ...\n - attr(*, \".internal.selfref\")=<externalptr> \n - attr(*, \".data.table.locked\")= logi TRUE\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nNULL\n```\n:::\n:::\n\n\n`.SDcols`에 column을 선택하는 방법은 크게 세 가지가 있습니다.\n\n-   column 이름을 갖는 vector 만들어서 사용\n\n    아래의 예시처럼 찾고자 하는 column 이름 `c()`로 묶은 vector 형태로 넣어줄 수 있습니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,.SD,.SDcols=c('Gender','Age','Race1','Education')]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n           Gender   Age   Race1      Education\n           <fctr> <int>  <fctr>         <fctr>\n        1:   male    34   White    High School\n        2:   male    34   White    High School\n        3:   male    34   White    High School\n        4:   male     4   Other           <NA>\n        5: female    49   White   Some College\n       ---                                    \n     9996:   male    28 Mexican 9 - 11th Grade\n     9997: female     0   White           <NA>\n     9998:   male    27 Mexican   College Grad\n     9999:   male    60   White   College Grad\n    10000:   male    60   White   College Grad\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    # OR\n    target <- c('Gender','Age','Race1','Education')\n    dt[,.SD,.SDcols=target]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n           Gender   Age   Race1      Education\n           <fctr> <int>  <fctr>         <fctr>\n        1:   male    34   White    High School\n        2:   male    34   White    High School\n        3:   male    34   White    High School\n        4:   male     4   Other           <NA>\n        5: female    49   White   Some College\n       ---                                    \n     9996:   male    28 Mexican 9 - 11th Grade\n     9997: female     0   White           <NA>\n     9998:   male    27 Mexican   College Grad\n     9999:   male    60   White   College Grad\n    10000:   male    60   White   College Grad\n    ```\n    :::\n    :::\n\n\n-   `patterns()`를 통한 column 규칙 찾기\n\n    `patterns()` 함수를 이용해 해당 문자열을 갖는 모든 column을 찾을 수 있습니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,.SD,.SDcols=patterns('Alcohol')]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n           Alcohol12PlusYr AlcoholDay AlcoholYear\n                    <fctr>      <int>       <int>\n        1:             Yes         NA           0\n        2:             Yes         NA           0\n        3:             Yes         NA           0\n        4:            <NA>         NA          NA\n        5:             Yes          2          20\n       ---                                       \n     9996:            <NA>         NA          NA\n     9997:            <NA>         NA          NA\n     9998:             Yes          5           4\n     9999:             Yes         NA           0\n    10000:             Yes         NA           0\n    ```\n    :::\n    :::\n\n\n-   `:`을 이용해 연속적인 column을 찾기\n\n    `.SDcols`에 적용할 column이 연이어 붙어있는 경우, `:`을 이용하여 찾을 수 있습니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    dt[,.SD,.SDcols=Gender:Age]\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n           Gender   Age\n           <fctr> <int>\n        1:   male    34\n        2:   male    34\n        3:   male    34\n        4:   male     4\n        5: female    49\n       ---             \n     9996:   male    28\n     9997: female     0\n     9998:   male    27\n     9999:   male    60\n    10000:   male    60\n    ```\n    :::\n    :::\n\n\n한편 `.SD` (`.SDcols`)와 자주 사용되는 함수는 `lapply()`입니다.\n\n`lapply()`는 list + apply의 약자로, list에 [동일한 함수]{.underline}를 적용할 때 사용되는 함수입니다.\n\n`lapply()`는 크게 아래의 구조로 이루어져 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply(\n  X, # 함수를 적용할 부분\n  FUN, # 선택된 X에 적용할 함수\n  ... # 추가 인자, e.g., na.rm=T\n)\n```\n:::\n\n\n`X` 에는 함수를 적용할 column이름 또는 벡터가 오게 됩니다. 이 챕터에서는 주로 data.table에 `lapply()`를 적용하기 때문에 column이름이 오게 됩니다.\n\n`FUN` 에는 X에서 선택된 column들에 동일하게 적용할 함수를 작성합니다. `FUN` 부분은 각 column이 호출되어야 하는 횟수에 따라 사용하는 방법이 달라집니다.\n\n보통 `function(x)` 또는 `\\(x)` 를 이용해 적용시킬 함수를 입력해줍니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply(1:5, function(x) ifelse(is.na(x),mean(x,na.rm=T),x))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\n[1] 1\n\n[[2]]\n[1] 2\n\n[[3]]\n[1] 3\n\n[[4]]\n[1] 4\n\n[[5]]\n[1] 5\n```\n:::\n\n```{.r .cell-code}\nlapply(1:5, \\(x) mean(x,na.rm=T))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\n[1] 1\n\n[[2]]\n[1] 2\n\n[[3]]\n[1] 3\n\n[[4]]\n[1] 4\n\n[[5]]\n[1] 5\n```\n:::\n:::\n\n\n만약 평균을 구하늖 ㅏㅁ수처럼 `mean()` 처럼 각 column이 한번만 와도 되는 상황이라면 `function()`을 생략하고 함수의 이름만 사용할 수 있습니다. 결측치가 있는 경우 `…` 부분에 추가적으로 `na.rm=T` 를 사용할 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply(1:5, mean, na.rm=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\n[1] 1\n\n[[2]]\n[1] 2\n\n[[3]]\n[1] 3\n\n[[4]]\n[1] 4\n\n[[5]]\n[1] 5\n```\n:::\n:::\n\n\n`lapply()`와 `.SD`를 사용할 때는 `.SD`와 `.SDcols`를 통해 선택되는 column에 동일한 함수를 적용하게 됩니다. 일일이 column마다 함수를 적용할 필요가 없으니, 입력해야 하는 코드도 줄어들 뿐만 아니라 계산에 필요한 시간도 훨씬 단축됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,lapply(.SD, # 함수를 적용할 column \n           mean, # functcion 부분\n           na.rm=T # 추가 인자 부분\n           ),\n   .SDcols=c('Age','BMI') # .SD 중 선택되는 column이름\n   ]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       Age      BMI\n     <num>    <num>\n1: 36.7421 26.66014\n```\n:::\n:::\n\n\n또한 `lapply()`와 `.SD`는 여러 column들의 평균, 표준편차 등의 요약통계량을 계산하는 경우, 동시에 column들의 유형을 numeric에서 character로 변환하는 경우 등에 자주 사용됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,lapply(.SD, mean, na.rm=T), .SDcols=target]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Gender     Age Race1 Education\n    <num>   <num> <num>     <num>\n1:     NA 36.7421    NA        NA\n```\n:::\n\n```{.r .cell-code}\ndt[,lapply(.SD, as.factor), .SDcols=target]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       Gender    Age   Race1      Education\n       <fctr> <fctr>  <fctr>         <fctr>\n    1:   male     34   White    High School\n    2:   male     34   White    High School\n    3:   male     34   White    High School\n    4:   male      4   Other           <NA>\n    5: female     49   White   Some College\n   ---                                     \n 9996:   male     28 Mexican 9 - 11th Grade\n 9997: female      0   White           <NA>\n 9998:   male     27 Mexican   College Grad\n 9999:   male     60   White   College Grad\n10000:   male     60   White   College Grad\n```\n:::\n:::\n\n\n`lapply()`와 `.SD`를 활용하여 여러 column들을 변경한 후, 데이터에 저장하는 것은 chapter 3에서 배웠던 `:=` 를 이용합니다.\n\n여러 column을 동시에 변경하여 저장할 때는 `:=` 왼쪽 부분에 column 이름이 있는 `vector`를 `()`로 감싸주면 됩니다.\n\n예를 들어 나이와 BMI의 `NA`를 각 column의 중앙값으로 채워넣고자 하는 경우,\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntarget <- c('Age','BMI')\n\ndt[,(target):=lapply(.SD, \\(x) ifelse(is.na(x), median(x,na.rm=T),x)),.SDcols=target]\n```\n:::\n\n\n### 2) `.N`\n\n`.N`은 데이터의 수, 다시 말해 row의 개수를 확인하는 특수기호입니다. `.N`은 주로 `by`와 함께 됩니다. `by`를 통해 특정 집단의 분포별로 몇 명이 있는지, 또는 몇 건의 데이터가 있는지 확인합니다.\n\n예를 들면 인종(`race`)에 따른 데이터의 수를 확인하고 싶을 때는 아래와 같이 사용합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,.N, by=Race1]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      Race1     N\n     <fctr> <int>\n1:    White  6372\n2:    Other   806\n3:  Mexican  1015\n4:    Black  1197\n5: Hispanic   610\n```\n:::\n:::\n\n\n::: callout-note\n사실 그룹별 응답 수는 `table()` 함수를 이용해도 구할 수 있습니다. 그러나 .N을 이용하게 되면 각 범주별 빈도수를 [data.table 문법 내에서]{.underline} 구할 수 있기 때문에 활용성에 있어 `table()`보다 더 뛰어나다고 할 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[,c(.N, lapply(.SD,mean)),by=.(Race1),.SDcols='Age']\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      Race1     N      Age\n     <fctr> <int>    <num>\n1:    White  6372 39.80273\n2:    Other   806 32.29032\n3:  Mexican  1015 27.37635\n4:    Black  1197 33.94486\n5: Hispanic   610 31.72623\n```\n:::\n:::\n\n:::\n\n### 3) `.I`\n\n`.I`는 j 부분에서 행을 다루기 특수기호입니다.\n\n보통 `.I`는 특정 조건을 만족하는 row의 위치를 찾을 때 사용합니다. 특히 by가 있는 경우, 다시 말해 범주별로 row의 위치를 찾을 때 많이 사용합니다.\n\n집단별 row가 필요하지 않다면, j가 아닌 i 부분에서 행을 선택할 수 있습니다. 그러나 i 부분만 입력하게 될 경우, 집단 별 조건을 확인할 수 없습니다. 왜냐하면 by를 사용하기 위해서는 j가 선행되어야 하기 때문입니다.\n\n따라서 i 부분에서 바로 row를 filtering 하는 것이 아니라, j 부분에서 집단별로 조건을 만족시키는 행의 번호를 찾아서 사용합니다.\n\n또한 `.I`를 사용하는 경우 행의 번호를 확인할 수 있기 때문에, 그 행의 번호에 해당하는 모든 column을 사용할 수 있습니다.\n\n예를 들어, 인종별 첫 번째 행을 선택하는 경우는 다음과 같이 실행할 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[dt[,.I[1L],by=Race1]$V1]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      ID SurveyYr Gender   Age AgeDecade AgeMonths    Race1  Race3    Education\n   <int>   <fctr> <fctr> <int>    <fctr>     <int>   <fctr> <fctr>       <fctr>\n1: 51624  2009_10   male    34     30-39       409    White   <NA>  High School\n2: 51625  2009_10   male     4       0-9        49    Other   <NA>         <NA>\n3: 51666  2009_10 female    58     50-59       700  Mexican   <NA>  High School\n4: 51671  2009_10 female     9       0-9       112    Black   <NA>         <NA>\n5: 51692  2009_10   male    54     50-59       655 Hispanic   <NA> College Grad\n   MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms HomeOwn       Work\n          <fctr>      <fctr>       <int>   <num>     <int>  <fctr>     <fctr>\n1:       Married 25000-34999       30000    1.36         6     Own NotWorking\n2:          <NA> 20000-24999       22500    1.07         9     Own       <NA>\n3:       Married 75000-99999       87500    2.03        10    Rent    Looking\n4:          <NA>        <NA>          NA      NA         3    Rent       <NA>\n5:      Divorced 55000-64999       60000    3.28         3    Rent NotWorking\n   Weight Length HeadCirc Height   BMI BMICatUnder20yrs      BMI_WHO Pulse\n    <num>  <num>    <num>  <num> <num>           <fctr>       <fctr> <int>\n1:   87.4     NA       NA  164.7 32.22             <NA>    30.0_plus    70\n2:   17.0     NA       NA  105.4 15.30             <NA>    12.0_18.5    NA\n3:   57.5     NA       NA  148.1 26.22             <NA> 25.0_to_29.9    94\n4:   53.1     NA       NA  139.2 27.40             <NA> 25.0_to_29.9    92\n5:  113.9     NA       NA  177.1 36.32             <NA>    30.0_plus    64\n   BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3 Testosterone\n      <int>    <int>  <int>  <int>  <int>  <int>  <int>  <int>        <num>\n1:      113       85    114     88    114     88    112     82           NA\n2:       NA       NA     NA     NA     NA     NA     NA     NA           NA\n3:      127       83     NA     NA    134     82    120     84           NA\n4:       93       63     86     56     90     64     96     62           NA\n5:       90       41     94     48     90     42     90     40           NA\n   DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2 Diabetes\n        <num>   <num>     <int>      <num>     <int>      <num>   <fctr>\n1:       1.29    3.49       352         NA        NA         NA       No\n2:         NA      NA        NA         NA        NA         NA       No\n3:       1.14    4.78        29      0.299        NA         NA       No\n4:       1.22    4.86       156      0.975        NA         NA       No\n5:       1.60    4.81       168      0.866        NA         NA       No\n   DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad LittleInterest\n         <int>    <fctr>           <int>           <int>         <fctr>\n1:          NA      Good               0              15           Most\n2:          NA      <NA>              NA              NA           <NA>\n3:          NA      <NA>              NA              NA           <NA>\n4:          NA      <NA>              NA              NA           <NA>\n5:          NA      Good               0               0        Several\n   Depressed nPregnancies nBabies Age1stBaby SleepHrsNight SleepTrouble\n      <fctr>        <int>   <int>      <int>         <int>       <fctr>\n1:   Several           NA      NA         NA             4          Yes\n2:      <NA>           NA      NA         NA            NA         <NA>\n3:      <NA>           NA      NA         NA             5           No\n4:      <NA>           NA      NA         NA            NA         <NA>\n5:      None           NA      NA         NA             6          Yes\n   PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild CompHrsDayChild\n       <fctr>          <int>   <fctr>     <fctr>         <int>           <int>\n1:         No             NA     <NA>       <NA>            NA              NA\n2:       <NA>             NA     <NA>       <NA>             4               1\n3:        Yes              2     <NA>       <NA>            NA              NA\n4:       <NA>             NA     <NA>       <NA>             0               1\n5:        Yes              3     <NA>       <NA>            NA              NA\n   Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100  Smoke100n SmokeAge\n            <fctr>      <int>       <int>   <fctr>   <fctr>     <fctr>    <int>\n1:             Yes         NA           0       No      Yes     Smoker       18\n2:            <NA>         NA          NA     <NA>     <NA>       <NA>       NA\n3:            <NA>         NA          NA      Yes      Yes     Smoker       17\n4:            <NA>         NA          NA     <NA>     <NA>       <NA>       NA\n5:             Yes          2         156     <NA>       No Non-Smoker       NA\n   Marijuana AgeFirstMarij RegularMarij AgeRegMarij HardDrugs SexEver SexAge\n      <fctr>         <int>       <fctr>       <int>    <fctr>  <fctr>  <int>\n1:       Yes            17           No          NA       Yes     Yes     16\n2:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n3:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n4:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n5:        No            NA           No          NA        No     Yes     14\n   SexNumPartnLife SexNumPartYear SameSex SexOrientation PregnantNow\n             <int>          <int>  <fctr>         <fctr>      <fctr>\n1:               8              1      No   Heterosexual        <NA>\n2:              NA             NA    <NA>           <NA>        <NA>\n3:              NA             NA    <NA>           <NA>        <NA>\n4:              NA             NA    <NA>           <NA>        <NA>\n5:              20              2      No   Heterosexual        <NA>\n```\n:::\n:::\n\n\n이번에는 인종 별로 첫 번째 행이 아니라 Height가 최대인 (키가 가장 큰) 데이터를 추출해보겠습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndt[dt[,.I[max(Height,na.rm=T)],by=.(Race1)]$V1]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      ID SurveyYr Gender   Age AgeDecade AgeMonths    Race1  Race3    Education\n   <int>   <fctr> <fctr> <int>    <fctr>     <int>   <fctr> <fctr>       <fctr>\n1: 52255  2009_10 female    80      <NA>        NA    White   <NA>    8th Grade\n2: 57054  2009_10 female    49     40-49       594    Other   <NA>  High School\n3: 55236  2009_10 female    39     30-39       474  Mexican   <NA> Some College\n4: 55115  2009_10 female    36     30-39       433    Black   <NA> Some College\n5: 59809  2009_10   male    57     50-59       688 Hispanic   <NA>    8th Grade\n   MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms HomeOwn       Work\n          <fctr>      <fctr>       <int>   <num>     <int>  <fctr>     <fctr>\n1:       Widowed 20000-24999       22500    1.20         5     Own NotWorking\n2:       Married  more 99999      100000    5.00        10     Own NotWorking\n3:  NeverMarried        <NA>          NA    2.77         4    Rent    Working\n4:  NeverMarried        <NA>          NA      NA         8    Rent    Looking\n5:       Married 20000-24999       22500    0.60         7    Rent    Working\n   Weight Length HeadCirc Height   BMI BMICatUnder20yrs      BMI_WHO Pulse\n    <num>  <num>    <num>  <num> <num>           <fctr>       <fctr> <int>\n1:   65.6     NA       NA  162.8 24.75             <NA> 18.5_to_24.9    82\n2:   61.1     NA       NA  165.5 22.31             <NA> 18.5_to_24.9    56\n3:   56.3     NA       NA  160.3 21.91             <NA> 18.5_to_24.9    84\n4:   94.4     NA       NA  162.2 35.88             <NA>    30.0_plus    76\n5:   68.1     NA       NA  167.2 24.36             <NA> 18.5_to_24.9    86\n   BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3 BPDia3 Testosterone\n      <int>    <int>  <int>  <int>  <int>  <int>  <int>  <int>        <num>\n1:      138       35    134     48    140     36    136     34           NA\n2:      108       71    112     74    106     68    110     74           NA\n3:      107       58    102     62    108     56    106     60           NA\n4:      135       84    130     82    136     84    134     84           NA\n5:      137       85    142     88    138     86    136     84           NA\n   DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2 UrineFlow2 Diabetes\n        <num>   <num>     <int>      <num>     <int>      <num>   <fctr>\n1:       2.15    5.30        58      0.331        NA         NA       No\n2:       1.94    5.43       200      1.449        NA         NA       No\n3:       1.89    6.05       248      1.355        NA         NA       No\n4:       1.01    5.77        76      0.691        NA         NA       No\n5:       1.16    6.54       141      0.876        NA         NA       No\n   DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad LittleInterest\n         <int>    <fctr>           <int>           <int>         <fctr>\n1:          NA      Good               0               0           <NA>\n2:          NA Excellent               0               0           None\n3:          NA      Good               5              15        Several\n4:          NA      Good               1               2           None\n5:          NA      Good               0               1           None\n   Depressed nPregnancies nBabies Age1stBaby SleepHrsNight SleepTrouble\n      <fctr>        <int>   <int>      <int>         <int>       <fctr>\n1:      <NA>            3       3         19             8           No\n2:      None            2       2         33             7           No\n3:   Several            2      NA         NA             8           No\n4:   Several            4       1         NA             9           No\n5:      None           NA      NA         NA             5           No\n   PhysActive PhysActiveDays TVHrsDay CompHrsDay TVHrsDayChild CompHrsDayChild\n       <fctr>          <int>   <fctr>     <fctr>         <int>           <int>\n1:         No             NA     <NA>       <NA>            NA              NA\n2:        Yes              5     <NA>       <NA>            NA              NA\n3:        Yes              5     <NA>       <NA>            NA              NA\n4:        Yes              2     <NA>       <NA>            NA              NA\n5:         No             NA     <NA>       <NA>            NA              NA\n   Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100  Smoke100n SmokeAge\n            <fctr>      <int>       <int>   <fctr>   <fctr>     <fctr>    <int>\n1:              No         NA          NA     <NA>       No Non-Smoker       NA\n2:             Yes          2         208       No      Yes     Smoker       20\n3:             Yes         NA           0       No      Yes     Smoker       15\n4:             Yes          1           3     <NA>       No Non-Smoker       NA\n5:              No         NA           0       No      Yes     Smoker       14\n   Marijuana AgeFirstMarij RegularMarij AgeRegMarij HardDrugs SexEver SexAge\n      <fctr>         <int>       <fctr>       <int>    <fctr>  <fctr>  <int>\n1:      <NA>            NA         <NA>          NA      <NA>    <NA>     NA\n2:        No            NA           No          NA        No     Yes     20\n3:       Yes            19          Yes          19       Yes     Yes     13\n4:       Yes            22           No          NA        No     Yes     18\n5:        No            NA           No          NA        No    <NA>     NA\n   SexNumPartnLife SexNumPartYear SameSex SexOrientation PregnantNow\n             <int>          <int>  <fctr>         <fctr>      <fctr>\n1:              NA             NA    <NA>           <NA>        <NA>\n2:               2              1      No   Heterosexual        <NA>\n3:              55              1     Yes   Heterosexual          No\n4:               5              2      No   Heterosexual          No\n5:              NA             NA      No   Heterosexual        <NA>\n```\n:::\n\n```{.r .cell-code}\ndt[dt[,.I[which.max(Height)],by=.(Race1)]$V1]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      ID SurveyYr Gender   Age AgeDecade AgeMonths    Race1    Race3\n   <int>   <fctr> <fctr> <int>    <fctr>     <int>   <fctr>   <fctr>\n1: 71315  2011_12   male    44     40-49        NA    White    White\n2: 61489  2009_10   male    18     10-19       219    Other     <NA>\n3: 60251  2009_10   male    28     20-29       336  Mexican     <NA>\n4: 53010  2009_10   male    51     50-59       620    Black     <NA>\n5: 64728  2011_12   male    23     20-29        NA Hispanic Hispanic\n        Education MaritalStatus    HHIncome HHIncomeMid Poverty HomeRooms\n           <fctr>        <fctr>      <fctr>       <int>   <num>     <int>\n1:      8th Grade       Married 25000-34999       30000    1.11         7\n2:           <NA>          <NA>      0-4999        2500    0.28         8\n3:    High School  NeverMarried 35000-44999       40000    2.03         4\n4: 9 - 11th Grade     Separated 10000-14999       12500    0.28         5\n5:    High School  NeverMarried 35000-44999       40000    1.79         1\n   HomeOwn    Work Weight Length HeadCirc Height   BMI BMICatUnder20yrs\n    <fctr>  <fctr>  <num>  <num>    <num>  <num> <num>           <fctr>\n1:    Rent Working  162.2     NA       NA  200.4 40.40             <NA>\n2:   Other Working   90.3     NA       NA  190.6 24.86             <NA>\n3:    Rent Working  124.4     NA       NA  195.0 32.72             <NA>\n4:   Other Looking   80.7     NA       NA  194.9 21.24             <NA>\n5:    Rent Working   77.1     NA       NA  197.2 19.80             <NA>\n        BMI_WHO Pulse BPSysAve BPDiaAve BPSys1 BPDia1 BPSys2 BPDia2 BPSys3\n         <fctr> <int>    <int>    <int>  <int>  <int>  <int>  <int>  <int>\n1:    30.0_plus    68      132       84    136     88     NA     NA    132\n2: 18.5_to_24.9    58      108       58    114     52    110     60    106\n3:    30.0_plus    86      124       71    124     80    126     72    122\n4: 18.5_to_24.9    70       98       72    106     70     98     72     NA\n5: 18.5_to_24.9    70      122       66    126     70    120     64    124\n   BPDia3 Testosterone DirectChol TotChol UrineVol1 UrineFlow1 UrineVol2\n    <int>        <num>      <num>   <num>     <int>      <num>     <int>\n1:     84       213.27       1.03    5.40       263      1.169        NA\n2:     56           NA       1.53    2.77       324      0.878        NA\n3:     70           NA       1.09    6.57        51      0.298        NA\n4:     NA           NA       1.97    5.56       149      1.211        NA\n5:     68       747.68       1.03    3.49       120      0.545        NA\n   UrineFlow2 Diabetes DiabetesAge HealthGen DaysPhysHlthBad DaysMentHlthBad\n        <num>   <fctr>       <int>    <fctr>           <int>           <int>\n1:         NA       No          NA      Good               0               0\n2:         NA       No          NA      Good               0               0\n3:         NA       No          NA      Fair               0               0\n4:         NA       No          NA      Good               0               0\n5:         NA       No          NA      Good               0               0\n   LittleInterest Depressed nPregnancies nBabies Age1stBaby SleepHrsNight\n           <fctr>    <fctr>        <int>   <int>      <int>         <int>\n1:           None      None           NA      NA         NA             5\n2:           None      None           NA      NA         NA             2\n3:           None      None           NA      NA         NA             6\n4:           None      None           NA      NA         NA             8\n5:           None      None           NA      NA         NA             7\n   SleepTrouble PhysActive PhysActiveDays  TVHrsDay CompHrsDay TVHrsDayChild\n         <fctr>     <fctr>          <int>    <fctr>     <fctr>         <int>\n1:           No         No             NA      1_hr  0_to_1_hr            NA\n2:           No        Yes              5      <NA>       <NA>            NA\n3:           No        Yes              7      <NA>       <NA>            NA\n4:           No        Yes              3      <NA>       <NA>            NA\n5:           No        Yes             NA More_4_hr  0_to_1_hr            NA\n   CompHrsDayChild Alcohol12PlusYr AlcoholDay AlcoholYear SmokeNow Smoke100\n             <int>          <fctr>      <int>       <int>   <fctr>   <fctr>\n1:              NA             Yes         NA           0       No      Yes\n2:              NA            <NA>         NA          NA     <NA>     <NA>\n3:              NA             Yes         12           1     <NA>       No\n4:              NA             Yes         12         364      Yes      Yes\n5:              NA              No         NA          NA     <NA>       No\n    Smoke100n SmokeAge Marijuana AgeFirstMarij RegularMarij AgeRegMarij\n       <fctr>    <int>    <fctr>         <int>       <fctr>       <int>\n1:     Smoker       17       Yes            15          Yes          16\n2:       <NA>       NA       Yes            15          Yes          17\n3: Non-Smoker       NA        No            NA           No          NA\n4:     Smoker       17       Yes            18           No          NA\n5: Non-Smoker       NA        No            NA           No          NA\n   HardDrugs SexEver SexAge SexNumPartnLife SexNumPartYear SameSex\n      <fctr>  <fctr>  <int>           <int>          <int>  <fctr>\n1:        No     Yes     19              13              1      No\n2:        No     Yes     10               6              3      No\n3:        No     Yes     16               7              0      No\n4:       Yes     Yes     18              10              1      No\n5:        No      No     NA               0              0      No\n   SexOrientation PregnantNow\n           <fctr>      <fctr>\n1:   Heterosexual        <NA>\n2:   Heterosexual        <NA>\n3:   Heterosexual        <NA>\n4:   Heterosexual        <NA>\n5:   Heterosexual        <NA>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 2. 데이터 병합\n\nR에서 데이터를 묶는 방법은 크게 두 종류가 있습니다. 하나는 `bind()` 이고, 다른 하나는 `merge()` 또는 `join()` 입니다.\n\n### 1) bind\n\nbind 계열의 함수는 두 개 이상의 데이터를 합치는 함수입니다. merge는 뒤에서 언급하겠지만, bind는 merge와 달리 특정한 기준이 되는 column이 필요하지 않습니다.\n\nbind에는 `rbind()`, `cbind()`가 있습니다.\n\n#### a. `rbind()`\n\n`rbind()`는 row-bind의 약자로, 두 가지 이상의 데이터의 행을 묶는 함수입니다. 행을 묶는 것이기 때문에 데이터가 아래로 추가됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrbind(1:3,c('a','b','c'))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     [,1] [,2] [,3]\n[1,] \"1\"  \"2\"  \"3\" \n[2,] \"a\"  \"b\"  \"c\" \n```\n:::\n:::\n\n\n`rbind()`를 통해 합치고자 하는 데이터의 길이가 맞지 않는 경우, 자동으로 부족한 부분을 채웁니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrbind(c(1:3),c(1:4))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     [,1] [,2] [,3] [,4]\n[1,]    1    2    3    1\n[2,]    1    2    3    4\n```\n:::\n:::\n\n\n만약 column 이름을 갖는 matrix나 data.table 형태를 `rbind()`하고자 하는 경우는 합치고자 하는 데이터의 column이름이 같아야 합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(data.table)\na <- data.table(num=1:5,\n                str = letters[1:5])\nb <- data.table(num=6:10,\n                str = LETTERS[1:5])\nrbind(a,b)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      num    str\n    <int> <char>\n 1:     1      a\n 2:     2      b\n 3:     3      c\n 4:     4      d\n 5:     5      e\n 6:     6      A\n 7:     7      B\n 8:     8      C\n 9:     9      D\n10:    10      E\n```\n:::\n:::\n\n\n만약 두 데이터의 column 이름이 같지 않은 경우, 에러 메시지가 뜨게 됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\na <- data.table(num=1:5,\n                str=letters[1:5])\nb <- data.table(num=6:10,\n                str2=LETTERS[1:5])\nrbind(a,b)\n\n# 에러메시지\n# Column 2 ['str2'] of item 2 is missing in item 1. Use fill=TRUE to fill with NA (NULL for list columns), or use.names=FALSE to ignore column names.\n```\n:::\n\n\n이럴 때는 column 이름을 무시하거나, 이름이 같지 않은 column을 `NA`로 채워줄 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrbind(a,b, use.names=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      num    str\n    <int> <char>\n 1:     1      a\n 2:     2      b\n 3:     3      c\n 4:     4      d\n 5:     5      e\n 6:     6      A\n 7:     7      B\n 8:     8      C\n 9:     9      D\n10:    10      E\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrbind(a,b, fill=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      num    str\n    <int> <char>\n 1:     1      a\n 2:     2      b\n 3:     3      c\n 4:     4      d\n 5:     5      e\n 6:     6      A\n 7:     7      B\n 8:     8      C\n 9:     9      D\n10:    10      E\n```\n:::\n:::\n\n\n#### b. `cbind()`\n\n`cbind()`는 column-bind의 약자로, 두 가지 이상의 데이터의 열을 묶는 함수입니다. 열을 묶기 때문에 데이터가 옆으로 추가됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\na <- data.table(num=1:5,\n                str = letters[1:5])\nb <- data.table(num=6:10,\n                str2 = LETTERS[1:5])\ncbind(a,b)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     num    str   num   str2\n   <int> <char> <int> <char>\n1:     1      a     6      A\n2:     2      b     7      B\n3:     3      c     8      C\n4:     4      d     9      D\n5:     5      e    10      E\n```\n:::\n:::\n\n\n### 2) merge\n\n`merge()`는 두가지의 데이터를 특정 column을 기준으로 합치는 함수입니다. bind 계열의 함수와 다르게 [기준이 되는 column]{.underline}이 반드시 필요합니다.\n\n`merge()`는 두 가지 데이터 중 어떤 방식으로 합치느냐에 따라 크게 3가지로 분류할 수 있습니다.\n\n#### a. inner join\n\ninner join은 두 가지 데이터의 기준이 되는 column 에서 공통된 값들만 갖는 데이터를 합치는 방법입니다.\n\ndata.table에서 inner join 하는 방법은 아래와 같습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerge(dt1, dt2, by=)\n```\n:::\n\n\n#### b. left / right join\n\nleft/right join은 두 가지 데이터에서 왼(오른)쪽 데이터의 column을 기준으로 데이터를 합치는 방법입니다.\n\ndata.table에서 left join과 right join을 하는 방법은 아래와 같습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerge(dt1, dt2, by, all.x=T) # left join\nmerge(dt1, dt2, by, all.y=T) # right join\n```\n:::\n\n\nall.x 인자에 TRUE를 주면 left join을, all.y는 right join을 의미합니다.\n\n#### c. outer join\n\nouter join은 두 가지 데이터의 모든 column을 기준으로 데이터를 합치는 방법입니다.\n\n공통되지 않은 값을 갖는 경우는 `NA`로 채워넣어집니다.\n\ndata.table에서 outer join을 하는 방법은 아래와 같습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerge(dt1, dt2, all.x)\n```\n:::\n\n\nmerge의 경우 공통된 이름의 column을 기준으로 두 데이터를 합치는 방법이라고 했습니다. 그런데 만약 기준이 되는 column의 이름이 다르다면 어떻게 해야 할까요? 이때는 `by.x`와 `by.y` 인자를 사용합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerge(by.x, by.y)\n```\n:::\n\n\n기존에는 `by`인자에 공통된 column명을 넣으면 됐지만, 두 가지 데이터의 column이 다르기 때문에 각각 by.x와 by.y에 기준이 되는 column 이름을 넣어주는 것입니다.\n\n## \n\n::: callout-tip\n두 가지 column을 기준으로 합치고자 할 때, 이름이 다른 경우 아래와 같이 사용합니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerge(dt1, dt2, by.x=c('a','b'), by.y=c('A','B'))\n```\n:::\n\n:::\n\n.EACHI: X와 Y를 합칠 때, 요소별 합쳐진 개수 확인\n\n\n::: {.cell}\n\n```{.r .cell-code}\nX = data.table(x = c(1,1,1,2,2,5,6), y = 1:7, key = \"x\")\nY = data.table(x = c(2,6), z = letters[2:1], key = \"x\")\nX[Y,.N, by=x]; #X[Y,.N, by=y];\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <x>\n       x     N\n   <num> <int>\n1:     2     2\n2:     6     1\n```\n:::\n\n```{.r .cell-code}\nX[Y, .N, by=.EACHI]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <x>\n       x     N\n   <num> <int>\n1:     2     2\n2:     6     1\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 3. Pivoting\n\npivoting이란 column이 여러 개 좌우로 붙어있던 것을 위아래로 길게 늘이거나, 데이터를 좌우로 넓게 펼치는 것을 의미합니다.\n\npivot: 축을 기준으로 데이터를 회전시키는 것을 의미합니다. 데이터 측면에서 축은 기준이 되는 column을 의미합니다. 예를 들면 환자의 식별자, 일자 등이 있습니다.\n\npivoting 개념에서 사용되는 데이터 유형 두 가지에 대해 살펴보겠습니다.\n\n-   **Wide data**\n\n    넓은(wide) 데이터는 이름 그대로 양 옆으로 넓은 데이터를 의미합니다. 양 옆으로 넓다는 것은 column의 개수가 많다는 것을 의미합니다. 지금까지 교재에서 다루었던 거의 대부분의 데이터가 column들이 옆으로 붙어있는 형태는 wide 데이터입니다.\n\n-   **Long data**\n\n    긴 (long) 데이터는 넓은 데이터와 다르게, 반복되는 column을 기준으로 여러 변수(variable)와 값(value)으로 구성된 데이터입니다.\n\n    이 때 반복되는 column이란 반복되어 기록된 값들입니다. 예를 들면 환자가 입원해있는 동안의 기록이나 일자별 날씨 같이 반복적으로 기록되어 있는 데이터 등이 있습니다.\n\n    airquality는 `Month`와 `Day` 별 오존량, 풍량, 기온 등이 기록된 데이터입니다. 여기서 `Month`와 `Day`가 바로 반복되는 column입니다.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    airquality |> head()\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n      Ozone Solar.R Wind Temp Month Day\n    1    41     190  7.4   67     5   1\n    2    36     118  8.0   72     5   2\n    3    12     149 12.6   74     5   3\n    4    18     313 11.5   62     5   4\n    5    NA      NA 14.3   56     5   5\n    6    28      NA 14.9   66     5   6\n    ```\n    :::\n    :::\n\n\n    long 데이터는 이렇게 반복되는 column들을 기준으로 데이터를 variable과 value로 길게 확장시켜 놓은 것입니다.\n\n데이터 분석을 수행하는 우리 입장에서는 wide한 데이터가 보기에 더 편리합니다. column마다 어떤 데이터가 있는지 확인할 수 있고, 각 column 별로 계산을 수행할 수 있기 때문입니다.\n\n그러나 컴퓨터 입장에서는, 즉 계산하는 측면에서는 long data가 더 효율적입니다. 그렇기 때문에 동일한 column에 대해 연산을 할 때, long data가 훨씬 빠르게 계산됩니다.\n\n### 1) melt\n\nmelt는 column들이 옆으로 나열되어 있는 옆으로 넓은(wide)한 데이터를 위아래로 길게(long) 바꾸는 것을 의미합니다.\n\n::: callout-tip\nmelt는 어떤 것을 녹이는 의미를 갖고 있습니다. 넓게 퍼진 데이터를 녹여 길게 만든다고 이해하시면 됩니다.\n:::\n\n이렇게 옆으로 나열된 column들을 특정한 축을 기준으로 데이터를 variable과 value라는 column으로 녹입니다. 이렇게 되면 long data의 축에 오는 데이터들은 계속 반복되고, variable과 value만 변경되는 데이터로 변환됩니다.\n\nmelt 함수에서는 기준이 되는 column의 이름과 길게 변환할 column을 지정해줄 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_dt <- as.data.table(airquality)\nmelt(air_dt,\n     id.vars=c('Month','Day'),\n     measure.vars=c('Ozone','Temp'),\n     na.rm = T # TRUE일 경우 NA인 값은 제외\n     )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Month   Day variable value\n     <int> <int>   <fctr> <int>\n  1:     5     1    Ozone    41\n  2:     5     2    Ozone    36\n  3:     5     3    Ozone    12\n  4:     5     4    Ozone    18\n  5:     5     6    Ozone    28\n ---                           \n265:     9    26     Temp    70\n266:     9    27     Temp    77\n267:     9    28     Temp    75\n268:     9    29     Temp    76\n269:     9    30     Temp    68\n```\n:::\n:::\n\n\n만약 measure.vars에 아무런 인자를 주지 않는다면, melt를 수행했을 때, 기준 column을 제외한 모든 column들이 long 형태로 변경됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_melt <- melt(air_dt,\n     id.vars=c('Month','Day'),\n     na.rm = T # TRUE일 경우 NA인 값은 제외\n     )\nair_melt\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Month   Day variable value\n     <int> <int>   <fctr> <num>\n  1:     5     1    Ozone    41\n  2:     5     2    Ozone    36\n  3:     5     3    Ozone    12\n  4:     5     4    Ozone    18\n  5:     5     6    Ozone    28\n ---                           \n564:     9    26     Temp    70\n565:     9    27     Temp    77\n566:     9    28     Temp    75\n567:     9    29     Temp    76\n568:     9    30     Temp    68\n```\n:::\n:::\n\n\nmelt의 measure.vars에는 앞서 배웠던 patterns을 통해 비슷한 패턴을 갖는 column명을 선택할 수도 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmelt(dt,\n     id.vars = c('Gender','Age','Race1'),\n     measure.vars = patterns('HH') # HH가 들어가는 column 선택\n     )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       Gender   Age   Race1    variable       value\n       <fctr> <int>  <fctr>      <fctr>      <char>\n    1:   male    34   White    HHIncome 25000-34999\n    2:   male    34   White    HHIncome 25000-34999\n    3:   male    34   White    HHIncome 25000-34999\n    4:   male     4   Other    HHIncome 20000-24999\n    5: female    49   White    HHIncome 35000-44999\n   ---                                             \n19996:   male    28 Mexican HHIncomeMid        7500\n19997: female     0   White HHIncomeMid       87500\n19998:   male    27 Mexican HHIncomeMid       87500\n19999:   male    60   White HHIncomeMid       70000\n20000:   male    60   White HHIncomeMid       70000\n```\n:::\n:::\n\n\n여러 개의 패턴을 지정해 두 가지 이상으로 정리할 수도 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhouse_dt <- data.table(\n  family = 1:5,\n  dob_child1 = c('1998-11-26','1996-06-22','2002-07-11','2004-10-10','2000-12-05'),\n  dob_child2 = c('2000-01-29',NA,'2004-04-05','2009-08-27','2005-02-28'),\n  name_child1 = c('Susan','Mark','Sam','Craig','Parker'),\n  name_child2 = c('Jose',NA,'Seth','Khai','Gracie')\n)\n\nhouse_dt |> \n    melt(\n        id.vars = 'family',\n        measure.vars = patterns(\"^dob\",\"^name\"),\n        value.name = c(\"dob\",'name'))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    family variable        dob   name\n     <int>   <fctr>     <char> <char>\n 1:      1        1 1998-11-26  Susan\n 2:      2        1 1996-06-22   Mark\n 3:      3        1 2002-07-11    Sam\n 4:      4        1 2004-10-10  Craig\n 5:      5        1 2000-12-05 Parker\n 6:      1        2 2000-01-29   Jose\n 7:      2        2       <NA>   <NA>\n 8:      3        2 2004-04-05   Seth\n 9:      4        2 2009-08-27   Khai\n10:      5        2 2005-02-28 Gracie\n```\n:::\n:::\n\n\n### 2) dcast\n\n이렇게 옆으로 나열된 column들을 특정한 축을 기준으로 데이터를 variable과 value라는 column으로 녹입니다.\n\n::: callout-tip\ncast는 어떤 형태로 데이터를 굳히는 것을 의미합니다. 기존에 melt로 녹아있던 데이터를 casting 하는 data+casting (dcast)라고 이해하시면 됩니다.\n:::\n\ndcast는 long data에서 축 column에서 특정 값들을 기준으로 넓게 펼칠 수 있습니다. dcast에서는 formula 형태로 기준이 되는 축과 wide하게 변경해줄 column을 선택해주면 됩니다. 이 때 formula 형태라는 것은 \\~ 을 기준으로 기준 축과 column\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndcast(data=air_melt,\n      formula = Month + Day ~ variable, # 기준 column ~ column 이름으로 들어갈 column\n      fill = 0, # NA인 경우 채워 넣어줄 값을 선택할 수 있습니다.\n      value.var = 'value' # 데이터로 들어갈 값들.\n        )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <Month, Day>\n     Month   Day Ozone Solar.R  Wind  Temp\n     <int> <int> <num>   <num> <num> <num>\n  1:     5     1    41     190   7.4    67\n  2:     5     2    36     118   8.0    72\n  3:     5     3    12     149  12.6    74\n  4:     5     4    18     313  11.5    62\n  5:     5     5     0       0  14.3    56\n ---                                      \n149:     9    26    30     193   6.9    70\n150:     9    27     0     145  13.2    77\n151:     9    28    14     191  14.3    75\n152:     9    29    18     131   8.0    76\n153:     9    30    20     223  11.5    68\n```\n:::\n:::\n\n\ndcast에는 fun.aggregate라는 인자가 존재합니다. 이 인자의 경우 만약 기준이 되는 column의 하나의 값에 여러 데이터(row)가 존재하는 경우에 사용합니다.\n\n`airquality` 데이터를 예로 들어보겠습니다. 앞서 보여드린 air_melt의 경우 Month와 Day의 두 column을 기준으로 melt했기 때문에 기준 column에 공통되는 값들이 없었습니다 (5/1\\~ 9/27 까지 일일 데이터이므로).\n\n이번에는 `Day`만 기준 column으로 놓고 melt를 한 데이터를 다시 dcast 해보겠습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair_melt2 <- melt(air_dt, id.vars = 'Day',measure.vars = c('Ozone','Solar.R','Wind','Temp'))\n\nair_melt2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       Day variable value\n     <int>   <fctr> <num>\n  1:     1    Ozone    41\n  2:     2    Ozone    36\n  3:     3    Ozone    12\n  4:     4    Ozone    18\n  5:     5    Ozone    NA\n ---                     \n608:    26     Temp    70\n609:    27     Temp    77\n610:    28     Temp    75\n611:    29     Temp    76\n612:    30     Temp    68\n```\n:::\n:::\n\n\n`air_melt`와 달리 air_melt2에서는 Day별로 여러 개의 데이터가 존재하게 됩니다 (Day가 1인 경우, 5월 1일, 6월 1일 \\~9월 1일 등의 데이터가 있기 때문입니다).\n\n이 데이터를 dcast하게 된다면 `Aggregate function missing, defaulting to 'length'` 아래와 같은 메시지가 뜹니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndcast(air_melt2, Day ~ variable, value.var='value')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <Day>\n      Day Ozone Solar.R  Wind  Temp\n    <int> <int>   <int> <int> <int>\n 1:     1     5       5     5     5\n 2:     2     5       5     5     5\n 3:     3     5       5     5     5\n 4:     4     5       5     5     5\n 5:     5     5       5     5     5\n 6:     6     5       5     5     5\n 7:     7     5       5     5     5\n 8:     8     5       5     5     5\n 9:     9     5       5     5     5\n10:    10     5       5     5     5\n11:    11     5       5     5     5\n12:    12     5       5     5     5\n13:    13     5       5     5     5\n14:    14     5       5     5     5\n15:    15     5       5     5     5\n16:    16     5       5     5     5\n17:    17     5       5     5     5\n18:    18     5       5     5     5\n19:    19     5       5     5     5\n20:    20     5       5     5     5\n21:    21     5       5     5     5\n22:    22     5       5     5     5\n23:    23     5       5     5     5\n24:    24     5       5     5     5\n25:    25     5       5     5     5\n26:    26     5       5     5     5\n27:    27     5       5     5     5\n28:    28     5       5     5     5\n29:    29     5       5     5     5\n30:    30     5       5     5     5\n31:    31     3       3     3     3\n      Day Ozone Solar.R  Wind  Temp\n```\n:::\n:::\n\n\n이 메시지가 뜬 이유는 다음과 같습니다. `Day`라는 고유한 값은 1\\~31까지 밖에 없는데, `air_melt2`에서는 `Day`별로 여러 건의 데이터가 있었습니다. 그렇기 때문에 dcast에서는 `Day`별 요약 또는 집계를 수행합니다. 이 때 `fun.aggregate`라는 인자에 어떻게 요약할 것인지 지정해주지 않았기 때문에 초기값인 `length()`가 적용된 것입니다.\n\n따라서 평균이나 중앙값, 최소, 최대 등 요약함수를 넣어주면 `Day`별로 여러 건의 데이터를 요약한 값으로 데이터가 펼쳐지게 됩니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndcast(air_melt2, Day ~ variable, \n      value.var='value',\n      fun.aggregate = mean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <Day>\n      Day    Ozone  Solar.R      Wind     Temp\n    <int>    <num>    <num>     <num>    <num>\n 1:     1       NA 199.0000  6.780000 80.20000\n 2:     2       NA 174.8000  9.160000 80.80000\n 3:     3       NA 177.4000  9.620000 79.40000\n 4:     4       NA       NA  8.620000 81.80000\n 5:     5       NA       NA  8.460000 79.20000\n 6:     6       NA       NA 12.040000 79.80000\n 7:     7 54.20000 241.8000  7.660000 80.80000\n 8:     8       NA 217.6000  9.520000 81.20000\n 9:     9 61.40000 203.8000 11.700000 81.60000\n10:    10       NA 234.6000  9.160000 82.00000\n11:    11       NA       NA 10.560000 83.20000\n12:    12       NA 244.2000 12.040000 79.20000\n13:    13 23.40000 224.8000  9.980000 77.60000\n14:    14       NA 215.6000 12.040000 78.00000\n15:    15       NA 122.2000 12.400000 73.40000\n16:    16 30.20000 218.6000 10.100000 75.40000\n17:    17 36.60000 228.0000 12.620000 73.20000\n18:    18 24.60000 108.4000 10.320000 71.60000\n19:    19 35.20000 222.2000  9.860000 74.80000\n20:    20 29.40000 158.4000  9.960000 76.60000\n21:    21       NA 132.4000 10.200000 70.20000\n22:    22       NA 137.4000 10.300000 74.60000\n23:    23       NA 161.0000  9.740000 75.00000\n24:    24       NA 179.4000  9.380000 74.20000\n25:    25       NA 136.4000 10.520000 72.20000\n26:    26       NA 176.4000  9.280000 74.80000\n27:    27       NA       NA  9.840000 76.20000\n28:    28       NA 143.6000 10.980000 81.40000\n29:    29       NA 182.8000  9.500000 82.80000\n30:    30       NA 214.8000  7.780000 81.80000\n31:    31 60.33333 240.3333  7.633333 83.66667\n      Day    Ozone  Solar.R      Wind     Temp\n```\n:::\n:::\n\n\n만약 여러 건의 데이터 중 첫 번째를 사용하고 싶은 경우에는 아래와 같이 사용할 수 있습니다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndcast(air_melt2, Day ~ variable, \n      value.var='value',\n      fun.aggregate = function(x)x[1])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKey: <Day>\n      Day Ozone Solar.R  Wind  Temp\n    <int> <num>   <num> <num> <num>\n 1:     1    41     190   7.4    67\n 2:     2    36     118   8.0    72\n 3:     3    12     149  12.6    74\n 4:     4    18     313  11.5    62\n 5:     5    NA      NA  14.3    56\n 6:     6    28      NA  14.9    66\n 7:     7    23     299   8.6    65\n 8:     8    19      99  13.8    59\n 9:     9     8      19  20.1    61\n10:    10    NA     194   8.6    69\n11:    11     7      NA   6.9    74\n12:    12    16     256   9.7    69\n13:    13    11     290   9.2    66\n14:    14    14     274  10.9    68\n15:    15    18      65  13.2    58\n16:    16    14     334  11.5    64\n17:    17    34     307  12.0    66\n18:    18     6      78  18.4    57\n19:    19    30     322  11.5    68\n20:    20    11      44   9.7    62\n21:    21     1       8   9.7    59\n22:    22    11     320  16.6    73\n23:    23     4      25   9.7    61\n24:    24    32      92  12.0    61\n25:    25    NA      66  16.6    57\n26:    26    NA     266  14.9    58\n27:    27    NA      NA   8.0    57\n28:    28    23      13  12.0    67\n29:    29    45     252  14.9    81\n30:    30   115     223   5.7    79\n31:    31    37     279   7.4    76\n      Day Ozone Solar.R  Wind  Temp\n```\n:::\n:::\n\n\n::: callout-note\n가장 일반적으로 사용하는 데이터는 wide 형태의 데이터입니다.\n\n그러나 분석하고자 하는 유형, 필요한 데이터의 모양에 따라 데이터의 형태를 변환해줘야 할 때가 있습니다.\n:::\n\n#### 함께 보면 좋은 자료\n\n-   [data.table 기초](../data.table_basic/index.qmd)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}